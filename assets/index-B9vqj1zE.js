(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i0={exports:{}},bc={},s0={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=Symbol.for("react.element"),kx=Symbol.for("react.portal"),Px=Symbol.for("react.fragment"),Rx=Symbol.for("react.strict_mode"),Nx=Symbol.for("react.profiler"),Ox=Symbol.for("react.provider"),Dx=Symbol.for("react.context"),Lx=Symbol.for("react.forward_ref"),jx=Symbol.for("react.suspense"),Vx=Symbol.for("react.memo"),Mx=Symbol.for("react.lazy"),ay=Symbol.iterator;function Fx(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var o0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a0=Object.assign,l0={};function go(t,e,n){this.props=t,this.context=e,this.refs=l0,this.updater=n||o0}go.prototype.isReactComponent={};go.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};go.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function u0(){}u0.prototype=go.prototype;function ap(t,e,n){this.props=t,this.context=e,this.refs=l0,this.updater=n||o0}var lp=ap.prototype=new u0;lp.constructor=ap;a0(lp,go.prototype);lp.isPureReactComponent=!0;var ly=Array.isArray,c0=Object.prototype.hasOwnProperty,up={current:null},d0={key:!0,ref:!0,__self:!0,__source:!0};function h0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)c0.call(e,r)&&!d0.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Za,type:t,key:s,ref:o,props:i,_owner:up.current}}function Ux(t,e){return{$$typeof:Za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Za}function $x(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var uy=/\/+/g;function Rd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$x(""+t.key):e.toString(36)}function cu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Za:case kx:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Rd(o,0):r,ly(i)?(n="",t!=null&&(n=t.replace(uy,"$&/")+"/"),cu(i,e,n,"",function(c){return c})):i!=null&&(cp(i)&&(i=Ux(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(uy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ly(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Rd(s,l);o+=cu(s,e,n,u,i)}else if(u=Fx(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Rd(s,l++),o+=cu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ml(t,e,n){if(t==null)return t;var r=[],i=0;return cu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Bx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ln={current:null},du={transition:null},zx={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:du,ReactCurrentOwner:up};function f0(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Ml,forEach:function(t,e,n){Ml(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ml(t,function(){e++}),e},toArray:function(t){return Ml(t,function(e){return e})||[]},only:function(t){if(!cp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=go;fe.Fragment=Px;fe.Profiler=Nx;fe.PureComponent=ap;fe.StrictMode=Rx;fe.Suspense=jx;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zx;fe.act=f0;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=a0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=up.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)c0.call(e,u)&&!d0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Za,type:t.type,key:i,ref:s,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:Dx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ox,_context:t},t.Consumer=t};fe.createElement=h0;fe.createFactory=function(t){var e=h0.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:Lx,render:t}};fe.isValidElement=cp;fe.lazy=function(t){return{$$typeof:Mx,_payload:{_status:-1,_result:t},_init:Bx}};fe.memo=function(t,e){return{$$typeof:Vx,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=du.transition;du.transition={};try{t()}finally{du.transition=e}};fe.unstable_act=f0;fe.useCallback=function(t,e){return ln.current.useCallback(t,e)};fe.useContext=function(t){return ln.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return ln.current.useDeferredValue(t)};fe.useEffect=function(t,e){return ln.current.useEffect(t,e)};fe.useId=function(){return ln.current.useId()};fe.useImperativeHandle=function(t,e,n){return ln.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return ln.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return ln.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return ln.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return ln.current.useReducer(t,e,n)};fe.useRef=function(t){return ln.current.useRef(t)};fe.useState=function(t){return ln.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return ln.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return ln.current.useTransition()};fe.version="18.3.1";s0.exports=fe;var X=s0.exports;const Hx=r0(X);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx=X,qx=Symbol.for("react.element"),Gx=Symbol.for("react.fragment"),Kx=Object.prototype.hasOwnProperty,Qx=Wx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yx={key:!0,ref:!0,__self:!0,__source:!0};function p0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Kx.call(e,r)&&!Yx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qx,type:t,key:s,ref:o,props:i,_owner:Qx.current}}bc.Fragment=Gx;bc.jsx=p0;bc.jsxs=p0;i0.exports=bc;var f=i0.exports,Ch={},m0={exports:{}},Rn={},g0={exports:{}},y0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,ne){var se=W.length;W.push(ne);e:for(;0<se;){var ke=se-1>>>1,ge=W[ke];if(0<i(ge,ne))W[ke]=ne,W[se]=ge,se=ke;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ne=W[0],se=W.pop();if(se!==ne){W[0]=se;e:for(var ke=0,ge=W.length,de=ge>>>1;ke<de;){var en=2*(ke+1)-1,Mt=W[en],dn=en+1,En=W[dn];if(0>i(Mt,se))dn<ge&&0>i(En,Mt)?(W[ke]=En,W[dn]=se,ke=dn):(W[ke]=Mt,W[en]=se,ke=en);else if(dn<ge&&0>i(En,se))W[ke]=En,W[dn]=se,ke=dn;else break e}}return ne}function i(W,ne){var se=W.sortIndex-ne.sortIndex;return se!==0?se:W.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,m=null,g=3,_=!1,b=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(W){for(var ne=n(c);ne!==null;){if(ne.callback===null)r(c);else if(ne.startTime<=W)r(c),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(c)}}function D(W){if(k=!1,A(W),!b)if(n(u)!==null)b=!0,Dn(L);else{var ne=n(c);ne!==null&&_e(D,ne.startTime-W)}}function L(W,ne){b=!1,k&&(k=!1,E(w),w=-1),_=!0;var se=g;try{for(A(ne),m=n(u);m!==null&&(!(m.expirationTime>ne)||W&&!P());){var ke=m.callback;if(typeof ke=="function"){m.callback=null,g=m.priorityLevel;var ge=ke(m.expirationTime<=ne);ne=t.unstable_now(),typeof ge=="function"?m.callback=ge:m===n(u)&&r(u),A(ne)}else r(u);m=n(u)}if(m!==null)var de=!0;else{var en=n(c);en!==null&&_e(D,en.startTime-ne),de=!1}return de}finally{m=null,g=se,_=!1}}var V=!1,I=null,w=-1,T=5,x=-1;function P(){return!(t.unstable_now()-x<T)}function N(){if(I!==null){var W=t.unstable_now();x=W;var ne=!0;try{ne=I(!0,W)}finally{ne?S():(V=!1,I=null)}}else V=!1}var S;if(typeof v=="function")S=function(){v(N)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,cn=bt.port2;bt.port1.onmessage=N,S=function(){cn.postMessage(null)}}else S=function(){C(N,0)};function Dn(W){I=W,V||(V=!0,S())}function _e(W,ne){w=C(function(){W(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){b||_||(b=!0,Dn(L))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(g){case 1:case 2:case 3:var ne=3;break;default:ne=g}var se=g;g=ne;try{return W()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,ne){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var se=g;g=W;try{return ne()}finally{g=se}},t.unstable_scheduleCallback=function(W,ne,se){var ke=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ke+se:ke):se=ke,W){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=se+ge,W={id:h++,callback:ne,priorityLevel:W,startTime:se,expirationTime:ge,sortIndex:-1},se>ke?(W.sortIndex=se,e(c,W),n(u)===null&&W===n(c)&&(k?(E(w),w=-1):k=!0,_e(D,se-ke))):(W.sortIndex=ge,e(u,W),b||_||(b=!0,Dn(L))),W},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(W){var ne=g;return function(){var se=g;g=ne;try{return W.apply(this,arguments)}finally{g=se}}}})(y0);g0.exports=y0;var Xx=g0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx=X,Pn=Xx;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v0=new Set,Sa={};function cs(t,e){Js(t,e),Js(t+"Capture",e)}function Js(t,e){for(Sa[t]=e,t=0;t<e.length;t++)v0.add(e[t])}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kh=Object.prototype.hasOwnProperty,Zx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cy={},dy={};function eS(t){return kh.call(dy,t)?!0:kh.call(cy,t)?!1:Zx.test(t)?dy[t]=!0:(cy[t]=!0,!1)}function tS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nS(t,e,n,r){if(e===null||typeof e>"u"||tS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jt[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jt[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jt[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jt[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jt[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jt[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jt[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jt[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jt[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var dp=/[\-:]([a-z])/g;function hp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dp,hp);jt[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dp,hp);jt[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dp,hp);jt[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jt[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});jt.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jt[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function fp(t,e,n,r){var i=jt.hasOwnProperty(e)?jt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nS(e,n,i,r)&&(n=null),r||i===null?eS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $r=Jx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fl=Symbol.for("react.element"),As=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),pp=Symbol.for("react.strict_mode"),Ph=Symbol.for("react.profiler"),_0=Symbol.for("react.provider"),w0=Symbol.for("react.context"),mp=Symbol.for("react.forward_ref"),Rh=Symbol.for("react.suspense"),Nh=Symbol.for("react.suspense_list"),gp=Symbol.for("react.memo"),Yr=Symbol.for("react.lazy"),E0=Symbol.for("react.offscreen"),hy=Symbol.iterator;function Uo(t){return t===null||typeof t!="object"?null:(t=hy&&t[hy]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,Nd;function Xo(t){if(Nd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nd=e&&e[1]||""}return`
`+Nd+t}var Od=!1;function Dd(t,e){if(!t||Od)return"";Od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xo(t):""}function rS(t){switch(t.tag){case 5:return Xo(t.type);case 16:return Xo("Lazy");case 13:return Xo("Suspense");case 19:return Xo("SuspenseList");case 0:case 2:case 15:return t=Dd(t.type,!1),t;case 11:return t=Dd(t.type.render,!1),t;case 1:return t=Dd(t.type,!0),t;default:return""}}function Oh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case As:return"Portal";case Ph:return"Profiler";case pp:return"StrictMode";case Rh:return"Suspense";case Nh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case w0:return(t.displayName||"Context")+".Consumer";case _0:return(t._context.displayName||"Context")+".Provider";case mp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gp:return e=t.displayName||null,e!==null?e:Oh(t.type)||"Memo";case Yr:e=t._payload,t=t._init;try{return Oh(t(e))}catch{}}return null}function iS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oh(e);case 8:return e===pp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ti(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sS(t){var e=I0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ul(t){t._valueTracker||(t._valueTracker=sS(t))}function T0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=I0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Du(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dh(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ti(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function x0(t,e){e=e.checked,e!=null&&fp(t,"checked",e,!1)}function Lh(t,e){x0(t,e);var n=Ti(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jh(t,e.type,n):e.hasOwnProperty("defaultValue")&&jh(t,e.type,Ti(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function py(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jh(t,e,n){(e!=="number"||Du(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jo=Array.isArray;function Us(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ti(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function my(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Jo(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ti(n)}}function S0(t,e){var n=Ti(e.value),r=Ti(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function b0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?b0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $l,A0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($l=$l||document.createElement("div"),$l.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$l.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ba(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oS=["Webkit","ms","Moz","O"];Object.keys(oa).forEach(function(t){oS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oa[e]=oa[t]})});function C0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oa.hasOwnProperty(t)&&oa[t]?(""+e).trim():e+"px"}function k0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=C0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var aS=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fh(t,e){if(e){if(aS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Uh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $h=null;function yp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bh=null,$s=null,Bs=null;function yy(t){if(t=nl(t)){if(typeof Bh!="function")throw Error($(280));var e=t.stateNode;e&&(e=Rc(e),Bh(t.stateNode,t.type,e))}}function P0(t){$s?Bs?Bs.push(t):Bs=[t]:$s=t}function R0(){if($s){var t=$s,e=Bs;if(Bs=$s=null,yy(t),e)for(t=0;t<e.length;t++)yy(e[t])}}function N0(t,e){return t(e)}function O0(){}var Ld=!1;function D0(t,e,n){if(Ld)return t(e,n);Ld=!0;try{return N0(t,e,n)}finally{Ld=!1,($s!==null||Bs!==null)&&(O0(),R0())}}function Aa(t,e){var n=t.stateNode;if(n===null)return null;var r=Rc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var zh=!1;if(Rr)try{var $o={};Object.defineProperty($o,"passive",{get:function(){zh=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{zh=!1}function lS(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var aa=!1,Lu=null,ju=!1,Hh=null,uS={onError:function(t){aa=!0,Lu=t}};function cS(t,e,n,r,i,s,o,l,u){aa=!1,Lu=null,lS.apply(uS,arguments)}function dS(t,e,n,r,i,s,o,l,u){if(cS.apply(this,arguments),aa){if(aa){var c=Lu;aa=!1,Lu=null}else throw Error($(198));ju||(ju=!0,Hh=c)}}function ds(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function L0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vy(t){if(ds(t)!==t)throw Error($(188))}function hS(t){var e=t.alternate;if(!e){if(e=ds(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return vy(i),t;if(s===r)return vy(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function j0(t){return t=hS(t),t!==null?V0(t):null}function V0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=V0(t);if(e!==null)return e;t=t.sibling}return null}var M0=Pn.unstable_scheduleCallback,_y=Pn.unstable_cancelCallback,fS=Pn.unstable_shouldYield,pS=Pn.unstable_requestPaint,at=Pn.unstable_now,mS=Pn.unstable_getCurrentPriorityLevel,vp=Pn.unstable_ImmediatePriority,F0=Pn.unstable_UserBlockingPriority,Vu=Pn.unstable_NormalPriority,gS=Pn.unstable_LowPriority,U0=Pn.unstable_IdlePriority,Ac=null,sr=null;function yS(t){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(Ac,t,void 0,(t.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:wS,vS=Math.log,_S=Math.LN2;function wS(t){return t>>>=0,t===0?32:31-(vS(t)/_S|0)|0}var Bl=64,zl=4194304;function Zo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Zo(l):(s&=o,s!==0&&(r=Zo(s)))}else o=n&~i,o!==0?r=Zo(o):s!==0&&(r=Zo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qn(e),i=1<<n,r|=t[n],e&=~i;return r}function ES(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Qn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=ES(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Wh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $0(){var t=Bl;return Bl<<=1,!(Bl&4194240)&&(Bl=64),t}function jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function el(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qn(e),t[e]=n}function TS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Qn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function _p(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Re=0;function B0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var z0,wp,H0,W0,q0,qh=!1,Hl=[],li=null,ui=null,ci=null,Ca=new Map,ka=new Map,Zr=[],xS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wy(t,e){switch(t){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":Ca.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(e.pointerId)}}function Bo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=nl(e),e!==null&&wp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function SS(t,e,n,r,i){switch(e){case"focusin":return li=Bo(li,t,e,n,r,i),!0;case"dragenter":return ui=Bo(ui,t,e,n,r,i),!0;case"mouseover":return ci=Bo(ci,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ca.set(s,Bo(Ca.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ka.set(s,Bo(ka.get(s)||null,t,e,n,r,i)),!0}return!1}function G0(t){var e=Hi(t.target);if(e!==null){var n=ds(e);if(n!==null){if(e=n.tag,e===13){if(e=L0(n),e!==null){t.blockedOn=e,q0(t.priority,function(){H0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$h=r,n.target.dispatchEvent(r),$h=null}else return e=nl(n),e!==null&&wp(e),t.blockedOn=n,!1;e.shift()}return!0}function Ey(t,e,n){hu(t)&&n.delete(e)}function bS(){qh=!1,li!==null&&hu(li)&&(li=null),ui!==null&&hu(ui)&&(ui=null),ci!==null&&hu(ci)&&(ci=null),Ca.forEach(Ey),ka.forEach(Ey)}function zo(t,e){t.blockedOn===e&&(t.blockedOn=null,qh||(qh=!0,Pn.unstable_scheduleCallback(Pn.unstable_NormalPriority,bS)))}function Pa(t){function e(i){return zo(i,t)}if(0<Hl.length){zo(Hl[0],t);for(var n=1;n<Hl.length;n++){var r=Hl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(li!==null&&zo(li,t),ui!==null&&zo(ui,t),ci!==null&&zo(ci,t),Ca.forEach(e),ka.forEach(e),n=0;n<Zr.length;n++)r=Zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)G0(n),n.blockedOn===null&&Zr.shift()}var zs=$r.ReactCurrentBatchConfig,Fu=!0;function AS(t,e,n,r){var i=Re,s=zs.transition;zs.transition=null;try{Re=1,Ep(t,e,n,r)}finally{Re=i,zs.transition=s}}function CS(t,e,n,r){var i=Re,s=zs.transition;zs.transition=null;try{Re=4,Ep(t,e,n,r)}finally{Re=i,zs.transition=s}}function Ep(t,e,n,r){if(Fu){var i=Gh(t,e,n,r);if(i===null)qd(t,e,r,Uu,n),wy(t,r);else if(SS(i,t,e,n,r))r.stopPropagation();else if(wy(t,r),e&4&&-1<xS.indexOf(t)){for(;i!==null;){var s=nl(i);if(s!==null&&z0(s),s=Gh(t,e,n,r),s===null&&qd(t,e,r,Uu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else qd(t,e,r,null,n)}}var Uu=null;function Gh(t,e,n,r){if(Uu=null,t=yp(r),t=Hi(t),t!==null)if(e=ds(t),e===null)t=null;else if(n=e.tag,n===13){if(t=L0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Uu=t,null}function K0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mS()){case vp:return 1;case F0:return 4;case Vu:case gS:return 16;case U0:return 536870912;default:return 16}default:return 16}}var si=null,Ip=null,fu=null;function Q0(){if(fu)return fu;var t,e=Ip,n=e.length,r,i="value"in si?si.value:si.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return fu=i.slice(t,1<r?1-r:void 0)}function pu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wl(){return!0}function Iy(){return!1}function Nn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Wl:Iy,this.isPropagationStopped=Iy,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wl)},persist:function(){},isPersistent:Wl}),e}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tp=Nn(yo),tl=Je({},yo,{view:0,detail:0}),kS=Nn(tl),Vd,Md,Ho,Cc=Je({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ho&&(Ho&&t.type==="mousemove"?(Vd=t.screenX-Ho.screenX,Md=t.screenY-Ho.screenY):Md=Vd=0,Ho=t),Vd)},movementY:function(t){return"movementY"in t?t.movementY:Md}}),Ty=Nn(Cc),PS=Je({},Cc,{dataTransfer:0}),RS=Nn(PS),NS=Je({},tl,{relatedTarget:0}),Fd=Nn(NS),OS=Je({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),DS=Nn(OS),LS=Je({},yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jS=Nn(LS),VS=Je({},yo,{data:0}),xy=Nn(VS),MS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},US={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $S(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=US[t])?!!e[t]:!1}function xp(){return $S}var BS=Je({},tl,{key:function(t){if(t.key){var e=MS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xp,charCode:function(t){return t.type==="keypress"?pu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zS=Nn(BS),HS=Je({},Cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sy=Nn(HS),WS=Je({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xp}),qS=Nn(WS),GS=Je({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),KS=Nn(GS),QS=Je({},Cc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YS=Nn(QS),XS=[9,13,27,32],Sp=Rr&&"CompositionEvent"in window,la=null;Rr&&"documentMode"in document&&(la=document.documentMode);var JS=Rr&&"TextEvent"in window&&!la,Y0=Rr&&(!Sp||la&&8<la&&11>=la),by=" ",Ay=!1;function X0(t,e){switch(t){case"keyup":return XS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ks=!1;function ZS(t,e){switch(t){case"compositionend":return J0(e);case"keypress":return e.which!==32?null:(Ay=!0,by);case"textInput":return t=e.data,t===by&&Ay?null:t;default:return null}}function eb(t,e){if(ks)return t==="compositionend"||!Sp&&X0(t,e)?(t=Q0(),fu=Ip=si=null,ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y0&&e.locale!=="ko"?null:e.data;default:return null}}var tb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tb[t.type]:e==="textarea"}function Z0(t,e,n,r){P0(r),e=$u(e,"onChange"),0<e.length&&(n=new Tp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ua=null,Ra=null;function nb(t){cw(t,0)}function kc(t){var e=Ns(t);if(T0(e))return t}function rb(t,e){if(t==="change")return e}var ew=!1;if(Rr){var Ud;if(Rr){var $d="oninput"in document;if(!$d){var ky=document.createElement("div");ky.setAttribute("oninput","return;"),$d=typeof ky.oninput=="function"}Ud=$d}else Ud=!1;ew=Ud&&(!document.documentMode||9<document.documentMode)}function Py(){ua&&(ua.detachEvent("onpropertychange",tw),Ra=ua=null)}function tw(t){if(t.propertyName==="value"&&kc(Ra)){var e=[];Z0(e,Ra,t,yp(t)),D0(nb,e)}}function ib(t,e,n){t==="focusin"?(Py(),ua=e,Ra=n,ua.attachEvent("onpropertychange",tw)):t==="focusout"&&Py()}function sb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kc(Ra)}function ob(t,e){if(t==="click")return kc(e)}function ab(t,e){if(t==="input"||t==="change")return kc(e)}function lb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xn=typeof Object.is=="function"?Object.is:lb;function Na(t,e){if(Xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kh.call(e,i)||!Xn(t[i],e[i]))return!1}return!0}function Ry(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ny(t,e){var n=Ry(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ry(n)}}function nw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rw(){for(var t=window,e=Du();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Du(t.document)}return e}function bp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ub(t){var e=rw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nw(n.ownerDocument.documentElement,n)){if(r!==null&&bp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ny(n,s);var o=Ny(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cb=Rr&&"documentMode"in document&&11>=document.documentMode,Ps=null,Kh=null,ca=null,Qh=!1;function Oy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qh||Ps==null||Ps!==Du(r)||(r=Ps,"selectionStart"in r&&bp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ca&&Na(ca,r)||(ca=r,r=$u(Kh,"onSelect"),0<r.length&&(e=new Tp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ps)))}function ql(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Rs={animationend:ql("Animation","AnimationEnd"),animationiteration:ql("Animation","AnimationIteration"),animationstart:ql("Animation","AnimationStart"),transitionend:ql("Transition","TransitionEnd")},Bd={},iw={};Rr&&(iw=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function Pc(t){if(Bd[t])return Bd[t];if(!Rs[t])return t;var e=Rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iw)return Bd[t]=e[n];return t}var sw=Pc("animationend"),ow=Pc("animationiteration"),aw=Pc("animationstart"),lw=Pc("transitionend"),uw=new Map,Dy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(t,e){uw.set(t,e),cs(e,[t])}for(var zd=0;zd<Dy.length;zd++){var Hd=Dy[zd],db=Hd.toLowerCase(),hb=Hd[0].toUpperCase()+Hd.slice(1);ki(db,"on"+hb)}ki(sw,"onAnimationEnd");ki(ow,"onAnimationIteration");ki(aw,"onAnimationStart");ki("dblclick","onDoubleClick");ki("focusin","onFocus");ki("focusout","onBlur");ki(lw,"onTransitionEnd");Js("onMouseEnter",["mouseout","mouseover"]);Js("onMouseLeave",["mouseout","mouseover"]);Js("onPointerEnter",["pointerout","pointerover"]);Js("onPointerLeave",["pointerout","pointerover"]);cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cs("onBeforeInput",["compositionend","keypress","textInput","paste"]);cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ea));function Ly(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dS(r,e,void 0,t),t.currentTarget=null}function cw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Ly(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Ly(i,l,c),s=u}}}if(ju)throw t=Hh,ju=!1,Hh=null,t}function Ue(t,e){var n=e[ef];n===void 0&&(n=e[ef]=new Set);var r=t+"__bubble";n.has(r)||(dw(e,t,2,!1),n.add(r))}function Wd(t,e,n){var r=0;e&&(r|=4),dw(n,t,r,e)}var Gl="_reactListening"+Math.random().toString(36).slice(2);function Oa(t){if(!t[Gl]){t[Gl]=!0,v0.forEach(function(n){n!=="selectionchange"&&(fb.has(n)||Wd(n,!1,t),Wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gl]||(e[Gl]=!0,Wd("selectionchange",!1,e))}}function dw(t,e,n,r){switch(K0(e)){case 1:var i=AS;break;case 4:i=CS;break;default:i=Ep}n=i.bind(null,e,n,t),i=void 0,!zh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Hi(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}D0(function(){var c=s,h=yp(n),m=[];e:{var g=uw.get(t);if(g!==void 0){var _=Tp,b=t;switch(t){case"keypress":if(pu(n)===0)break e;case"keydown":case"keyup":_=zS;break;case"focusin":b="focus",_=Fd;break;case"focusout":b="blur",_=Fd;break;case"beforeblur":case"afterblur":_=Fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Ty;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=RS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=qS;break;case sw:case ow:case aw:_=DS;break;case lw:_=KS;break;case"scroll":_=kS;break;case"wheel":_=YS;break;case"copy":case"cut":case"paste":_=jS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Sy}var k=(e&4)!==0,C=!k&&t==="scroll",E=k?g!==null?g+"Capture":null:g;k=[];for(var v=c,A;v!==null;){A=v;var D=A.stateNode;if(A.tag===5&&D!==null&&(A=D,E!==null&&(D=Aa(v,E),D!=null&&k.push(Da(v,D,A)))),C)break;v=v.return}0<k.length&&(g=new _(g,b,null,n,h),m.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==$h&&(b=n.relatedTarget||n.fromElement)&&(Hi(b)||b[Nr]))break e;if((_||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,_?(b=n.relatedTarget||n.toElement,_=c,b=b?Hi(b):null,b!==null&&(C=ds(b),b!==C||b.tag!==5&&b.tag!==6)&&(b=null)):(_=null,b=c),_!==b)){if(k=Ty,D="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(k=Sy,D="onPointerLeave",E="onPointerEnter",v="pointer"),C=_==null?g:Ns(_),A=b==null?g:Ns(b),g=new k(D,v+"leave",_,n,h),g.target=C,g.relatedTarget=A,D=null,Hi(h)===c&&(k=new k(E,v+"enter",b,n,h),k.target=A,k.relatedTarget=C,D=k),C=D,_&&b)t:{for(k=_,E=b,v=0,A=k;A;A=ws(A))v++;for(A=0,D=E;D;D=ws(D))A++;for(;0<v-A;)k=ws(k),v--;for(;0<A-v;)E=ws(E),A--;for(;v--;){if(k===E||E!==null&&k===E.alternate)break t;k=ws(k),E=ws(E)}k=null}else k=null;_!==null&&jy(m,g,_,k,!1),b!==null&&C!==null&&jy(m,C,b,k,!0)}}e:{if(g=c?Ns(c):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var L=rb;else if(Cy(g))if(ew)L=ab;else{L=sb;var V=ib}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=ob);if(L&&(L=L(t,c))){Z0(m,L,n,h);break e}V&&V(t,g,c),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&jh(g,"number",g.value)}switch(V=c?Ns(c):window,t){case"focusin":(Cy(V)||V.contentEditable==="true")&&(Ps=V,Kh=c,ca=null);break;case"focusout":ca=Kh=Ps=null;break;case"mousedown":Qh=!0;break;case"contextmenu":case"mouseup":case"dragend":Qh=!1,Oy(m,n,h);break;case"selectionchange":if(cb)break;case"keydown":case"keyup":Oy(m,n,h)}var I;if(Sp)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ks?X0(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Y0&&n.locale!=="ko"&&(ks||w!=="onCompositionStart"?w==="onCompositionEnd"&&ks&&(I=Q0()):(si=h,Ip="value"in si?si.value:si.textContent,ks=!0)),V=$u(c,w),0<V.length&&(w=new xy(w,t,null,n,h),m.push({event:w,listeners:V}),I?w.data=I:(I=J0(n),I!==null&&(w.data=I)))),(I=JS?ZS(t,n):eb(t,n))&&(c=$u(c,"onBeforeInput"),0<c.length&&(h=new xy("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:c}),h.data=I))}cw(m,e)})}function Da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $u(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Aa(t,n),s!=null&&r.unshift(Da(t,s,i)),s=Aa(t,e),s!=null&&r.push(Da(t,s,i))),t=t.return}return r}function ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Aa(n,s),u!=null&&o.unshift(Da(n,u,l))):i||(u=Aa(n,s),u!=null&&o.push(Da(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pb=/\r\n?/g,mb=/\u0000|\uFFFD/g;function Vy(t){return(typeof t=="string"?t:""+t).replace(pb,`
`).replace(mb,"")}function Kl(t,e,n){if(e=Vy(e),Vy(t)!==e&&n)throw Error($(425))}function Bu(){}var Yh=null,Xh=null;function Jh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zh=typeof setTimeout=="function"?setTimeout:void 0,gb=typeof clearTimeout=="function"?clearTimeout:void 0,My=typeof Promise=="function"?Promise:void 0,yb=typeof queueMicrotask=="function"?queueMicrotask:typeof My<"u"?function(t){return My.resolve(null).then(t).catch(vb)}:Zh;function vb(t){setTimeout(function(){throw t})}function Gd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Pa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pa(e)}function di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vo=Math.random().toString(36).slice(2),rr="__reactFiber$"+vo,La="__reactProps$"+vo,Nr="__reactContainer$"+vo,ef="__reactEvents$"+vo,_b="__reactListeners$"+vo,wb="__reactHandles$"+vo;function Hi(t){var e=t[rr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nr]||n[rr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fy(t);t!==null;){if(n=t[rr])return n;t=Fy(t)}return e}t=n,n=t.parentNode}return null}function nl(t){return t=t[rr]||t[Nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ns(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Rc(t){return t[La]||null}var tf=[],Os=-1;function Pi(t){return{current:t}}function He(t){0>Os||(t.current=tf[Os],tf[Os]=null,Os--)}function je(t,e){Os++,tf[Os]=t.current,t.current=e}var xi={},Jt=Pi(xi),yn=Pi(!1),Ji=xi;function Zs(t,e){var n=t.type.contextTypes;if(!n)return xi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function vn(t){return t=t.childContextTypes,t!=null}function zu(){He(yn),He(Jt)}function Uy(t,e,n){if(Jt.current!==xi)throw Error($(168));je(Jt,e),je(yn,n)}function hw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,iS(t)||"Unknown",i));return Je({},n,r)}function Hu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xi,Ji=Jt.current,je(Jt,t),je(yn,yn.current),!0}function $y(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=hw(t,e,Ji),r.__reactInternalMemoizedMergedChildContext=t,He(yn),He(Jt),je(Jt,t)):He(yn),je(yn,n)}var Ir=null,Nc=!1,Kd=!1;function fw(t){Ir===null?Ir=[t]:Ir.push(t)}function Eb(t){Nc=!0,fw(t)}function Ri(){if(!Kd&&Ir!==null){Kd=!0;var t=0,e=Re;try{var n=Ir;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ir=null,Nc=!1}catch(i){throw Ir!==null&&(Ir=Ir.slice(t+1)),M0(vp,Ri),i}finally{Re=e,Kd=!1}}return null}var Ds=[],Ls=0,Wu=null,qu=0,Vn=[],Mn=0,Zi=null,Tr=1,xr="";function Fi(t,e){Ds[Ls++]=qu,Ds[Ls++]=Wu,Wu=t,qu=e}function pw(t,e,n){Vn[Mn++]=Tr,Vn[Mn++]=xr,Vn[Mn++]=Zi,Zi=t;var r=Tr;t=xr;var i=32-Qn(r)-1;r&=~(1<<i),n+=1;var s=32-Qn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Tr=1<<32-Qn(e)+i|n<<i|r,xr=s+t}else Tr=1<<s|n<<i|r,xr=t}function Ap(t){t.return!==null&&(Fi(t,1),pw(t,1,0))}function Cp(t){for(;t===Wu;)Wu=Ds[--Ls],Ds[Ls]=null,qu=Ds[--Ls],Ds[Ls]=null;for(;t===Zi;)Zi=Vn[--Mn],Vn[Mn]=null,xr=Vn[--Mn],Vn[Mn]=null,Tr=Vn[--Mn],Vn[Mn]=null}var Cn=null,bn=null,qe=!1,Kn=null;function mw(t,e){var n=Fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function By(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cn=t,bn=di(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zi!==null?{id:Tr,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Cn=t,bn=null,!0):!1;default:return!1}}function nf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rf(t){if(qe){var e=bn;if(e){var n=e;if(!By(t,e)){if(nf(t))throw Error($(418));e=di(n.nextSibling);var r=Cn;e&&By(t,e)?mw(r,n):(t.flags=t.flags&-4097|2,qe=!1,Cn=t)}}else{if(nf(t))throw Error($(418));t.flags=t.flags&-4097|2,qe=!1,Cn=t}}}function zy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cn=t}function Ql(t){if(t!==Cn)return!1;if(!qe)return zy(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jh(t.type,t.memoizedProps)),e&&(e=bn)){if(nf(t))throw gw(),Error($(418));for(;e;)mw(t,e),e=di(e.nextSibling)}if(zy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=di(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=Cn?di(t.stateNode.nextSibling):null;return!0}function gw(){for(var t=bn;t;)t=di(t.nextSibling)}function eo(){bn=Cn=null,qe=!1}function kp(t){Kn===null?Kn=[t]:Kn.push(t)}var Ib=$r.ReactCurrentBatchConfig;function Wo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Yl(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hy(t){var e=t._init;return e(t._payload)}function yw(t){function e(E,v){if(t){var A=E.deletions;A===null?(E.deletions=[v],E.flags|=16):A.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function i(E,v){return E=mi(E,v),E.index=0,E.sibling=null,E}function s(E,v,A){return E.index=A,t?(A=E.alternate,A!==null?(A=A.index,A<v?(E.flags|=2,v):A):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,v,A,D){return v===null||v.tag!==6?(v=th(A,E.mode,D),v.return=E,v):(v=i(v,A),v.return=E,v)}function u(E,v,A,D){var L=A.type;return L===Cs?h(E,v,A.props.children,D,A.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Yr&&Hy(L)===v.type)?(D=i(v,A.props),D.ref=Wo(E,v,A),D.return=E,D):(D=Eu(A.type,A.key,A.props,null,E.mode,D),D.ref=Wo(E,v,A),D.return=E,D)}function c(E,v,A,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==A.containerInfo||v.stateNode.implementation!==A.implementation?(v=nh(A,E.mode,D),v.return=E,v):(v=i(v,A.children||[]),v.return=E,v)}function h(E,v,A,D,L){return v===null||v.tag!==7?(v=Yi(A,E.mode,D,L),v.return=E,v):(v=i(v,A),v.return=E,v)}function m(E,v,A){if(typeof v=="string"&&v!==""||typeof v=="number")return v=th(""+v,E.mode,A),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fl:return A=Eu(v.type,v.key,v.props,null,E.mode,A),A.ref=Wo(E,null,v),A.return=E,A;case As:return v=nh(v,E.mode,A),v.return=E,v;case Yr:var D=v._init;return m(E,D(v._payload),A)}if(Jo(v)||Uo(v))return v=Yi(v,E.mode,A,null),v.return=E,v;Yl(E,v)}return null}function g(E,v,A,D){var L=v!==null?v.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return L!==null?null:l(E,v,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Fl:return A.key===L?u(E,v,A,D):null;case As:return A.key===L?c(E,v,A,D):null;case Yr:return L=A._init,g(E,v,L(A._payload),D)}if(Jo(A)||Uo(A))return L!==null?null:h(E,v,A,D,null);Yl(E,A)}return null}function _(E,v,A,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(A)||null,l(v,E,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Fl:return E=E.get(D.key===null?A:D.key)||null,u(v,E,D,L);case As:return E=E.get(D.key===null?A:D.key)||null,c(v,E,D,L);case Yr:var V=D._init;return _(E,v,A,V(D._payload),L)}if(Jo(D)||Uo(D))return E=E.get(A)||null,h(v,E,D,L,null);Yl(v,D)}return null}function b(E,v,A,D){for(var L=null,V=null,I=v,w=v=0,T=null;I!==null&&w<A.length;w++){I.index>w?(T=I,I=null):T=I.sibling;var x=g(E,I,A[w],D);if(x===null){I===null&&(I=T);break}t&&I&&x.alternate===null&&e(E,I),v=s(x,v,w),V===null?L=x:V.sibling=x,V=x,I=T}if(w===A.length)return n(E,I),qe&&Fi(E,w),L;if(I===null){for(;w<A.length;w++)I=m(E,A[w],D),I!==null&&(v=s(I,v,w),V===null?L=I:V.sibling=I,V=I);return qe&&Fi(E,w),L}for(I=r(E,I);w<A.length;w++)T=_(I,E,w,A[w],D),T!==null&&(t&&T.alternate!==null&&I.delete(T.key===null?w:T.key),v=s(T,v,w),V===null?L=T:V.sibling=T,V=T);return t&&I.forEach(function(P){return e(E,P)}),qe&&Fi(E,w),L}function k(E,v,A,D){var L=Uo(A);if(typeof L!="function")throw Error($(150));if(A=L.call(A),A==null)throw Error($(151));for(var V=L=null,I=v,w=v=0,T=null,x=A.next();I!==null&&!x.done;w++,x=A.next()){I.index>w?(T=I,I=null):T=I.sibling;var P=g(E,I,x.value,D);if(P===null){I===null&&(I=T);break}t&&I&&P.alternate===null&&e(E,I),v=s(P,v,w),V===null?L=P:V.sibling=P,V=P,I=T}if(x.done)return n(E,I),qe&&Fi(E,w),L;if(I===null){for(;!x.done;w++,x=A.next())x=m(E,x.value,D),x!==null&&(v=s(x,v,w),V===null?L=x:V.sibling=x,V=x);return qe&&Fi(E,w),L}for(I=r(E,I);!x.done;w++,x=A.next())x=_(I,E,w,x.value,D),x!==null&&(t&&x.alternate!==null&&I.delete(x.key===null?w:x.key),v=s(x,v,w),V===null?L=x:V.sibling=x,V=x);return t&&I.forEach(function(N){return e(E,N)}),qe&&Fi(E,w),L}function C(E,v,A,D){if(typeof A=="object"&&A!==null&&A.type===Cs&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Fl:e:{for(var L=A.key,V=v;V!==null;){if(V.key===L){if(L=A.type,L===Cs){if(V.tag===7){n(E,V.sibling),v=i(V,A.props.children),v.return=E,E=v;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Yr&&Hy(L)===V.type){n(E,V.sibling),v=i(V,A.props),v.ref=Wo(E,V,A),v.return=E,E=v;break e}n(E,V);break}else e(E,V);V=V.sibling}A.type===Cs?(v=Yi(A.props.children,E.mode,D,A.key),v.return=E,E=v):(D=Eu(A.type,A.key,A.props,null,E.mode,D),D.ref=Wo(E,v,A),D.return=E,E=D)}return o(E);case As:e:{for(V=A.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===A.containerInfo&&v.stateNode.implementation===A.implementation){n(E,v.sibling),v=i(v,A.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=nh(A,E.mode,D),v.return=E,E=v}return o(E);case Yr:return V=A._init,C(E,v,V(A._payload),D)}if(Jo(A))return b(E,v,A,D);if(Uo(A))return k(E,v,A,D);Yl(E,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,v!==null&&v.tag===6?(n(E,v.sibling),v=i(v,A),v.return=E,E=v):(n(E,v),v=th(A,E.mode,D),v.return=E,E=v),o(E)):n(E,v)}return C}var to=yw(!0),vw=yw(!1),Gu=Pi(null),Ku=null,js=null,Pp=null;function Rp(){Pp=js=Ku=null}function Np(t){var e=Gu.current;He(Gu),t._currentValue=e}function sf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hs(t,e){Ku=t,Pp=js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gn=!0),t.firstContext=null)}function Bn(t){var e=t._currentValue;if(Pp!==t)if(t={context:t,memoizedValue:e,next:null},js===null){if(Ku===null)throw Error($(308));js=t,Ku.dependencies={lanes:0,firstContext:t}}else js=js.next=t;return e}var Wi=null;function Op(t){Wi===null?Wi=[t]:Wi.push(t)}function _w(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Op(e)):(n.next=i.next,i.next=n),e.interleaved=n,Or(t,r)}function Or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function Dp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ww(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Or(t,n)}return i=r.interleaved,i===null?(e.next=e,Op(r)):(e.next=i.next,i.next=e),r.interleaved=e,Or(t,n)}function mu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_p(t,n)}}function Wy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qu(t,e,n,r){var i=t.updateQueue;Xr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,h=c=u=null,l=s;do{var g=l.lane,_=l.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,k=l;switch(g=e,_=n,k.tag){case 1:if(b=k.payload,typeof b=="function"){m=b.call(_,m,g);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,g=typeof b=="function"?b.call(_,m,g):b,g==null)break e;m=Je({},m,g);break e;case 2:Xr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else _={eventTime:_,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=_,u=m):h=h.next=_,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ts|=o,t.lanes=o,t.memoizedState=m}}function qy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var rl={},or=Pi(rl),ja=Pi(rl),Va=Pi(rl);function qi(t){if(t===rl)throw Error($(174));return t}function Lp(t,e){switch(je(Va,e),je(ja,t),je(or,rl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mh(e,t)}He(or),je(or,e)}function no(){He(or),He(ja),He(Va)}function Ew(t){qi(Va.current);var e=qi(or.current),n=Mh(e,t.type);e!==n&&(je(ja,t),je(or,n))}function jp(t){ja.current===t&&(He(or),He(ja))}var Qe=Pi(0);function Yu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qd=[];function Vp(){for(var t=0;t<Qd.length;t++)Qd[t]._workInProgressVersionPrimary=null;Qd.length=0}var gu=$r.ReactCurrentDispatcher,Yd=$r.ReactCurrentBatchConfig,es=0,Xe=null,yt=null,xt=null,Xu=!1,da=!1,Ma=0,Tb=0;function Bt(){throw Error($(321))}function Mp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xn(t[n],e[n]))return!1;return!0}function Fp(t,e,n,r,i,s){if(es=s,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gu.current=t===null||t.memoizedState===null?Ab:Cb,t=n(r,i),da){s=0;do{if(da=!1,Ma=0,25<=s)throw Error($(301));s+=1,xt=yt=null,e.updateQueue=null,gu.current=kb,t=n(r,i)}while(da)}if(gu.current=Ju,e=yt!==null&&yt.next!==null,es=0,xt=yt=Xe=null,Xu=!1,e)throw Error($(300));return t}function Up(){var t=Ma!==0;return Ma=0,t}function nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Xe.memoizedState=xt=t:xt=xt.next=t,xt}function zn(){if(yt===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var e=xt===null?Xe.memoizedState:xt.next;if(e!==null)xt=e,yt=t;else{if(t===null)throw Error($(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},xt===null?Xe.memoizedState=xt=t:xt=xt.next=t}return xt}function Fa(t,e){return typeof e=="function"?e(t):e}function Xd(t){var e=zn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=yt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var h=c.lane;if((es&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Xe.lanes|=h,ts|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,Xn(r,e.memoizedState)||(gn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Xe.lanes|=s,ts|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jd(t){var e=zn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Xn(s,e.memoizedState)||(gn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Iw(){}function Tw(t,e){var n=Xe,r=zn(),i=e(),s=!Xn(r.memoizedState,i);if(s&&(r.memoizedState=i,gn=!0),r=r.queue,$p(bw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,Ua(9,Sw.bind(null,n,r,i,e),void 0,null),St===null)throw Error($(349));es&30||xw(n,e,i)}return i}function xw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sw(t,e,n,r){e.value=n,e.getSnapshot=r,Aw(e)&&Cw(t)}function bw(t,e,n){return n(function(){Aw(e)&&Cw(t)})}function Aw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xn(t,n)}catch{return!0}}function Cw(t){var e=Or(t,1);e!==null&&Yn(e,t,1,-1)}function Gy(t){var e=nr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:t},e.queue=t,t=t.dispatch=bb.bind(null,Xe,t),[e.memoizedState,t]}function Ua(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function kw(){return zn().memoizedState}function yu(t,e,n,r){var i=nr();Xe.flags|=t,i.memoizedState=Ua(1|e,n,void 0,r===void 0?null:r)}function Oc(t,e,n,r){var i=zn();r=r===void 0?null:r;var s=void 0;if(yt!==null){var o=yt.memoizedState;if(s=o.destroy,r!==null&&Mp(r,o.deps)){i.memoizedState=Ua(e,n,s,r);return}}Xe.flags|=t,i.memoizedState=Ua(1|e,n,s,r)}function Ky(t,e){return yu(8390656,8,t,e)}function $p(t,e){return Oc(2048,8,t,e)}function Pw(t,e){return Oc(4,2,t,e)}function Rw(t,e){return Oc(4,4,t,e)}function Nw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ow(t,e,n){return n=n!=null?n.concat([t]):null,Oc(4,4,Nw.bind(null,e,t),n)}function Bp(){}function Dw(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lw(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jw(t,e,n){return es&21?(Xn(n,e)||(n=$0(),Xe.lanes|=n,ts|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gn=!0),t.memoizedState=n)}function xb(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=Yd.transition;Yd.transition={};try{t(!1),e()}finally{Re=n,Yd.transition=r}}function Vw(){return zn().memoizedState}function Sb(t,e,n){var r=pi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mw(t))Fw(e,n);else if(n=_w(t,e,n,r),n!==null){var i=sn();Yn(n,t,r,i),Uw(n,e,r)}}function bb(t,e,n){var r=pi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mw(t))Fw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Xn(l,o)){var u=e.interleaved;u===null?(i.next=i,Op(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=_w(t,e,i,r),n!==null&&(i=sn(),Yn(n,t,r,i),Uw(n,e,r))}}function Mw(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function Fw(t,e){da=Xu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Uw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_p(t,n)}}var Ju={readContext:Bn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},Ab={readContext:Bn,useCallback:function(t,e){return nr().memoizedState=[t,e===void 0?null:e],t},useContext:Bn,useEffect:Ky,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yu(4194308,4,Nw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yu(4194308,4,t,e)},useInsertionEffect:function(t,e){return yu(4,2,t,e)},useMemo:function(t,e){var n=nr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=nr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Sb.bind(null,Xe,t),[r.memoizedState,t]},useRef:function(t){var e=nr();return t={current:t},e.memoizedState=t},useState:Gy,useDebugValue:Bp,useDeferredValue:function(t){return nr().memoizedState=t},useTransition:function(){var t=Gy(!1),e=t[0];return t=xb.bind(null,t[1]),nr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xe,i=nr();if(qe){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),St===null)throw Error($(349));es&30||xw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ky(bw.bind(null,r,s,t),[t]),r.flags|=2048,Ua(9,Sw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=nr(),e=St.identifierPrefix;if(qe){var n=xr,r=Tr;n=(r&~(1<<32-Qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Tb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Cb={readContext:Bn,useCallback:Dw,useContext:Bn,useEffect:$p,useImperativeHandle:Ow,useInsertionEffect:Pw,useLayoutEffect:Rw,useMemo:Lw,useReducer:Xd,useRef:kw,useState:function(){return Xd(Fa)},useDebugValue:Bp,useDeferredValue:function(t){var e=zn();return jw(e,yt.memoizedState,t)},useTransition:function(){var t=Xd(Fa)[0],e=zn().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:Tw,useId:Vw,unstable_isNewReconciler:!1},kb={readContext:Bn,useCallback:Dw,useContext:Bn,useEffect:$p,useImperativeHandle:Ow,useInsertionEffect:Pw,useLayoutEffect:Rw,useMemo:Lw,useReducer:Jd,useRef:kw,useState:function(){return Jd(Fa)},useDebugValue:Bp,useDeferredValue:function(t){var e=zn();return yt===null?e.memoizedState=t:jw(e,yt.memoizedState,t)},useTransition:function(){var t=Jd(Fa)[0],e=zn().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:Tw,useId:Vw,unstable_isNewReconciler:!1};function qn(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function of(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dc={isMounted:function(t){return(t=t._reactInternals)?ds(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=sn(),i=pi(t),s=kr(r,i);s.payload=e,n!=null&&(s.callback=n),e=hi(t,s,i),e!==null&&(Yn(e,t,i,r),mu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=sn(),i=pi(t),s=kr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=hi(t,s,i),e!==null&&(Yn(e,t,i,r),mu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sn(),r=pi(t),i=kr(n,r);i.tag=2,e!=null&&(i.callback=e),e=hi(t,i,r),e!==null&&(Yn(e,t,r,n),mu(e,t,r))}};function Qy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Na(n,r)||!Na(i,s):!0}function $w(t,e,n){var r=!1,i=xi,s=e.contextType;return typeof s=="object"&&s!==null?s=Bn(s):(i=vn(e)?Ji:Jt.current,r=e.contextTypes,s=(r=r!=null)?Zs(t,i):xi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Yy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Dc.enqueueReplaceState(e,e.state,null)}function af(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Dp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Bn(s):(s=vn(e)?Ji:Jt.current,i.context=Zs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(of(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Dc.enqueueReplaceState(i,i.state,null),Qu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ro(t,e){try{var n="",r=e;do n+=rS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Zd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Pb=typeof WeakMap=="function"?WeakMap:Map;function Bw(t,e,n){n=kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ec||(ec=!0,vf=r),lf(t,e)},n}function zw(t,e,n){n=kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){lf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){lf(t,e),typeof r!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Xy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Pb;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Hb.bind(null,t,e,n),e.then(t,t))}function Jy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kr(-1,1),e.tag=2,hi(n,e,1))),n.lanes|=1),t)}var Rb=$r.ReactCurrentOwner,gn=!1;function rn(t,e,n,r){e.child=t===null?vw(e,null,n,r):to(e,t.child,n,r)}function ev(t,e,n,r,i){n=n.render;var s=e.ref;return Hs(e,i),r=Fp(t,e,n,r,s,i),n=Up(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dr(t,e,i)):(qe&&n&&Ap(e),e.flags|=1,rn(t,e,r,i),e.child)}function tv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Yp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Hw(t,e,s,r,i)):(t=Eu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Na,n(o,r)&&t.ref===e.ref)return Dr(t,e,i)}return e.flags|=1,t=mi(s,r),t.ref=e.ref,t.return=e,e.child=t}function Hw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Na(s,r)&&t.ref===e.ref)if(gn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(gn=!0);else return e.lanes=t.lanes,Dr(t,e,i)}return uf(t,e,n,r,i)}function Ww(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Ms,xn),xn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(Ms,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,je(Ms,xn),xn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,je(Ms,xn),xn|=r;return rn(t,e,i,n),e.child}function qw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uf(t,e,n,r,i){var s=vn(n)?Ji:Jt.current;return s=Zs(e,s),Hs(e,i),n=Fp(t,e,n,r,s,i),r=Up(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dr(t,e,i)):(qe&&r&&Ap(e),e.flags|=1,rn(t,e,n,i),e.child)}function nv(t,e,n,r,i){if(vn(n)){var s=!0;Hu(e)}else s=!1;if(Hs(e,i),e.stateNode===null)vu(t,e),$w(e,n,r),af(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Bn(c):(c=vn(n)?Ji:Jt.current,c=Zs(e,c));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Yy(e,o,r,c),Xr=!1;var g=e.memoizedState;o.state=g,Qu(e,r,o,i),u=e.memoizedState,l!==r||g!==u||yn.current||Xr?(typeof h=="function"&&(of(e,n,h,r),u=e.memoizedState),(l=Xr||Qy(e,n,l,r,g,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ww(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:qn(e.type,l),o.props=c,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Bn(u):(u=vn(n)?Ji:Jt.current,u=Zs(e,u));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Yy(e,o,r,u),Xr=!1,g=e.memoizedState,o.state=g,Qu(e,r,o,i);var b=e.memoizedState;l!==m||g!==b||yn.current||Xr?(typeof _=="function"&&(of(e,n,_,r),b=e.memoizedState),(c=Xr||Qy(e,n,c,r,g,b,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return cf(t,e,n,r,s,i)}function cf(t,e,n,r,i,s){qw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&$y(e,n,!1),Dr(t,e,s);r=e.stateNode,Rb.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=to(e,t.child,null,s),e.child=to(e,null,l,s)):rn(t,e,l,s),e.memoizedState=r.state,i&&$y(e,n,!0),e.child}function Gw(t){var e=t.stateNode;e.pendingContext?Uy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Uy(t,e.context,!1),Lp(t,e.containerInfo)}function rv(t,e,n,r,i){return eo(),kp(i),e.flags|=256,rn(t,e,n,r),e.child}var df={dehydrated:null,treeContext:null,retryLane:0};function hf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kw(t,e,n){var r=e.pendingProps,i=Qe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),je(Qe,i&1),t===null)return rf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Vc(o,r,0,null),t=Yi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hf(n),e.memoizedState=df,t):zp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Nb(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=mi(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=mi(l,s):(s=Yi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?hf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=df,r}return s=t.child,t=s.sibling,r=mi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zp(t,e){return e=Vc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xl(t,e,n,r){return r!==null&&kp(r),to(e,t.child,null,n),t=zp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Nb(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Zd(Error($(422))),Xl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Vc({mode:"visible",children:r.children},i,0,null),s=Yi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&to(e,t.child,null,o),e.child.memoizedState=hf(o),e.memoizedState=df,s);if(!(e.mode&1))return Xl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error($(419)),r=Zd(s,r,void 0),Xl(t,e,o,r)}if(l=(o&t.childLanes)!==0,gn||l){if(r=St,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Or(t,i),Yn(r,t,i,-1))}return Qp(),r=Zd(Error($(421))),Xl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Wb.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,bn=di(i.nextSibling),Cn=e,qe=!0,Kn=null,t!==null&&(Vn[Mn++]=Tr,Vn[Mn++]=xr,Vn[Mn++]=Zi,Tr=t.id,xr=t.overflow,Zi=e),e=zp(e,r.children),e.flags|=4096,e)}function iv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sf(t.return,e,n)}function eh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Qw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(rn(t,e,r.children,n),r=Qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iv(t,n,e);else if(t.tag===19)iv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(Qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Yu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),eh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Yu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}eh(e,!0,n,null,s);break;case"together":eh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ts|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=mi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ob(t,e,n){switch(e.tag){case 3:Gw(e),eo();break;case 5:Ew(e);break;case 1:vn(e.type)&&Hu(e);break;case 4:Lp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;je(Gu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(Qe,Qe.current&1),e.flags|=128,null):n&e.child.childLanes?Kw(t,e,n):(je(Qe,Qe.current&1),t=Dr(t,e,n),t!==null?t.sibling:null);je(Qe,Qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Qw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(Qe,Qe.current),r)break;return null;case 22:case 23:return e.lanes=0,Ww(t,e,n)}return Dr(t,e,n)}var Yw,ff,Xw,Jw;Yw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ff=function(){};Xw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,qi(or.current);var s=null;switch(n){case"input":i=Dh(t,i),r=Dh(t,r),s=[];break;case"select":i=Je({},i,{value:void 0}),r=Je({},r,{value:void 0}),s=[];break;case"textarea":i=Vh(t,i),r=Vh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bu)}Fh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Sa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Sa.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ue("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Jw=function(t,e,n,r){n!==r&&(e.flags|=4)};function qo(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Db(t,e,n){var r=e.pendingProps;switch(Cp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(e),null;case 1:return vn(e.type)&&zu(),zt(e),null;case 3:return r=e.stateNode,no(),He(yn),He(Jt),Vp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ql(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(Ef(Kn),Kn=null))),ff(t,e),zt(e),null;case 5:jp(e);var i=qi(Va.current);if(n=e.type,t!==null&&e.stateNode!=null)Xw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return zt(e),null}if(t=qi(or.current),Ql(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[rr]=e,r[La]=s,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(i=0;i<ea.length;i++)Ue(ea[i],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":fy(r,s),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",r);break;case"textarea":my(r,s),Ue("invalid",r)}Fh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Kl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Kl(r.textContent,l,t),i=["children",""+l]):Sa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":Ul(r),py(r,s,!0);break;case"textarea":Ul(r),gy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Bu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=b0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[rr]=e,t[La]=r,Yw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Uh(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),i=r;break;case"iframe":case"object":case"embed":Ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<ea.length;i++)Ue(ea[i],t);i=r;break;case"source":Ue("error",t),i=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=r;break;case"details":Ue("toggle",t),i=r;break;case"input":fy(t,r),i=Dh(t,r),Ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Je({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":my(t,r),i=Vh(t,r),Ue("invalid",t);break;default:i=r}Fh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?k0(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&A0(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ba(t,u):typeof u=="number"&&ba(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sa.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ue("scroll",t):u!=null&&fp(t,s,u,o))}switch(n){case"input":Ul(t),py(t,r,!1);break;case"textarea":Ul(t),gy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ti(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Us(t,!!r.multiple,s,!1):r.defaultValue!=null&&Us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Bu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zt(e),null;case 6:if(t&&e.stateNode!=null)Jw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=qi(Va.current),qi(or.current),Ql(e)){if(r=e.stateNode,n=e.memoizedProps,r[rr]=e,(s=r.nodeValue!==n)&&(t=Cn,t!==null))switch(t.tag){case 3:Kl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rr]=e,e.stateNode=r}return zt(e),null;case 13:if(He(Qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&bn!==null&&e.mode&1&&!(e.flags&128))gw(),eo(),e.flags|=98560,s=!1;else if(s=Ql(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[rr]=e}else eo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zt(e),s=!1}else Kn!==null&&(Ef(Kn),Kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?_t===0&&(_t=3):Qp())),e.updateQueue!==null&&(e.flags|=4),zt(e),null);case 4:return no(),ff(t,e),t===null&&Oa(e.stateNode.containerInfo),zt(e),null;case 10:return Np(e.type._context),zt(e),null;case 17:return vn(e.type)&&zu(),zt(e),null;case 19:if(He(Qe),s=e.memoizedState,s===null)return zt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)qo(s,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Yu(t),o!==null){for(e.flags|=128,qo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(Qe,Qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&at()>io&&(e.flags|=128,r=!0,qo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Yu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!qe)return zt(e),null}else 2*at()-s.renderingStartTime>io&&n!==1073741824&&(e.flags|=128,r=!0,qo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=at(),e.sibling=null,n=Qe.current,je(Qe,r?n&1|2:n&1),e):(zt(e),null);case 22:case 23:return Kp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xn&1073741824&&(zt(e),e.subtreeFlags&6&&(e.flags|=8192)):zt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Lb(t,e){switch(Cp(e),e.tag){case 1:return vn(e.type)&&zu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return no(),He(yn),He(Jt),Vp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jp(e),null;case 13:if(He(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));eo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return He(Qe),null;case 4:return no(),null;case 10:return Np(e.type._context),null;case 22:case 23:return Kp(),null;case 24:return null;default:return null}}var Jl=!1,Kt=!1,jb=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Vs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(t,e,r)}else n.current=null}function pf(t,e,n){try{n()}catch(r){nt(t,e,r)}}var sv=!1;function Vb(t,e){if(Yh=Fu,t=rw(),bp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,m=t,g=null;t:for(;;){for(var _;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(_=m.firstChild)!==null;)g=m,m=_;for(;;){if(m===t)break t;if(g===n&&++c===i&&(l=o),g===s&&++h===r&&(u=o),(_=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xh={focusedElem:t,selectionRange:n},Fu=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,C=b.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?k:qn(e.type,k),C);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(D){nt(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return b=sv,sv=!1,b}function ha(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&pf(e,n,s)}i=i.next}while(i!==r)}}function Lc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Zw(t){var e=t.alternate;e!==null&&(t.alternate=null,Zw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rr],delete e[La],delete e[ef],delete e[_b],delete e[wb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eE(t){return t.tag===5||t.tag===3||t.tag===4}function ov(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bu));else if(r!==4&&(t=t.child,t!==null))for(gf(t,e,n),t=t.sibling;t!==null;)gf(t,e,n),t=t.sibling}function yf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yf(t,e,n),t=t.sibling;t!==null;)yf(t,e,n),t=t.sibling}var Ct=null,Gn=!1;function Gr(t,e,n){for(n=n.child;n!==null;)tE(t,e,n),n=n.sibling}function tE(t,e,n){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(Ac,n)}catch{}switch(n.tag){case 5:Kt||Vs(n,e);case 6:var r=Ct,i=Gn;Ct=null,Gr(t,e,n),Ct=r,Gn=i,Ct!==null&&(Gn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Gn?(t=Ct,n=n.stateNode,t.nodeType===8?Gd(t.parentNode,n):t.nodeType===1&&Gd(t,n),Pa(t)):Gd(Ct,n.stateNode));break;case 4:r=Ct,i=Gn,Ct=n.stateNode.containerInfo,Gn=!0,Gr(t,e,n),Ct=r,Gn=i;break;case 0:case 11:case 14:case 15:if(!Kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&pf(n,e,o),i=i.next}while(i!==r)}Gr(t,e,n);break;case 1:if(!Kt&&(Vs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){nt(n,e,l)}Gr(t,e,n);break;case 21:Gr(t,e,n);break;case 22:n.mode&1?(Kt=(r=Kt)||n.memoizedState!==null,Gr(t,e,n),Kt=r):Gr(t,e,n);break;default:Gr(t,e,n)}}function av(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jb),e.forEach(function(r){var i=qb.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ct=l.stateNode,Gn=!1;break e;case 3:Ct=l.stateNode.containerInfo,Gn=!0;break e;case 4:Ct=l.stateNode.containerInfo,Gn=!0;break e}l=l.return}if(Ct===null)throw Error($(160));tE(s,o,i),Ct=null,Gn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){nt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nE(e,t),e=e.sibling}function nE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),tr(t),r&4){try{ha(3,t,t.return),Lc(3,t)}catch(k){nt(t,t.return,k)}try{ha(5,t,t.return)}catch(k){nt(t,t.return,k)}}break;case 1:Wn(e,t),tr(t),r&512&&n!==null&&Vs(n,n.return);break;case 5:if(Wn(e,t),tr(t),r&512&&n!==null&&Vs(n,n.return),t.flags&32){var i=t.stateNode;try{ba(i,"")}catch(k){nt(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&x0(i,s),Uh(l,o);var c=Uh(l,s);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?k0(i,m):h==="dangerouslySetInnerHTML"?A0(i,m):h==="children"?ba(i,m):fp(i,h,m,c)}switch(l){case"input":Lh(i,s);break;case"textarea":S0(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Us(i,!!s.multiple,_,!1):g!==!!s.multiple&&(s.defaultValue!=null?Us(i,!!s.multiple,s.defaultValue,!0):Us(i,!!s.multiple,s.multiple?[]:"",!1))}i[La]=s}catch(k){nt(t,t.return,k)}}break;case 6:if(Wn(e,t),tr(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){nt(t,t.return,k)}}break;case 3:if(Wn(e,t),tr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pa(e.containerInfo)}catch(k){nt(t,t.return,k)}break;case 4:Wn(e,t),tr(t);break;case 13:Wn(e,t),tr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(qp=at())),r&4&&av(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Kt=(c=Kt)||h,Wn(e,t),Kt=c):Wn(e,t),tr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Q=t,h=t.child;h!==null;){for(m=Q=h;Q!==null;){switch(g=Q,_=g.child,g.tag){case 0:case 11:case 14:case 15:ha(4,g,g.return);break;case 1:Vs(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(k){nt(r,n,k)}}break;case 5:Vs(g,g.return);break;case 22:if(g.memoizedState!==null){uv(m);continue}}_!==null?(_.return=g,Q=_):uv(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=C0("display",o))}catch(k){nt(t,t.return,k)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(k){nt(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Wn(e,t),tr(t),r&4&&av(t);break;case 21:break;default:Wn(e,t),tr(t)}}function tr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eE(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ba(i,""),r.flags&=-33);var s=ov(t);yf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ov(t);gf(t,l,o);break;default:throw Error($(161))}}catch(u){nt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Mb(t,e,n){Q=t,rE(t)}function rE(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Jl;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Kt;l=Jl;var c=Kt;if(Jl=o,(Kt=u)&&!c)for(Q=i;Q!==null;)o=Q,u=o.child,o.tag===22&&o.memoizedState!==null?cv(i):u!==null?(u.return=o,Q=u):cv(i);for(;s!==null;)Q=s,rE(s),s=s.sibling;Q=i,Jl=l,Kt=c}lv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):lv(t)}}function lv(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kt||Lc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:qn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&qy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Pa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Kt||e.flags&512&&mf(e)}catch(g){nt(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function uv(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function cv(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lc(4,e)}catch(u){nt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){nt(e,i,u)}}var s=e.return;try{mf(e)}catch(u){nt(e,s,u)}break;case 5:var o=e.return;try{mf(e)}catch(u){nt(e,o,u)}}}catch(u){nt(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var Fb=Math.ceil,Zu=$r.ReactCurrentDispatcher,Hp=$r.ReactCurrentOwner,Un=$r.ReactCurrentBatchConfig,xe=0,St=null,ft=null,Dt=0,xn=0,Ms=Pi(0),_t=0,$a=null,ts=0,jc=0,Wp=0,fa=null,pn=null,qp=0,io=1/0,Er=null,ec=!1,vf=null,fi=null,Zl=!1,oi=null,tc=0,pa=0,_f=null,_u=-1,wu=0;function sn(){return xe&6?at():_u!==-1?_u:_u=at()}function pi(t){return t.mode&1?xe&2&&Dt!==0?Dt&-Dt:Ib.transition!==null?(wu===0&&(wu=$0()),wu):(t=Re,t!==0||(t=window.event,t=t===void 0?16:K0(t.type)),t):1}function Yn(t,e,n,r){if(50<pa)throw pa=0,_f=null,Error($(185));el(t,n,r),(!(xe&2)||t!==St)&&(t===St&&(!(xe&2)&&(jc|=n),_t===4&&ei(t,Dt)),_n(t,r),n===1&&xe===0&&!(e.mode&1)&&(io=at()+500,Nc&&Ri()))}function _n(t,e){var n=t.callbackNode;IS(t,e);var r=Mu(t,t===St?Dt:0);if(r===0)n!==null&&_y(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_y(n),e===1)t.tag===0?Eb(dv.bind(null,t)):fw(dv.bind(null,t)),yb(function(){!(xe&6)&&Ri()}),n=null;else{switch(B0(r)){case 1:n=vp;break;case 4:n=F0;break;case 16:n=Vu;break;case 536870912:n=U0;break;default:n=Vu}n=dE(n,iE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iE(t,e){if(_u=-1,wu=0,xe&6)throw Error($(327));var n=t.callbackNode;if(Ws()&&t.callbackNode!==n)return null;var r=Mu(t,t===St?Dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=nc(t,r);else{e=r;var i=xe;xe|=2;var s=oE();(St!==t||Dt!==e)&&(Er=null,io=at()+500,Qi(t,e));do try{Bb();break}catch(l){sE(t,l)}while(!0);Rp(),Zu.current=s,xe=i,ft!==null?e=0:(St=null,Dt=0,e=_t)}if(e!==0){if(e===2&&(i=Wh(t),i!==0&&(r=i,e=wf(t,i))),e===1)throw n=$a,Qi(t,0),ei(t,r),_n(t,at()),n;if(e===6)ei(t,r);else{if(i=t.current.alternate,!(r&30)&&!Ub(i)&&(e=nc(t,r),e===2&&(s=Wh(t),s!==0&&(r=s,e=wf(t,s))),e===1))throw n=$a,Qi(t,0),ei(t,r),_n(t,at()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Ui(t,pn,Er);break;case 3:if(ei(t,r),(r&130023424)===r&&(e=qp+500-at(),10<e)){if(Mu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){sn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Zh(Ui.bind(null,t,pn,Er),e);break}Ui(t,pn,Er);break;case 4:if(ei(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Qn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Fb(r/1960))-r,10<r){t.timeoutHandle=Zh(Ui.bind(null,t,pn,Er),r);break}Ui(t,pn,Er);break;case 5:Ui(t,pn,Er);break;default:throw Error($(329))}}}return _n(t,at()),t.callbackNode===n?iE.bind(null,t):null}function wf(t,e){var n=fa;return t.current.memoizedState.isDehydrated&&(Qi(t,e).flags|=256),t=nc(t,e),t!==2&&(e=pn,pn=n,e!==null&&Ef(e)),t}function Ef(t){pn===null?pn=t:pn.push.apply(pn,t)}function Ub(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Xn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ei(t,e){for(e&=~Wp,e&=~jc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qn(e),r=1<<n;t[n]=-1,e&=~r}}function dv(t){if(xe&6)throw Error($(327));Ws();var e=Mu(t,0);if(!(e&1))return _n(t,at()),null;var n=nc(t,e);if(t.tag!==0&&n===2){var r=Wh(t);r!==0&&(e=r,n=wf(t,r))}if(n===1)throw n=$a,Qi(t,0),ei(t,e),_n(t,at()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ui(t,pn,Er),_n(t,at()),null}function Gp(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(io=at()+500,Nc&&Ri())}}function ns(t){oi!==null&&oi.tag===0&&!(xe&6)&&Ws();var e=xe;xe|=1;var n=Un.transition,r=Re;try{if(Un.transition=null,Re=1,t)return t()}finally{Re=r,Un.transition=n,xe=e,!(xe&6)&&Ri()}}function Kp(){xn=Ms.current,He(Ms)}function Qi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gb(n)),ft!==null)for(n=ft.return;n!==null;){var r=n;switch(Cp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zu();break;case 3:no(),He(yn),He(Jt),Vp();break;case 5:jp(r);break;case 4:no();break;case 13:He(Qe);break;case 19:He(Qe);break;case 10:Np(r.type._context);break;case 22:case 23:Kp()}n=n.return}if(St=t,ft=t=mi(t.current,null),Dt=xn=e,_t=0,$a=null,Wp=jc=ts=0,pn=fa=null,Wi!==null){for(e=0;e<Wi.length;e++)if(n=Wi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Wi=null}return t}function sE(t,e){do{var n=ft;try{if(Rp(),gu.current=Ju,Xu){for(var r=Xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Xu=!1}if(es=0,xt=yt=Xe=null,da=!1,Ma=0,Hp.current=null,n===null||n.return===null){_t=1,$a=e,ft=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=Dt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=Jy(o);if(_!==null){_.flags&=-257,Zy(_,o,l,s,e),_.mode&1&&Xy(s,c,e),e=_,u=c;var b=e.updateQueue;if(b===null){var k=new Set;k.add(u),e.updateQueue=k}else b.add(u);break e}else{if(!(e&1)){Xy(s,c,e),Qp();break e}u=Error($(426))}}else if(qe&&l.mode&1){var C=Jy(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Zy(C,o,l,s,e),kp(ro(u,l));break e}}s=u=ro(u,l),_t!==4&&(_t=2),fa===null?fa=[s]:fa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=Bw(s,u,e);Wy(s,E);break e;case 1:l=u;var v=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(fi===null||!fi.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=zw(s,l,e);Wy(s,D);break e}}s=s.return}while(s!==null)}lE(n)}catch(L){e=L,ft===n&&n!==null&&(ft=n=n.return);continue}break}while(!0)}function oE(){var t=Zu.current;return Zu.current=Ju,t===null?Ju:t}function Qp(){(_t===0||_t===3||_t===2)&&(_t=4),St===null||!(ts&268435455)&&!(jc&268435455)||ei(St,Dt)}function nc(t,e){var n=xe;xe|=2;var r=oE();(St!==t||Dt!==e)&&(Er=null,Qi(t,e));do try{$b();break}catch(i){sE(t,i)}while(!0);if(Rp(),xe=n,Zu.current=r,ft!==null)throw Error($(261));return St=null,Dt=0,_t}function $b(){for(;ft!==null;)aE(ft)}function Bb(){for(;ft!==null&&!fS();)aE(ft)}function aE(t){var e=cE(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?lE(t):ft=e,Hp.current=null}function lE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Lb(n,e),n!==null){n.flags&=32767,ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,ft=null;return}}else if(n=Db(n,e,xn),n!==null){ft=n;return}if(e=e.sibling,e!==null){ft=e;return}ft=e=t}while(e!==null);_t===0&&(_t=5)}function Ui(t,e,n){var r=Re,i=Un.transition;try{Un.transition=null,Re=1,zb(t,e,n,r)}finally{Un.transition=i,Re=r}return null}function zb(t,e,n,r){do Ws();while(oi!==null);if(xe&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(TS(t,s),t===St&&(ft=St=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zl||(Zl=!0,dE(Vu,function(){return Ws(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Un.transition,Un.transition=null;var o=Re;Re=1;var l=xe;xe|=4,Hp.current=null,Vb(t,n),nE(n,t),ub(Xh),Fu=!!Yh,Xh=Yh=null,t.current=n,Mb(n),pS(),xe=l,Re=o,Un.transition=s}else t.current=n;if(Zl&&(Zl=!1,oi=t,tc=i),s=t.pendingLanes,s===0&&(fi=null),yS(n.stateNode),_n(t,at()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ec)throw ec=!1,t=vf,vf=null,t;return tc&1&&t.tag!==0&&Ws(),s=t.pendingLanes,s&1?t===_f?pa++:(pa=0,_f=t):pa=0,Ri(),null}function Ws(){if(oi!==null){var t=B0(tc),e=Un.transition,n=Re;try{if(Un.transition=null,Re=16>t?16:t,oi===null)var r=!1;else{if(t=oi,oi=null,tc=0,xe&6)throw Error($(331));var i=xe;for(xe|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Q=c;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:ha(8,h,s)}var m=h.child;if(m!==null)m.return=h,Q=m;else for(;Q!==null;){h=Q;var g=h.sibling,_=h.return;if(Zw(h),h===c){Q=null;break}if(g!==null){g.return=_,Q=g;break}Q=_}}}var b=s.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var C=k.sibling;k.sibling=null,k=C}while(k!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ha(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,Q=E;break e}Q=s.return}}var v=t.current;for(Q=v;Q!==null;){o=Q;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Q=A;else e:for(o=v;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Lc(9,l)}}catch(L){nt(l,l.return,L)}if(l===o){Q=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,Q=D;break e}Q=l.return}}if(xe=i,Ri(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(Ac,t)}catch{}r=!0}return r}finally{Re=n,Un.transition=e}}return!1}function hv(t,e,n){e=ro(n,e),e=Bw(t,e,1),t=hi(t,e,1),e=sn(),t!==null&&(el(t,1,e),_n(t,e))}function nt(t,e,n){if(t.tag===3)hv(t,t,n);else for(;e!==null;){if(e.tag===3){hv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fi===null||!fi.has(r))){t=ro(n,t),t=zw(e,t,1),e=hi(e,t,1),t=sn(),e!==null&&(el(e,1,t),_n(e,t));break}}e=e.return}}function Hb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=sn(),t.pingedLanes|=t.suspendedLanes&n,St===t&&(Dt&n)===n&&(_t===4||_t===3&&(Dt&130023424)===Dt&&500>at()-qp?Qi(t,0):Wp|=n),_n(t,e)}function uE(t,e){e===0&&(t.mode&1?(e=zl,zl<<=1,!(zl&130023424)&&(zl=4194304)):e=1);var n=sn();t=Or(t,e),t!==null&&(el(t,e,n),_n(t,n))}function Wb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uE(t,n)}function qb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),uE(t,n)}var cE;cE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yn.current)gn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gn=!1,Ob(t,e,n);gn=!!(t.flags&131072)}else gn=!1,qe&&e.flags&1048576&&pw(e,qu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vu(t,e),t=e.pendingProps;var i=Zs(e,Jt.current);Hs(e,n),i=Fp(null,e,r,t,i,n);var s=Up();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vn(r)?(s=!0,Hu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Dp(e),i.updater=Dc,e.stateNode=i,i._reactInternals=e,af(e,r,t,n),e=cf(null,e,r,!0,s,n)):(e.tag=0,qe&&s&&Ap(e),rn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Kb(r),t=qn(r,t),i){case 0:e=uf(null,e,r,t,n);break e;case 1:e=nv(null,e,r,t,n);break e;case 11:e=ev(null,e,r,t,n);break e;case 14:e=tv(null,e,r,qn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),uf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),nv(t,e,r,i,n);case 3:e:{if(Gw(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ww(t,e),Qu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ro(Error($(423)),e),e=rv(t,e,r,n,i);break e}else if(r!==i){i=ro(Error($(424)),e),e=rv(t,e,r,n,i);break e}else for(bn=di(e.stateNode.containerInfo.firstChild),Cn=e,qe=!0,Kn=null,n=vw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(eo(),r===i){e=Dr(t,e,n);break e}rn(t,e,r,n)}e=e.child}return e;case 5:return Ew(e),t===null&&rf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Jh(r,i)?o=null:s!==null&&Jh(r,s)&&(e.flags|=32),qw(t,e),rn(t,e,o,n),e.child;case 6:return t===null&&rf(e),null;case 13:return Kw(t,e,n);case 4:return Lp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=to(e,null,r,n):rn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),ev(t,e,r,i,n);case 7:return rn(t,e,e.pendingProps,n),e.child;case 8:return rn(t,e,e.pendingProps.children,n),e.child;case 12:return rn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,je(Gu,r._currentValue),r._currentValue=o,s!==null)if(Xn(s.value,o)){if(s.children===i.children&&!yn.current){e=Dr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=kr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),sf(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),sf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}rn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Hs(e,n),i=Bn(i),r=r(i),e.flags|=1,rn(t,e,r,n),e.child;case 14:return r=e.type,i=qn(r,e.pendingProps),i=qn(r.type,i),tv(t,e,r,i,n);case 15:return Hw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),vu(t,e),e.tag=1,vn(r)?(t=!0,Hu(e)):t=!1,Hs(e,n),$w(e,r,i),af(e,r,i,n),cf(null,e,r,!0,t,n);case 19:return Qw(t,e,n);case 22:return Ww(t,e,n)}throw Error($(156,e.tag))};function dE(t,e){return M0(t,e)}function Gb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,n,r){return new Gb(t,e,n,r)}function Yp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kb(t){if(typeof t=="function")return Yp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mp)return 11;if(t===gp)return 14}return 2}function mi(t,e){var n=t.alternate;return n===null?(n=Fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Eu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Yp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cs:return Yi(n.children,i,s,e);case pp:o=8,i|=8;break;case Ph:return t=Fn(12,n,e,i|2),t.elementType=Ph,t.lanes=s,t;case Rh:return t=Fn(13,n,e,i),t.elementType=Rh,t.lanes=s,t;case Nh:return t=Fn(19,n,e,i),t.elementType=Nh,t.lanes=s,t;case E0:return Vc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _0:o=10;break e;case w0:o=9;break e;case mp:o=11;break e;case gp:o=14;break e;case Yr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Fn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Yi(t,e,n,r){return t=Fn(7,t,r,e),t.lanes=n,t}function Vc(t,e,n,r){return t=Fn(22,t,r,e),t.elementType=E0,t.lanes=n,t.stateNode={isHidden:!1},t}function th(t,e,n){return t=Fn(6,t,null,e),t.lanes=n,t}function nh(t,e,n){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Qb(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jd(0),this.expirationTimes=jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xp(t,e,n,r,i,s,o,l,u){return t=new Qb(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dp(s),t}function Yb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:As,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hE(t){if(!t)return xi;t=t._reactInternals;e:{if(ds(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(vn(n))return hw(t,n,e)}return e}function fE(t,e,n,r,i,s,o,l,u){return t=Xp(n,r,!0,t,i,s,o,l,u),t.context=hE(null),n=t.current,r=sn(),i=pi(n),s=kr(r,i),s.callback=e??null,hi(n,s,i),t.current.lanes=i,el(t,i,r),_n(t,r),t}function Mc(t,e,n,r){var i=e.current,s=sn(),o=pi(i);return n=hE(n),e.context===null?e.context=n:e.pendingContext=n,e=kr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hi(i,e,o),t!==null&&(Yn(t,i,o,s),mu(t,i,o)),o}function rc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jp(t,e){fv(t,e),(t=t.alternate)&&fv(t,e)}function Xb(){return null}var pE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zp(t){this._internalRoot=t}Fc.prototype.render=Zp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Mc(t,e,null,null)};Fc.prototype.unmount=Zp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ns(function(){Mc(null,t,null,null)}),e[Nr]=null}};function Fc(t){this._internalRoot=t}Fc.prototype.unstable_scheduleHydration=function(t){if(t){var e=W0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zr.length&&e!==0&&e<Zr[n].priority;n++);Zr.splice(n,0,t),n===0&&G0(t)}};function em(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pv(){}function Jb(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=rc(o);s.call(c)}}var o=fE(e,r,t,0,null,!1,!1,"",pv);return t._reactRootContainer=o,t[Nr]=o.current,Oa(t.nodeType===8?t.parentNode:t),ns(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=rc(u);l.call(c)}}var u=Xp(t,0,!1,null,null,!1,!1,"",pv);return t._reactRootContainer=u,t[Nr]=u.current,Oa(t.nodeType===8?t.parentNode:t),ns(function(){Mc(e,u,n,r)}),u}function $c(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=rc(o);l.call(u)}}Mc(e,o,t,i)}else o=Jb(n,e,t,i,r);return rc(o)}z0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zo(e.pendingLanes);n!==0&&(_p(e,n|1),_n(e,at()),!(xe&6)&&(io=at()+500,Ri()))}break;case 13:ns(function(){var r=Or(t,1);if(r!==null){var i=sn();Yn(r,t,1,i)}}),Jp(t,1)}};wp=function(t){if(t.tag===13){var e=Or(t,134217728);if(e!==null){var n=sn();Yn(e,t,134217728,n)}Jp(t,134217728)}};H0=function(t){if(t.tag===13){var e=pi(t),n=Or(t,e);if(n!==null){var r=sn();Yn(n,t,e,r)}Jp(t,e)}};W0=function(){return Re};q0=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};Bh=function(t,e,n){switch(e){case"input":if(Lh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Rc(r);if(!i)throw Error($(90));T0(r),Lh(r,i)}}}break;case"textarea":S0(t,n);break;case"select":e=n.value,e!=null&&Us(t,!!n.multiple,e,!1)}};N0=Gp;O0=ns;var Zb={usingClientEntryPoint:!1,Events:[nl,Ns,Rc,P0,R0,Gp]},Go={findFiberByHostInstance:Hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eA={bundleType:Go.bundleType,version:Go.version,rendererPackageName:Go.rendererPackageName,rendererConfig:Go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=j0(t),t===null?null:t.stateNode},findFiberByHostInstance:Go.findFiberByHostInstance||Xb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{Ac=eu.inject(eA),sr=eu}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zb;Rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!em(e))throw Error($(200));return Yb(t,e,null,n)};Rn.createRoot=function(t,e){if(!em(t))throw Error($(299));var n=!1,r="",i=pE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xp(t,1,!1,null,null,n,!1,r,i),t[Nr]=e.current,Oa(t.nodeType===8?t.parentNode:t),new Zp(e)};Rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=j0(e),t=t===null?null:t.stateNode,t};Rn.flushSync=function(t){return ns(t)};Rn.hydrate=function(t,e,n){if(!Uc(e))throw Error($(200));return $c(null,t,e,!0,n)};Rn.hydrateRoot=function(t,e,n){if(!em(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=pE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fE(e,null,t,1,n??null,i,!1,s,o),t[Nr]=e.current,Oa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Fc(e)};Rn.render=function(t,e,n){if(!Uc(e))throw Error($(200));return $c(null,t,e,!1,n)};Rn.unmountComponentAtNode=function(t){if(!Uc(t))throw Error($(40));return t._reactRootContainer?(ns(function(){$c(null,null,t,!1,function(){t._reactRootContainer=null,t[Nr]=null})}),!0):!1};Rn.unstable_batchedUpdates=Gp;Rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Uc(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return $c(t,e,n,!1,r)};Rn.version="18.3.1-next-f1338f8080-20240426";function mE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mE)}catch(t){console.error(t)}}mE(),m0.exports=Rn;var tA=m0.exports,mv=tA;Ch.createRoot=mv.createRoot,Ch.hydrateRoot=mv.hydrateRoot;var gv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},nA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},yE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,m=(s&3)<<4|l>>4;let g=(l&15)<<2|c>>6,_=c&63;u||(_=64,o||(g=64)),r.push(n[h],n[m],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||m==null)throw new rA;const g=s<<2|l>>4;if(r.push(g),c!==64){const _=l<<4&240|c>>2;if(r.push(_),m!==64){const b=c<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iA=function(t){const e=gE(t);return yE.encodeByteArray(e,!0)},ic=function(t){return iA(t).replace(/\./g,"")},vE=function(t){try{return yE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=()=>sA().__FIREBASE_DEFAULTS__,aA=()=>{if(typeof process>"u"||typeof gv>"u")return;const t=gv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vE(t[1]);return e&&JSON.parse(e)},Bc=()=>{try{return oA()||aA()||lA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_E=t=>{var e,n;return(n=(e=Bc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},uA=t=>{const e=_E(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wE=()=>{var t;return(t=Bc())===null||t===void 0?void 0:t.config},EE=t=>{var e;return(e=Bc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ic(JSON.stringify(n)),ic(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function fA(){var t;const e=(t=Bc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yA(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vA(){return!fA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _A(){try{return typeof indexedDB=="object"}catch{return!1}}function wA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="FirebaseError";class Br extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EA,Object.setPrototypeOf(this,Br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,il.prototype.create)}}class il{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?IA(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Br(i,l,r)}}function IA(t,e){return t.replace(TA,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const TA=/\{\$([^}]+)}/g;function xA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(yv(s)&&yv(o)){if(!sc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function yv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function SA(t,e){const n=new bA(t,e);return n.subscribe.bind(n)}class bA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");AA(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=rh),i.error===void 0&&(i.error=rh),i.complete===void 0&&(i.complete=rh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t){return t&&t._delegate?t._delegate:t}class rs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PA(e))try{this.getOrInitializeService({instanceIdentifier:$i})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=$i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$i){return this.instances.has(e)}getOptions(e=$i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$i){return this.component?this.component.multipleInstances?e:$i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kA(t){return t===$i?void 0:t}function PA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const NA={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},OA=ye.INFO,DA={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},LA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=DA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tm{constructor(e){this.name=e,this._logLevel=OA,this._logHandler=LA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const jA=(t,e)=>e.some(n=>t instanceof n);let vv,_v;function VA(){return vv||(vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MA(){return _v||(_v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IE=new WeakMap,If=new WeakMap,TE=new WeakMap,ih=new WeakMap,nm=new WeakMap;function FA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(gi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&IE.set(n,t)}).catch(()=>{}),nm.set(e,t),e}function UA(t){if(If.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});If.set(t,e)}let Tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return If.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $A(t){Tf=t(Tf)}function BA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sh(this),e,...n);return TE.set(r,e.sort?e.sort():[e]),gi(r)}:MA().includes(t)?function(...e){return t.apply(sh(this),e),gi(IE.get(this))}:function(...e){return gi(t.apply(sh(this),e))}}function zA(t){return typeof t=="function"?BA(t):(t instanceof IDBTransaction&&UA(t),jA(t,VA())?new Proxy(t,Tf):t)}function gi(t){if(t instanceof IDBRequest)return FA(t);if(ih.has(t))return ih.get(t);const e=zA(t);return e!==t&&(ih.set(t,e),nm.set(e,t)),e}const sh=t=>nm.get(t);function HA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=gi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(gi(o.result),u.oldVersion,u.newVersion,gi(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const WA=["get","getKey","getAll","getAllKeys","count"],qA=["put","add","delete","clear"],oh=new Map;function wv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oh.get(e))return oh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=qA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WA.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return oh.set(e,s),s}$A(t=>({...t,get:(e,n,r)=>wv(e,n)||t.get(e,n,r),has:(e,n)=>!!wv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xf="@firebase/app",Ev="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new tm("@firebase/app"),QA="@firebase/app-compat",YA="@firebase/analytics-compat",XA="@firebase/analytics",JA="@firebase/app-check-compat",ZA="@firebase/app-check",eC="@firebase/auth",tC="@firebase/auth-compat",nC="@firebase/database",rC="@firebase/data-connect",iC="@firebase/database-compat",sC="@firebase/functions",oC="@firebase/functions-compat",aC="@firebase/installations",lC="@firebase/installations-compat",uC="@firebase/messaging",cC="@firebase/messaging-compat",dC="@firebase/performance",hC="@firebase/performance-compat",fC="@firebase/remote-config",pC="@firebase/remote-config-compat",mC="@firebase/storage",gC="@firebase/storage-compat",yC="@firebase/firestore",vC="@firebase/vertexai-preview",_C="@firebase/firestore-compat",wC="firebase",EC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="[DEFAULT]",IC={[xf]:"fire-core",[QA]:"fire-core-compat",[XA]:"fire-analytics",[YA]:"fire-analytics-compat",[ZA]:"fire-app-check",[JA]:"fire-app-check-compat",[eC]:"fire-auth",[tC]:"fire-auth-compat",[nC]:"fire-rtdb",[rC]:"fire-data-connect",[iC]:"fire-rtdb-compat",[sC]:"fire-fn",[oC]:"fire-fn-compat",[aC]:"fire-iid",[lC]:"fire-iid-compat",[uC]:"fire-fcm",[cC]:"fire-fcm-compat",[dC]:"fire-perf",[hC]:"fire-perf-compat",[fC]:"fire-rc",[pC]:"fire-rc-compat",[mC]:"fire-gcs",[gC]:"fire-gcs-compat",[yC]:"fire-fst",[_C]:"fire-fst-compat",[vC]:"fire-vertex","fire-js":"fire-js",[wC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new Map,TC=new Map,bf=new Map;function Iv(t,e){try{t.container.addComponent(e)}catch(n){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function so(t){const e=t.name;if(bf.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;bf.set(e,t);for(const n of oc.values())Iv(n,t);for(const n of TC.values())Iv(n,t);return!0}function rm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Sr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new il("app","Firebase",xC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=EC;function xE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw yi.create("bad-app-name",{appName:String(i)});if(n||(n=wE()),!n)throw yi.create("no-options");const s=oc.get(i);if(s){if(sc(n,s.options)&&sc(r,s.config))return s;throw yi.create("duplicate-app",{appName:i})}const o=new RA(i);for(const u of bf.values())o.addComponent(u);const l=new SC(n,r,o);return oc.set(i,l),l}function SE(t=Sf){const e=oc.get(t);if(!e&&t===Sf&&wE())return xE();if(!e)throw yi.create("no-app",{appName:t});return e}function vi(t,e,n){var r;let i=(r=IC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(l.join(" "));return}so(new rs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="firebase-heartbeat-database",AC=1,Ba="firebase-heartbeat-store";let ah=null;function bE(){return ah||(ah=HA(bC,AC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw yi.create("idb-open",{originalErrorMessage:t.message})})),ah}async function CC(t){try{const n=(await bE()).transaction(Ba),r=await n.objectStore(Ba).get(AE(t));return await n.done,r}catch(e){if(e instanceof Br)Lr.warn(e.message);else{const n=yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(n.message)}}}async function Tv(t,e){try{const r=(await bE()).transaction(Ba,"readwrite");await r.objectStore(Ba).put(e,AE(t)),await r.done}catch(n){if(n instanceof Br)Lr.warn(n.message);else{const r=yi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lr.warn(r.message)}}}function AE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=1024,PC=30*24*60*60*1e3;class RC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=PC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xv(),{heartbeatsToSend:r,unsentEntries:i}=NC(this._heartbeatsCache.heartbeats),s=ic(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Lr.warn(n),""}}}function xv(){return new Date().toISOString().substring(0,10)}function NC(t,e=kC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Sv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Sv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class OC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _A()?wA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Sv(t){return ic(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(t){so(new rs("platform-logger",e=>new GA(e),"PRIVATE")),so(new rs("heartbeat",e=>new RC(e),"PRIVATE")),vi(xf,Ev,t),vi(xf,Ev,"esm2017"),vi("fire-js","")}DC("");var LC="firebase",jC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi(LC,jC,"app");var bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xi,CE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,w){function T(){}T.prototype=w.prototype,I.D=w.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(x,P,N){for(var S=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)S[bt-2]=arguments[bt];return w.prototype[P].apply(x,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,w,T){T||(T=0);var x=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)x[P]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(P=0;16>P;++P)x[P]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=I.g[0],T=I.g[1],P=I.g[2];var N=I.g[3],S=w+(N^T&(P^N))+x[0]+3614090360&4294967295;w=T+(S<<7&4294967295|S>>>25),S=N+(P^w&(T^P))+x[1]+3905402710&4294967295,N=w+(S<<12&4294967295|S>>>20),S=P+(T^N&(w^T))+x[2]+606105819&4294967295,P=N+(S<<17&4294967295|S>>>15),S=T+(w^P&(N^w))+x[3]+3250441966&4294967295,T=P+(S<<22&4294967295|S>>>10),S=w+(N^T&(P^N))+x[4]+4118548399&4294967295,w=T+(S<<7&4294967295|S>>>25),S=N+(P^w&(T^P))+x[5]+1200080426&4294967295,N=w+(S<<12&4294967295|S>>>20),S=P+(T^N&(w^T))+x[6]+2821735955&4294967295,P=N+(S<<17&4294967295|S>>>15),S=T+(w^P&(N^w))+x[7]+4249261313&4294967295,T=P+(S<<22&4294967295|S>>>10),S=w+(N^T&(P^N))+x[8]+1770035416&4294967295,w=T+(S<<7&4294967295|S>>>25),S=N+(P^w&(T^P))+x[9]+2336552879&4294967295,N=w+(S<<12&4294967295|S>>>20),S=P+(T^N&(w^T))+x[10]+4294925233&4294967295,P=N+(S<<17&4294967295|S>>>15),S=T+(w^P&(N^w))+x[11]+2304563134&4294967295,T=P+(S<<22&4294967295|S>>>10),S=w+(N^T&(P^N))+x[12]+1804603682&4294967295,w=T+(S<<7&4294967295|S>>>25),S=N+(P^w&(T^P))+x[13]+4254626195&4294967295,N=w+(S<<12&4294967295|S>>>20),S=P+(T^N&(w^T))+x[14]+2792965006&4294967295,P=N+(S<<17&4294967295|S>>>15),S=T+(w^P&(N^w))+x[15]+1236535329&4294967295,T=P+(S<<22&4294967295|S>>>10),S=w+(P^N&(T^P))+x[1]+4129170786&4294967295,w=T+(S<<5&4294967295|S>>>27),S=N+(T^P&(w^T))+x[6]+3225465664&4294967295,N=w+(S<<9&4294967295|S>>>23),S=P+(w^T&(N^w))+x[11]+643717713&4294967295,P=N+(S<<14&4294967295|S>>>18),S=T+(N^w&(P^N))+x[0]+3921069994&4294967295,T=P+(S<<20&4294967295|S>>>12),S=w+(P^N&(T^P))+x[5]+3593408605&4294967295,w=T+(S<<5&4294967295|S>>>27),S=N+(T^P&(w^T))+x[10]+38016083&4294967295,N=w+(S<<9&4294967295|S>>>23),S=P+(w^T&(N^w))+x[15]+3634488961&4294967295,P=N+(S<<14&4294967295|S>>>18),S=T+(N^w&(P^N))+x[4]+3889429448&4294967295,T=P+(S<<20&4294967295|S>>>12),S=w+(P^N&(T^P))+x[9]+568446438&4294967295,w=T+(S<<5&4294967295|S>>>27),S=N+(T^P&(w^T))+x[14]+3275163606&4294967295,N=w+(S<<9&4294967295|S>>>23),S=P+(w^T&(N^w))+x[3]+4107603335&4294967295,P=N+(S<<14&4294967295|S>>>18),S=T+(N^w&(P^N))+x[8]+1163531501&4294967295,T=P+(S<<20&4294967295|S>>>12),S=w+(P^N&(T^P))+x[13]+2850285829&4294967295,w=T+(S<<5&4294967295|S>>>27),S=N+(T^P&(w^T))+x[2]+4243563512&4294967295,N=w+(S<<9&4294967295|S>>>23),S=P+(w^T&(N^w))+x[7]+1735328473&4294967295,P=N+(S<<14&4294967295|S>>>18),S=T+(N^w&(P^N))+x[12]+2368359562&4294967295,T=P+(S<<20&4294967295|S>>>12),S=w+(T^P^N)+x[5]+4294588738&4294967295,w=T+(S<<4&4294967295|S>>>28),S=N+(w^T^P)+x[8]+2272392833&4294967295,N=w+(S<<11&4294967295|S>>>21),S=P+(N^w^T)+x[11]+1839030562&4294967295,P=N+(S<<16&4294967295|S>>>16),S=T+(P^N^w)+x[14]+4259657740&4294967295,T=P+(S<<23&4294967295|S>>>9),S=w+(T^P^N)+x[1]+2763975236&4294967295,w=T+(S<<4&4294967295|S>>>28),S=N+(w^T^P)+x[4]+1272893353&4294967295,N=w+(S<<11&4294967295|S>>>21),S=P+(N^w^T)+x[7]+4139469664&4294967295,P=N+(S<<16&4294967295|S>>>16),S=T+(P^N^w)+x[10]+3200236656&4294967295,T=P+(S<<23&4294967295|S>>>9),S=w+(T^P^N)+x[13]+681279174&4294967295,w=T+(S<<4&4294967295|S>>>28),S=N+(w^T^P)+x[0]+3936430074&4294967295,N=w+(S<<11&4294967295|S>>>21),S=P+(N^w^T)+x[3]+3572445317&4294967295,P=N+(S<<16&4294967295|S>>>16),S=T+(P^N^w)+x[6]+76029189&4294967295,T=P+(S<<23&4294967295|S>>>9),S=w+(T^P^N)+x[9]+3654602809&4294967295,w=T+(S<<4&4294967295|S>>>28),S=N+(w^T^P)+x[12]+3873151461&4294967295,N=w+(S<<11&4294967295|S>>>21),S=P+(N^w^T)+x[15]+530742520&4294967295,P=N+(S<<16&4294967295|S>>>16),S=T+(P^N^w)+x[2]+3299628645&4294967295,T=P+(S<<23&4294967295|S>>>9),S=w+(P^(T|~N))+x[0]+4096336452&4294967295,w=T+(S<<6&4294967295|S>>>26),S=N+(T^(w|~P))+x[7]+1126891415&4294967295,N=w+(S<<10&4294967295|S>>>22),S=P+(w^(N|~T))+x[14]+2878612391&4294967295,P=N+(S<<15&4294967295|S>>>17),S=T+(N^(P|~w))+x[5]+4237533241&4294967295,T=P+(S<<21&4294967295|S>>>11),S=w+(P^(T|~N))+x[12]+1700485571&4294967295,w=T+(S<<6&4294967295|S>>>26),S=N+(T^(w|~P))+x[3]+2399980690&4294967295,N=w+(S<<10&4294967295|S>>>22),S=P+(w^(N|~T))+x[10]+4293915773&4294967295,P=N+(S<<15&4294967295|S>>>17),S=T+(N^(P|~w))+x[1]+2240044497&4294967295,T=P+(S<<21&4294967295|S>>>11),S=w+(P^(T|~N))+x[8]+1873313359&4294967295,w=T+(S<<6&4294967295|S>>>26),S=N+(T^(w|~P))+x[15]+4264355552&4294967295,N=w+(S<<10&4294967295|S>>>22),S=P+(w^(N|~T))+x[6]+2734768916&4294967295,P=N+(S<<15&4294967295|S>>>17),S=T+(N^(P|~w))+x[13]+1309151649&4294967295,T=P+(S<<21&4294967295|S>>>11),S=w+(P^(T|~N))+x[4]+4149444226&4294967295,w=T+(S<<6&4294967295|S>>>26),S=N+(T^(w|~P))+x[11]+3174756917&4294967295,N=w+(S<<10&4294967295|S>>>22),S=P+(w^(N|~T))+x[2]+718787259&4294967295,P=N+(S<<15&4294967295|S>>>17),S=T+(N^(P|~w))+x[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(P+(S<<21&4294967295|S>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+N&4294967295}r.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var T=w-this.blockSize,x=this.B,P=this.h,N=0;N<w;){if(P==0)for(;N<=T;)i(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<w;)if(x[P++]=I.charCodeAt(N++),P==this.blockSize){i(this,x),P=0;break}}else for(;N<w;)if(x[P++]=I[N++],P==this.blockSize){i(this,x),P=0;break}}this.h=P,this.o+=w},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var T=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=T&255,T/=256;for(this.u(I),I=Array(16),w=T=0;4>w;++w)for(var x=0;32>x;x+=8)I[T++]=this.g[w]>>>x&255;return I};function s(I,w){var T=l;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=w(I)}function o(I,w){this.h=w;for(var T=[],x=!0,P=I.length-1;0<=P;P--){var N=I[P]|0;x&&N==w||(T[P]=N,x=!1)}this.g=T}var l={};function u(I){return-128<=I&&128>I?s(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return C(c(-I));for(var w=[],T=1,x=0;I>=T;x++)w[x]=I/T|0,T*=4294967296;return new o(w,0)}function h(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return C(h(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(w,8)),x=m,P=0;P<I.length;P+=8){var N=Math.min(8,I.length-P),S=parseInt(I.substring(P,P+N),w);8>N?(N=c(Math.pow(w,N)),x=x.j(N).add(c(S))):(x=x.j(T),x=x.add(c(S)))}return x}var m=u(0),g=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-C(this).m();for(var I=0,w=1,T=0;T<this.g.length;T++){var x=this.i(T);I+=(0<=x?x:4294967296+x)*w,w*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(k(this))return"-"+C(this).toString(I);for(var w=c(Math.pow(I,6)),T=this,x="";;){var P=D(T,w).g;T=E(T,P.j(w));var N=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=P,b(T))return N+x;for(;6>N.length;)N="0"+N;x=N+x}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=E(this,I),k(I)?-1:b(I)?0:1};function C(I){for(var w=I.g.length,T=[],x=0;x<w;x++)T[x]=~I.g[x];return new o(T,~I.h).add(g)}t.abs=function(){return k(this)?C(this):this},t.add=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],x=0,P=0;P<=w;P++){var N=x+(this.i(P)&65535)+(I.i(P)&65535),S=(N>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);x=S>>>16,N&=65535,S&=65535,T[P]=S<<16|N}return new o(T,T[T.length-1]&-2147483648?-1:0)};function E(I,w){return I.add(C(w))}t.j=function(I){if(b(this)||b(I))return m;if(k(this))return k(I)?C(this).j(C(I)):C(C(this).j(I));if(k(I))return C(this.j(C(I)));if(0>this.l(_)&&0>I.l(_))return c(this.m()*I.m());for(var w=this.g.length+I.g.length,T=[],x=0;x<2*w;x++)T[x]=0;for(x=0;x<this.g.length;x++)for(var P=0;P<I.g.length;P++){var N=this.i(x)>>>16,S=this.i(x)&65535,bt=I.i(P)>>>16,cn=I.i(P)&65535;T[2*x+2*P]+=S*cn,v(T,2*x+2*P),T[2*x+2*P+1]+=N*cn,v(T,2*x+2*P+1),T[2*x+2*P+1]+=S*bt,v(T,2*x+2*P+1),T[2*x+2*P+2]+=N*bt,v(T,2*x+2*P+2)}for(x=0;x<w;x++)T[x]=T[2*x+1]<<16|T[2*x];for(x=w;x<2*w;x++)T[x]=0;return new o(T,0)};function v(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function A(I,w){this.g=I,this.h=w}function D(I,w){if(b(w))throw Error("division by zero");if(b(I))return new A(m,m);if(k(I))return w=D(C(I),w),new A(C(w.g),C(w.h));if(k(w))return w=D(I,C(w)),new A(C(w.g),w.h);if(30<I.g.length){if(k(I)||k(w))throw Error("slowDivide_ only works with positive integers.");for(var T=g,x=w;0>=x.l(I);)T=L(T),x=L(x);var P=V(T,1),N=V(x,1);for(x=V(x,2),T=V(T,2);!b(x);){var S=N.add(x);0>=S.l(I)&&(P=P.add(T),N=S),x=V(x,1),T=V(T,1)}return w=E(I,P.j(w)),new A(P,w)}for(P=m;0<=I.l(w);){for(T=Math.max(1,Math.floor(I.m()/w.m())),x=Math.ceil(Math.log(T)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),N=c(T),S=N.j(w);k(S)||0<S.l(I);)T-=x,N=c(T),S=N.j(w);b(N)&&(N=g),P=P.add(N),I=E(I,S)}return new A(P,I)}t.A=function(I){return D(this,I).h},t.and=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],x=0;x<w;x++)T[x]=this.i(x)&I.i(x);return new o(T,this.h&I.h)},t.or=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],x=0;x<w;x++)T[x]=this.i(x)|I.i(x);return new o(T,this.h|I.h)},t.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],x=0;x<w;x++)T[x]=this.i(x)^I.i(x);return new o(T,this.h^I.h)};function L(I){for(var w=I.g.length+1,T=[],x=0;x<w;x++)T[x]=I.i(x)<<1|I.i(x-1)>>>31;return new o(T,I.h)}function V(I,w){var T=w>>5;w%=32;for(var x=I.g.length-T,P=[],N=0;N<x;N++)P[N]=0<w?I.i(N+T)>>>w|I.i(N+T+1)<<32-w:I.i(N+T);return new o(P,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Xi=o}).apply(typeof bv<"u"?bv:typeof self<"u"?self:typeof window<"u"?window:{});var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kE,ta,PE,Iu,Af,RE,NE,OE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,p){return a==Array.prototype||a==Object.prototype||(a[d]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof tu=="object"&&tu];for(var d=0;d<a.length;++d){var p=a[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var p=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var O=a[y];if(!(O in p))break e;p=p[O]}a=a[a.length-1],y=p[a],d=d(y),d!=y&&d!=null&&e(p,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var p=0,y=!1,O={next:function(){if(!y&&p<a.length){var j=p++;return{value:d(j,a[j]),done:!1}}return y=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,p){return a.call.apply(a.bind,arguments)}function m(a,d,p){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,y),a.apply(d,O)}}return function(){return a.apply(d,arguments)}}function g(a,d,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,g.apply(null,arguments)}function _(a,d){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function b(a,d){function p(){}p.prototype=d.prototype,a.aa=d.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(y,O,j){for(var q=Array(arguments.length-2),De=2;De<arguments.length;De++)q[De-2]=arguments[De];return d.prototype[O].apply(y,q)}}function k(a){const d=a.length;if(0<d){const p=Array(d);for(let y=0;y<d;y++)p[y]=a[y];return p}return[]}function C(a,d){for(let p=1;p<arguments.length;p++){const y=arguments[p];if(u(y)){const O=a.length||0,j=y.length||0;a.length=O+j;for(let q=0;q<j;q++)a[O+q]=y[q]}else a.push(y)}}class E{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function v(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var L=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function V(a,d,p){for(const y in a)d.call(p,a[y],y,a)}function I(a,d){for(const p in a)d.call(void 0,a[p],p,a)}function w(a){const d={};for(const p in a)d[p]=a[p];return d}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,d){let p,y;for(let O=1;O<arguments.length;O++){y=arguments[O];for(p in y)a[p]=y[p];for(let j=0;j<T.length;j++)p=T[j],Object.prototype.hasOwnProperty.call(y,p)&&(a[p]=y[p])}}function P(a){var d=1;a=a.split(":");const p=[];for(;0<d&&a.length;)p.push(a.shift()),d--;return a.length&&p.push(a.join(":")),p}function N(a){l.setTimeout(()=>{throw a},0)}function S(){var a=ne;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class bt{constructor(){this.h=this.g=null}add(d,p){const y=cn.get();y.set(d,p),this.h?this.h.next=y:this.g=y,this.h=y}}var cn=new E(()=>new Dn,a=>a.reset());class Dn{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,W=!1,ne=new bt,se=()=>{const a=l.Promise.resolve(void 0);_e=()=>{a.then(ke)}};var ke=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(p){N(p)}var d=cn;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}W=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var en=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,d),l.removeEventListener("test",p,d)}catch{}return a}();function Mt(a,d){if(de.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{D(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else p=="mouseover"?d=a.fromElement:p=="mouseout"&&(d=a.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:dn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Mt.aa.h.call(this)}}b(Mt,de);var dn={2:"touch",3:"pen",4:"mouse"};Mt.prototype.h=function(){Mt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var En="closure_listenable_"+(1e6*Math.random()|0),Oi=0;function ps(a,d,p,y,O){this.listener=a,this.proxy=null,this.src=d,this.type=p,this.capture=!!y,this.ha=O,this.key=++Oi,this.da=this.fa=!1}function gr(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function yr(a){this.src=a,this.g={},this.h=0}yr.prototype.add=function(a,d,p,y,O){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var q=Y(a,d,y,O);return-1<q?(d=a[q],p||(d.fa=!1)):(d=new ps(d,this.src,j,!!y,O),d.fa=p,a.push(d)),d};function B(a,d){var p=d.type;if(p in a.g){var y=a.g[p],O=Array.prototype.indexOf.call(y,d,void 0),j;(j=0<=O)&&Array.prototype.splice.call(y,O,1),j&&(gr(d),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Y(a,d,p,y){for(var O=0;O<a.length;++O){var j=a[O];if(!j.da&&j.listener==d&&j.capture==!!p&&j.ha==y)return O}return-1}var re="closure_lm_"+(1e6*Math.random()|0),Z={};function Ve(a,d,p,y,O){if(Array.isArray(d)){for(var j=0;j<d.length;j++)Ve(a,d[j],p,y,O);return null}return p=we(p),a&&a[En]?a.K(d,p,c(y)?!!y.capture:!1,O):gt(a,d,p,!1,y,O)}function gt(a,d,p,y,O,j){if(!d)throw Error("Invalid event type");var q=c(O)?!!O.capture:!!O,De=Ke(a);if(De||(a[re]=De=new yr(a)),p=De.add(d,p,y,q,j),p.proxy)return p;if(y=it(),p.proxy=y,y.src=a,y.listener=p,a.addEventListener)en||(O=q),O===void 0&&(O=!1),a.addEventListener(d.toString(),y,O);else if(a.attachEvent)a.attachEvent(ie(d.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function it(){function a(p){return d.call(a.src,a.listener,p)}const d=ee;return a}function R(a,d,p,y,O){if(Array.isArray(d))for(var j=0;j<d.length;j++)R(a,d[j],p,y,O);else y=c(y)?!!y.capture:!!y,p=we(p),a&&a[En]?(a=a.i,d=String(d).toString(),d in a.g&&(j=a.g[d],p=Y(j,p,y,O),-1<p&&(gr(j[p]),Array.prototype.splice.call(j,p,1),j.length==0&&(delete a.g[d],a.h--)))):a&&(a=Ke(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Y(d,p,y,O)),(p=-1<a?d[a]:null)&&G(p))}function G(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[En])B(d.i,a);else{var p=a.type,y=a.proxy;d.removeEventListener?d.removeEventListener(p,y,a.capture):d.detachEvent?d.detachEvent(ie(p),y):d.addListener&&d.removeListener&&d.removeListener(y),(p=Ke(d))?(B(p,a),p.h==0&&(p.src=null,d[re]=null)):gr(a)}}}function ie(a){return a in Z?Z[a]:Z[a]="on"+a}function ee(a,d){if(a.da)a=!0;else{d=new Mt(d,this);var p=a.listener,y=a.ha||a.src;a.fa&&G(a),a=p.call(y,d)}return a}function Ke(a){return a=a[re],a instanceof yr?a:null}var st="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(a){return typeof a=="function"?a:(a[st]||(a[st]=function(d){return a.handleEvent(d)}),a[st])}function Te(){ge.call(this),this.i=new yr(this),this.M=this,this.F=null}b(Te,ge),Te.prototype[En]=!0,Te.prototype.removeEventListener=function(a,d,p,y){R(this,a,d,p,y)};function le(a,d){var p,y=a.F;if(y)for(p=[];y;y=y.F)p.push(y);if(a=a.M,y=d.type||d,typeof d=="string")d=new de(d,a);else if(d instanceof de)d.target=d.target||a;else{var O=d;d=new de(y,a),x(d,O)}if(O=!0,p)for(var j=p.length-1;0<=j;j--){var q=d.g=p[j];O=dt(q,y,!0,d)&&O}if(q=d.g=a,O=dt(q,y,!0,d)&&O,O=dt(q,y,!1,d)&&O,p)for(j=0;j<p.length;j++)q=d.g=p[j],O=dt(q,y,!1,d)&&O}Te.prototype.N=function(){if(Te.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var p=a.g[d],y=0;y<p.length;y++)gr(p[y]);delete a.g[d],a.h--}}this.F=null},Te.prototype.K=function(a,d,p,y){return this.i.add(String(a),d,!1,p,y)},Te.prototype.L=function(a,d,p,y){return this.i.add(String(a),d,!0,p,y)};function dt(a,d,p,y){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,j=0;j<d.length;++j){var q=d[j];if(q&&!q.da&&q.capture==p){var De=q.listener,At=q.ha||q.src;q.fa&&B(a.i,q),O=De.call(At,y)!==!1&&O}}return O&&!y.defaultPrevented}function Ft(a,d,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function vr(a){a.g=Ft(()=>{a.g=null,a.i&&(a.i=!1,vr(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class ms extends ge{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:vr(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(a){ge.call(this),this.h=a,this.g={}}b(er,ge);var Me=[];function Il(a){V(a.g,function(d,p){this.g.hasOwnProperty(p)&&G(d)},a),a.g={}}er.prototype.N=function(){er.aa.N.call(this),Il(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var md=l.JSON.stringify,rx=l.JSON.parse,ix=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function gd(){}gd.prototype.h=null;function gg(a){return a.h||(a.h=a.i())}function yg(){}var Co={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yd(){de.call(this,"d")}b(yd,de);function vd(){de.call(this,"c")}b(vd,de);var Di={},vg=null;function Tl(){return vg=vg||new Te}Di.La="serverreachability";function _g(a){de.call(this,Di.La,a)}b(_g,de);function ko(a){const d=Tl();le(d,new _g(d))}Di.STAT_EVENT="statevent";function wg(a,d){de.call(this,Di.STAT_EVENT,a),this.stat=d}b(wg,de);function tn(a){const d=Tl();le(d,new wg(d,a))}Di.Ma="timingevent";function Eg(a,d){de.call(this,Di.Ma,a),this.size=d}b(Eg,de);function Po(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Ro(){this.g=!0}Ro.prototype.xa=function(){this.g=!1};function sx(a,d,p,y,O,j){a.info(function(){if(a.g)if(j)for(var q="",De=j.split("&"),At=0;At<De.length;At++){var be=De[At].split("=");if(1<be.length){var Ut=be[0];be=be[1];var $t=Ut.split("_");q=2<=$t.length&&$t[1]=="type"?q+(Ut+"="+be+"&"):q+(Ut+"=redacted&")}}else q=null;else q=j;return"XMLHTTP REQ ("+y+") [attempt "+O+"]: "+d+`
`+p+`
`+q})}function ox(a,d,p,y,O,j,q){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+O+"]: "+d+`
`+p+`
`+j+" "+q})}function gs(a,d,p,y){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+lx(a,p)+(y?" "+y:"")})}function ax(a,d){a.info(function(){return"TIMEOUT: "+d})}Ro.prototype.info=function(){};function lx(a,d){if(!a.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var y=p[a];if(!(2>y.length)){var O=y[1];if(Array.isArray(O)&&!(1>O.length)){var j=O[0];if(j!="noop"&&j!="stop"&&j!="close")for(var q=1;q<O.length;q++)O[q]=""}}}}return md(p)}catch{return d}}var xl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ig={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_d;function Sl(){}b(Sl,gd),Sl.prototype.g=function(){return new XMLHttpRequest},Sl.prototype.i=function(){return{}},_d=new Sl;function Hr(a,d,p,y){this.j=a,this.i=d,this.l=p,this.R=y||1,this.U=new er(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tg}function Tg(){this.i=null,this.g="",this.h=!1}var xg={},wd={};function Ed(a,d,p){a.L=1,a.v=kl(_r(d)),a.m=p,a.P=!0,Sg(a,null)}function Sg(a,d){a.F=Date.now(),bl(a),a.A=_r(a.v);var p=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),Fg(p.i,"t",y),a.C=0,p=a.j.J,a.h=new Tg,a.g=ry(a.j,p?d:null,!a.m),0<a.O&&(a.M=new ms(g(a.Y,a,a.g),a.O)),d=a.U,p=a.g,y=a.ca;var O="readystatechange";Array.isArray(O)||(O&&(Me[0]=O.toString()),O=Me);for(var j=0;j<O.length;j++){var q=Ve(p,O[j],y||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=a.H?w(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),ko(),sx(a.i,a.u,a.A,a.l,a.R,a.m)}Hr.prototype.ca=function(a){a=a.target;const d=this.M;d&&wr(a)==3?d.j():this.Y(a)},Hr.prototype.Y=function(a){try{if(a==this.g)e:{const $t=wr(this.g);var d=this.g.Ba();const _s=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||qg(this.g)))){this.J||$t!=4||d==7||(d==8||0>=_s?ko(3):ko(2)),Id(this);var p=this.g.Z();this.X=p;t:if(bg(this)){var y=qg(this.g);a="";var O=y.length,j=wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),No(this);var q="";break t}this.h.i=new l.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,a+=this.h.i.decode(y[d],{stream:!(j&&d==O-1)});y.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,ox(this.i,this.u,this.A,this.l,this.R,$t,p),this.o){if(this.T&&!this.K){t:{if(this.g){var De,At=this.g;if((De=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(De)){var be=De;break t}}be=null}if(p=be)gs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Td(this,p);else{this.o=!1,this.s=3,tn(12),Li(this),No(this);break e}}if(this.P){p=!0;let Hn;for(;!this.J&&this.C<q.length;)if(Hn=ux(this,q),Hn==wd){$t==4&&(this.s=4,tn(14),p=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==xg){this.s=4,tn(15),gs(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else gs(this.i,this.l,Hn,null),Td(this,Hn);if(bg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||q.length!=0||this.h.h||(this.s=1,tn(16),p=!1),this.o=this.o&&p,!p)gs(this.i,this.l,q,"[Invalid Chunked Response]"),Li(this),No(this);else if(0<q.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),kd(Ut),Ut.M=!0,tn(11))}}else gs(this.i,this.l,q,null),Td(this,q);$t==4&&Li(this),this.o&&!this.J&&($t==4?Zg(this.j,this):(this.o=!1,bl(this)))}else bx(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,tn(12)):(this.s=0,tn(13)),Li(this),No(this)}}}catch{}finally{}};function bg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function ux(a,d){var p=a.C,y=d.indexOf(`
`,p);return y==-1?wd:(p=Number(d.substring(p,y)),isNaN(p)?xg:(y+=1,y+p>d.length?wd:(d=d.slice(y,y+p),a.C=y+p,d)))}Hr.prototype.cancel=function(){this.J=!0,Li(this)};function bl(a){a.S=Date.now()+a.I,Ag(a,a.I)}function Ag(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Po(g(a.ba,a),d)}function Id(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Hr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ax(this.i,this.A),this.L!=2&&(ko(),tn(17)),Li(this),this.s=2,No(this)):Ag(this,this.S-a)};function No(a){a.j.G==0||a.J||Zg(a.j,a)}function Li(a){Id(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Il(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Td(a,d){try{var p=a.j;if(p.G!=0&&(p.g==a||xd(p.h,a))){if(!a.K&&xd(p.h,a)&&p.G==3){try{var y=p.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var O=y;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Ll(p),Ol(p);else break e;Cd(p),tn(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=Po(g(p.Za,p),6e3));if(1>=Pg(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Vi(p,11)}else if((a.K||p.g==a)&&Ll(p),!v(d))for(O=p.Da.g.parse(d),d=0;d<O.length;d++){let be=O[d];if(p.T=be[0],be=be[1],p.G==2)if(be[0]=="c"){p.K=be[1],p.ia=be[2];const Ut=be[3];Ut!=null&&(p.la=Ut,p.j.info("VER="+p.la));const $t=be[4];$t!=null&&(p.Aa=$t,p.j.info("SVER="+p.Aa));const _s=be[5];_s!=null&&typeof _s=="number"&&0<_s&&(y=1.5*_s,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const Hn=a.g;if(Hn){const Vl=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vl){var j=y.h;j.g||Vl.indexOf("spdy")==-1&&Vl.indexOf("quic")==-1&&Vl.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Sd(j,j.h),j.h=null))}if(y.D){const Pd=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Pd&&(y.ya=Pd,Fe(y.I,y.D,Pd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var q=a;if(y.qa=ny(y,y.J?y.ia:null,y.W),q.K){Rg(y.h,q);var De=q,At=y.L;At&&(De.I=At),De.B&&(Id(De),bl(De)),y.g=q}else Xg(y);0<p.i.length&&Dl(p)}else be[0]!="stop"&&be[0]!="close"||Vi(p,7);else p.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Vi(p,7):Ad(p):be[0]!="noop"&&p.l&&p.l.ta(be),p.v=0)}}ko(4)}catch{}}var cx=class{constructor(a,d){this.g=a,this.map=d}};function Cg(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Pg(a){return a.h?1:a.g?a.g.size:0}function xd(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Sd(a,d){a.g?a.g.add(d):a.h=d}function Rg(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Cg.prototype.cancel=function(){if(this.i=Ng(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ng(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const p of a.g.values())d=d.concat(p.D);return d}return k(a.i)}function dx(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],p=a.length,y=0;y<p;y++)d.push(a[y]);return d}d=[],p=0;for(y in a)d[p++]=a[y];return d}function hx(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var p=0;p<a;p++)d.push(p);return d}d=[],p=0;for(const y in a)d[p++]=y;return d}}}function Og(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var p=hx(a),y=dx(a),O=y.length,j=0;j<O;j++)d.call(void 0,y[j],p&&p[j],a)}var Dg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fx(a,d){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var y=a[p].indexOf("="),O=null;if(0<=y){var j=a[p].substring(0,y);O=a[p].substring(y+1)}else j=a[p];d(j,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ji(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ji){this.h=a.h,Al(this,a.j),this.o=a.o,this.g=a.g,Cl(this,a.s),this.l=a.l;var d=a.i,p=new Lo;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),Lg(this,p),this.m=a.m}else a&&(d=String(a).match(Dg))?(this.h=!1,Al(this,d[1]||"",!0),this.o=Oo(d[2]||""),this.g=Oo(d[3]||"",!0),Cl(this,d[4]),this.l=Oo(d[5]||"",!0),Lg(this,d[6]||"",!0),this.m=Oo(d[7]||"")):(this.h=!1,this.i=new Lo(null,this.h))}ji.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Do(d,jg,!0),":");var p=this.g;return(p||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Do(d,jg,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Do(p,p.charAt(0)=="/"?gx:mx,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Do(p,vx)),a.join("")};function _r(a){return new ji(a)}function Al(a,d,p){a.j=p?Oo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Cl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Lg(a,d,p){d instanceof Lo?(a.i=d,_x(a.i,a.h)):(p||(d=Do(d,yx)),a.i=new Lo(d,a.h))}function Fe(a,d,p){a.i.set(d,p)}function kl(a){return Fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Oo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Do(a,d,p){return typeof a=="string"?(a=encodeURI(a).replace(d,px),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function px(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var jg=/[#\/\?@]/g,mx=/[#\?:]/g,gx=/[#\?]/g,yx=/[#\?@]/g,vx=/#/g;function Lo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Wr(a){a.g||(a.g=new Map,a.h=0,a.i&&fx(a.i,function(d,p){a.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=Lo.prototype,t.add=function(a,d){Wr(this),this.i=null,a=ys(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(d),this.h+=1,this};function Vg(a,d){Wr(a),d=ys(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Mg(a,d){return Wr(a),d=ys(a,d),a.g.has(d)}t.forEach=function(a,d){Wr(this),this.g.forEach(function(p,y){p.forEach(function(O){a.call(d,O,y,this)},this)},this)},t.na=function(){Wr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let y=0;y<d.length;y++){const O=a[y];for(let j=0;j<O.length;j++)p.push(d[y])}return p},t.V=function(a){Wr(this);let d=[];if(typeof a=="string")Mg(this,a)&&(d=d.concat(this.g.get(ys(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)d=d.concat(a[p])}return d},t.set=function(a,d){return Wr(this),this.i=null,a=ys(this,a),Mg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Fg(a,d,p){Vg(a,d),0<p.length&&(a.i=null,a.g.set(ys(a,d),k(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var y=d[p];const j=encodeURIComponent(String(y)),q=this.V(y);for(y=0;y<q.length;y++){var O=j;q[y]!==""&&(O+="="+encodeURIComponent(String(q[y]))),a.push(O)}}return this.i=a.join("&")};function ys(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function _x(a,d){d&&!a.j&&(Wr(a),a.i=null,a.g.forEach(function(p,y){var O=y.toLowerCase();y!=O&&(Vg(this,y),Fg(this,O,p))},a)),a.j=d}function wx(a,d){const p=new Ro;if(l.Image){const y=new Image;y.onload=_(qr,p,"TestLoadImage: loaded",!0,d,y),y.onerror=_(qr,p,"TestLoadImage: error",!1,d,y),y.onabort=_(qr,p,"TestLoadImage: abort",!1,d,y),y.ontimeout=_(qr,p,"TestLoadImage: timeout",!1,d,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else d(!1)}function Ex(a,d){const p=new Ro,y=new AbortController,O=setTimeout(()=>{y.abort(),qr(p,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:y.signal}).then(j=>{clearTimeout(O),j.ok?qr(p,"TestPingServer: ok",!0,d):qr(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),qr(p,"TestPingServer: error",!1,d)})}function qr(a,d,p,y,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),y(p)}catch{}}function Ix(){this.g=new ix}function Tx(a,d,p){const y=p||"";try{Og(a,function(O,j){let q=O;c(O)&&(q=md(O)),d.push(y+j+"="+encodeURIComponent(q))})}catch(O){throw d.push(y+"type="+encodeURIComponent("_badmap")),O}}function Pl(a){this.l=a.Ub||null,this.j=a.eb||!1}b(Pl,gd),Pl.prototype.g=function(){return new Rl(this.l,this.j)},Pl.prototype.i=function(a){return function(){return a}}({});function Rl(a,d){Te.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Rl,Te),t=Rl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Vo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Vo(this)),this.g&&(this.readyState=3,Vo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ug(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ug(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?jo(this):Vo(this),this.readyState==3&&Ug(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,jo(this))},t.Qa=function(a){this.g&&(this.response=a,jo(this))},t.ga=function(){this.g&&jo(this)};function jo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Vo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=d.next();return a.join(`\r
`)};function Vo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function $g(a){let d="";return V(a,function(p,y){d+=y,d+=":",d+=p,d+=`\r
`}),d}function bd(a,d,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=$g(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Fe(a,d,p))}function et(a){Te.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(et,Te);var xx=/^https?$/i,Sx=["POST","PUT"];t=et.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_d.g(),this.v=this.o?gg(this.o):gg(_d),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(j){Bg(this,j);return}if(a=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var O in y)p.set(O,y[O]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const j of y.keys())p.set(j,y.get(j));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(j=>j.toLowerCase()=="content-type"),O=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Sx,d,void 0))||y||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,q]of p)this.g.setRequestHeader(j,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wg(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){Bg(this,j)}};function Bg(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,zg(a),Nl(a)}function zg(a){a.A||(a.A=!0,le(a,"complete"),le(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,le(this,"complete"),le(this,"abort"),Nl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nl(this,!0)),et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Hg(this):this.bb())},t.bb=function(){Hg(this)};function Hg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||wr(a)!=4||a.Z()!=2)){if(a.u&&wr(a)==4)Ft(a.Ea,0,a);else if(le(a,"readystatechange"),wr(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var y;if(y=q===0){var O=String(a.D).match(Dg)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),y=!xx.test(O?O.toLowerCase():"")}p=y}if(p)le(a,"complete"),le(a,"success");else{a.m=6;try{var j=2<wr(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",zg(a)}}finally{Nl(a)}}}}function Nl(a,d){if(a.g){Wg(a);const p=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||le(a,"ready");try{p.onreadystatechange=y}catch{}}}function Wg(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function wr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<wr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),rx(d)}};function qg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function bx(a){const d={};a=(a.g&&2<=wr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(v(a[y]))continue;var p=P(a[y]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const j=d[O]||[];d[O]=j,j.push(p)}I(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mo(a,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||d}function Gg(a){this.Aa=0,this.i=[],this.j=new Ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mo("baseRetryDelayMs",5e3,a),this.cb=Mo("retryDelaySeedMs",1e4,a),this.Wa=Mo("forwardChannelMaxRetries",2,a),this.wa=Mo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Cg(a&&a.concurrentRequestLimit),this.Da=new Ix,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Gg.prototype,t.la=8,t.G=1,t.connect=function(a,d,p,y){tn(0),this.W=a,this.H=d||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=ny(this,null,this.W),Dl(this)};function Ad(a){if(Kg(a),a.G==3){var d=a.U++,p=_r(a.I);if(Fe(p,"SID",a.K),Fe(p,"RID",d),Fe(p,"TYPE","terminate"),Fo(a,p),d=new Hr(a,a.j,d),d.L=2,d.v=kl(_r(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=d.v,p=!0),p||(d.g=ry(d.j,null),d.g.ea(d.v)),d.F=Date.now(),bl(d)}ty(a)}function Ol(a){a.g&&(kd(a),a.g.cancel(),a.g=null)}function Kg(a){Ol(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ll(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Dl(a){if(!kg(a.h)&&!a.s){a.s=!0;var d=a.Ga;_e||se(),W||(_e(),W=!0),ne.add(d,a),a.B=0}}function Ax(a,d){return Pg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Po(g(a.Ga,a,d),ey(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const O=new Hr(this,this.j,a);let j=this.o;if(this.S&&(j?(j=w(j),x(j,this.S)):j=this.S),this.m!==null||this.O||(O.H=j,j=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Yg(this,O,d),p=_r(this.I),Fe(p,"RID",a),Fe(p,"CVER",22),this.D&&Fe(p,"X-HTTP-Session-Id",this.D),Fo(this,p),j&&(this.O?d="headers="+encodeURIComponent(String($g(j)))+"&"+d:this.m&&bd(p,this.m,j)),Sd(this.h,O),this.Ua&&Fe(p,"TYPE","init"),this.P?(Fe(p,"$req",d),Fe(p,"SID","null"),O.T=!0,Ed(O,p,null)):Ed(O,p,d),this.G=2}}else this.G==3&&(a?Qg(this,a):this.i.length==0||kg(this.h)||Qg(this))};function Qg(a,d){var p;d?p=d.l:p=a.U++;const y=_r(a.I);Fe(y,"SID",a.K),Fe(y,"RID",p),Fe(y,"AID",a.T),Fo(a,y),a.m&&a.o&&bd(y,a.m,a.o),p=new Hr(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Yg(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Sd(a.h,p),Ed(p,y,d)}function Fo(a,d){a.H&&V(a.H,function(p,y){Fe(d,y,p)}),a.l&&Og({},function(p,y){Fe(d,y,p)})}function Yg(a,d,p){p=Math.min(a.i.length,p);var y=a.l?g(a.l.Na,a.l,a):null;e:{var O=a.i;let j=-1;for(;;){const q=["count="+p];j==-1?0<p?(j=O[0].g,q.push("ofs="+j)):j=0:q.push("ofs="+j);let De=!0;for(let At=0;At<p;At++){let be=O[At].g;const Ut=O[At].map;if(be-=j,0>be)j=Math.max(0,O[At].g-100),De=!1;else try{Tx(Ut,q,"req"+be+"_")}catch{y&&y(Ut)}}if(De){y=q.join("&");break e}}}return a=a.i.splice(0,p),d.D=a,y}function Xg(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;_e||se(),W||(_e(),W=!0),ne.add(d,a),a.v=0}}function Cd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Po(g(a.Fa,a),ey(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Jg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Po(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tn(10),Ol(this),Jg(this))};function kd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Jg(a){a.g=new Hr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=_r(a.qa);Fe(d,"RID","rpc"),Fe(d,"SID",a.K),Fe(d,"AID",a.T),Fe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Fe(d,"TO",a.ja),Fe(d,"TYPE","xmlhttp"),Fo(a,d),a.m&&a.o&&bd(d,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=kl(_r(d)),p.m=null,p.P=!0,Sg(p,a)}t.Za=function(){this.C!=null&&(this.C=null,Ol(this),Cd(this),tn(19))};function Ll(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Zg(a,d){var p=null;if(a.g==d){Ll(a),kd(a),a.g=null;var y=2}else if(xd(a.h,d))p=d.D,Rg(a.h,d),y=1;else return;if(a.G!=0){if(d.o)if(y==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var O=a.B;y=Tl(),le(y,new Eg(y,p)),Dl(a)}else Xg(a);else if(O=d.s,O==3||O==0&&0<d.X||!(y==1&&Ax(a,d)||y==2&&Cd(a)))switch(p&&0<p.length&&(d=a.h,d.i=d.i.concat(p)),O){case 1:Vi(a,5);break;case 4:Vi(a,10);break;case 3:Vi(a,6);break;default:Vi(a,2)}}}function ey(a,d){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*d}function Vi(a,d){if(a.j.info("Error code "+d),d==2){var p=g(a.fb,a),y=a.Xa;const O=!y;y=new ji(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Al(y,"https"),kl(y),O?wx(y.toString(),p):Ex(y.toString(),p)}else tn(2);a.G=0,a.l&&a.l.sa(d),ty(a),Kg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function ty(a){if(a.G=0,a.ka=[],a.l){const d=Ng(a.h);(d.length!=0||a.i.length!=0)&&(C(a.ka,d),C(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function ny(a,d,p){var y=p instanceof ji?_r(p):new ji(p);if(y.g!="")d&&(y.g=d+"."+y.g),Cl(y,y.s);else{var O=l.location;y=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var j=new ji(null);y&&Al(j,y),d&&(j.g=d),O&&Cl(j,O),p&&(j.l=p),y=j}return p=a.D,d=a.ya,p&&d&&Fe(y,p,d),Fe(y,"VER",a.la),Fo(a,y),y}function ry(a,d,p){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new et(new Pl({eb:p})):new et(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function iy(){}t=iy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function jl(){}jl.prototype.g=function(a,d){return new In(a,d)};function In(a,d){Te.call(this),this.g=new Gg(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!v(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!v(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new vs(this)}b(In,Te),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Ad(this.g)},In.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=md(a),a=p);d.i.push(new cx(d.Ya++,a)),d.G==3&&Dl(d)},In.prototype.N=function(){this.g.l=null,delete this.j,Ad(this.g),delete this.g,In.aa.N.call(this)};function sy(a){yd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const p in d){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}b(sy,yd);function oy(){vd.call(this),this.status=1}b(oy,vd);function vs(a){this.g=a}b(vs,iy),vs.prototype.ua=function(){le(this.g,"a")},vs.prototype.ta=function(a){le(this.g,new sy(a))},vs.prototype.sa=function(a){le(this.g,new oy)},vs.prototype.ra=function(){le(this.g,"b")},jl.prototype.createWebChannel=jl.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,OE=function(){return new jl},NE=function(){return Tl()},RE=Di,Af={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xl.NO_ERROR=0,xl.TIMEOUT=8,xl.HTTP_ERROR=6,Iu=xl,Ig.COMPLETE="complete",PE=Ig,yg.EventType=Co,Co.OPEN="a",Co.CLOSE="b",Co.ERROR="c",Co.MESSAGE="d",Te.prototype.listen=Te.prototype.K,ta=yg,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,kE=et}).apply(typeof tu<"u"?tu:typeof self<"u"?self:typeof window<"u"?window:{});const Av="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new tm("@firebase/firestore");function Ko(){return is.logLevel}function J(t,...e){if(is.logLevel<=ye.DEBUG){const n=e.map(im);is.debug(`Firestore (${wo}): ${t}`,...n)}}function jr(t,...e){if(is.logLevel<=ye.ERROR){const n=e.map(im);is.error(`Firestore (${wo}): ${t}`,...n)}}function oo(t,...e){if(is.logLevel<=ye.WARN){const n=e.map(im);is.warn(`Firestore (${wo}): ${t}`,...n)}}function im(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${wo}) INTERNAL ASSERTION FAILED: `+t;throw jr(e),new Error(e)}function Ne(t,e){t||ae()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Br{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class MC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class FC{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _i,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _i)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string"),new DE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string"),new Gt(e)}}class UC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $C{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new UC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ne(this.o===void 0);const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string"),this.R=n.token,new BC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=HC(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function ao(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new mt(0,0))}static max(){return new ue(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return za.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof za?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ze extends za{construct(e,n,r){return new ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const WC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends za{construct(e,n,r){return new Rt(e,n,r)}static isValidIdentifier(e){return WC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Rt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(n)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(ze.fromString(e))}static fromName(e){return new te(ze.fromString(e).popFirst(5))}static empty(){return new te(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new ze(e.slice()))}}function qC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new Si(i,te.empty(),e)}function GC(t){return new Si(t.readTime,t.key,-1)}class Si{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Si(ue.min(),te.empty(),-1)}static max(){return new Si(ue.max(),te.empty(),-1)}}function KC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==QC)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function XC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function al(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sm.oe=-1;function zc(t){return t==null}function ac(t){return t===0&&1/t==-1/0}function JC(t){return typeof t=="number"&&Number.isInteger(t)&&!ac(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nu(this.root,e,this.comparator,!1)}getReverseIterator(){return new nu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nu(this.root,e,this.comparator,!0)}}class nu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??kt.RED,this.left=i??kt.EMPTY,this.right=s??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kv(this.data.getIterator())}getIteratorFrom(e){return new kv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class kv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new An([])}unionWith(e){let n=new Lt(Rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new An(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new VE("Invalid base64 string: "+s):s}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const ZC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bi(t){if(Ne(!!t),typeof t=="string"){let e=0;const n=ZC.exec(t);if(Ne(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(t.seconds),nanos:ot(t.nanos)}}function ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ss(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function am(t){const e=t.mapValue.fields.__previous_value__;return om(e)?am(e):e}function Ha(t){const e=bi(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class Wa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru={mapValue:{}};function os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?om(t)?4:nk(t)?9007199254740991:tk(t)?10:11:ae()}function dr(t,e){if(t===e)return!0;const n=os(t);if(n!==os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ha(t).isEqual(Ha(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=bi(i.timestampValue),l=bi(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ss(i.bytesValue).isEqual(ss(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ot(i.geoPointValue.latitude)===ot(s.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ot(i.integerValue)===ot(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ot(i.doubleValue),l=ot(s.doubleValue);return o===l?ac(o)===ac(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ao(t.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Cv(o)!==Cv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!dr(o[u],l[u])))return!1;return!0}(t,e);default:return ae()}}function qa(t,e){return(t.values||[]).find(n=>dr(n,e))!==void 0}function lo(t,e){if(t===e)return 0;const n=os(t),r=os(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=ot(s.integerValue||s.doubleValue),u=ot(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Pv(t.timestampValue,e.timestampValue);case 4:return Pv(Ha(t),Ha(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(s,o){const l=ss(s),u=ss(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=Ae(l[c],u[c]);if(h!==0)return h}return Ae(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Ae(ot(s.latitude),ot(o.latitude));return l!==0?l:Ae(ot(s.longitude),ot(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Rv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,c,h;const m=s.fields||{},g=o.fields||{},_=(l=m.value)===null||l===void 0?void 0:l.arrayValue,b=(u=g.value)===null||u===void 0?void 0:u.arrayValue,k=Ae(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:Rv(_,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ru.mapValue&&o===ru.mapValue)return 0;if(s===ru.mapValue)return 1;if(o===ru.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const g=Ae(u[m],h[m]);if(g!==0)return g;const _=lo(l[u[m]],c[h[m]]);if(_!==0)return _}return Ae(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Pv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=bi(t),r=bi(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function Rv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=lo(n[i],r[i]);if(s)return s}return Ae(n.length,r.length)}function uo(t){return Cf(t)}function Cf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=bi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Cf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Cf(n.fields[o])}`;return i+"}"}(t.mapValue):ae()}function Nv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kf(t){return!!t&&"integerValue"in t}function lm(t){return!!t&&"arrayValue"in t}function Ov(t){return!!t&&"nullValue"in t}function Dv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tu(t){return!!t&&"mapValue"in t}function tk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ma(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return hs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ma(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ma(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ma(n)}setAll(e){let n=Rt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=ma(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Tu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){hs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new mn(ma(this.value))}}function ME(t){const e=[];return hs(t.fields,(n,r)=>{const i=new Rt([n]);if(Tu(r)){const s=ME(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Qt(e,0,ue.min(),ue.min(),ue.min(),mn.empty(),0)}static newFoundDocument(e,n,r,i){return new Qt(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new Qt(e,2,n,ue.min(),ue.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,ue.min(),ue.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n){this.position=e,this.inclusive=n}}function Lv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=lo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!dr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n="asc"){this.field=e,this.dir=n}}function rk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{}class pt extends FE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sk(e,n,r):n==="array-contains"?new lk(e,r):n==="in"?new uk(e,r):n==="not-in"?new ck(e,r):n==="array-contains-any"?new dk(e,r):new pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ok(e,r):new ak(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(lo(n,this.value)):n!==null&&os(this.value)===os(n)&&this.matchesComparison(lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends FE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Jn(e,n)}matches(e){return UE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function UE(t){return t.op==="and"}function $E(t){return ik(t)&&UE(t)}function ik(t){for(const e of t.filters)if(e instanceof Jn)return!1;return!0}function Pf(t){if(t instanceof pt)return t.field.canonicalString()+t.op.toString()+uo(t.value);if($E(t))return t.filters.map(e=>Pf(e)).join(",");{const e=t.filters.map(n=>Pf(n)).join(",");return`${t.op}(${e})`}}function BE(t,e){return t instanceof pt?function(r,i){return i instanceof pt&&r.op===i.op&&r.field.isEqual(i.field)&&dr(r.value,i.value)}(t,e):t instanceof Jn?function(r,i){return i instanceof Jn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&BE(o,i.filters[l]),!0):!1}(t,e):void ae()}function zE(t){return t instanceof pt?function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`}(t):t instanceof Jn?function(n){return n.op.toString()+" {"+n.getFilters().map(zE).join(" ,")+"}"}(t):"Filter"}class sk extends pt{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class ok extends pt{constructor(e,n){super(e,"in",n),this.keys=HE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ak extends pt{constructor(e,n){super(e,"not-in",n),this.keys=HE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function HE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class lk extends pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lm(n)&&qa(n.arrayValue,this.value)}}class uk extends pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qa(this.value.arrayValue,n)}}class ck extends pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qa(this.value.arrayValue,n)}}class dk extends pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Vv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new hk(t,e,n,r,i,s,o)}function um(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Pf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>uo(r)).join(",")),e.ue=n}return e.ue}function cm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jv(t.startAt,e.startAt)&&jv(t.endAt,e.endAt)}function Rf(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function fk(t,e,n,r,i,s,o,l){return new Eo(t,e,n,r,i,s,o,l)}function dm(t){return new Eo(t)}function Mv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WE(t){return t.collectionGroup!==null}function ga(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Lt(Rt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ga(s,r))}),n.has(Rt.keyField().canonicalString())||e.ce.push(new Ga(Rt.keyField(),r))}return e.ce}function ar(t){const e=ce(t);return e.le||(e.le=pk(e,ga(t))),e.le}function pk(t,e){if(t.limitType==="F")return Vv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ga(i.field,s)});const n=t.endAt?new lc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new lc(t.startAt.position,t.startAt.inclusive):null;return Vv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nf(t,e){const n=t.filters.concat([e]);return new Eo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function uc(t,e,n){return new Eo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hc(t,e){return cm(ar(t),ar(e))&&t.limitType===e.limitType}function qE(t){return`${um(ar(t))}|lt:${t.limitType}`}function Is(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>zE(i)).join(", ")}]`),zc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>uo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>uo(i)).join(",")),`Target(${r})`}(ar(t))}; limitType=${t.limitType})`}function Wc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ga(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=Lv(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,ga(r),i)||r.endAt&&!function(o,l,u){const c=Lv(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,ga(r),i))}(t,e)}function mk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GE(t){return(e,n)=>{let r=!1;for(const i of ga(t)){const s=gk(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function gk(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?lo(u,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return jE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new Ze(te.comparator);function Vr(){return yk}const KE=new Ze(te.comparator);function na(...t){let e=KE;for(const n of t)e=e.insert(n.key,n);return e}function QE(t){let e=KE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gi(){return ya()}function YE(){return ya()}function ya(){return new Io(t=>t.toString(),(t,e)=>t.isEqual(e))}const vk=new Ze(te.comparator),_k=new Lt(te.comparator);function me(...t){let e=_k;for(const n of t)e=e.add(n);return e}const wk=new Lt(Ae);function Ek(){return wk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(e)?"-0":e}}function XE(t){return{integerValue:""+t}}function Ik(t,e){return JC(e)?XE(e):hm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this._=void 0}}function Tk(t,e,n){return t instanceof cc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&om(s)&&(s=am(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ka?ZE(t,e):t instanceof Qa?eI(t,e):function(i,s){const o=JE(i,s),l=Fv(o)+Fv(i.Pe);return kf(o)&&kf(i.Pe)?XE(l):hm(i.serializer,l)}(t,e)}function xk(t,e,n){return t instanceof Ka?ZE(t,e):t instanceof Qa?eI(t,e):n}function JE(t,e){return t instanceof dc?function(r){return kf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class cc extends qc{}class Ka extends qc{constructor(e){super(),this.elements=e}}function ZE(t,e){const n=tI(e);for(const r of t.elements)n.some(i=>dr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Qa extends qc{constructor(e){super(),this.elements=e}}function eI(t,e){let n=tI(e);for(const r of t.elements)n=n.filter(i=>!dr(i,r));return{arrayValue:{values:n}}}class dc extends qc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Fv(t){return ot(t.integerValue||t.doubleValue)}function tI(t){return lm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Sk(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ka&&i instanceof Ka||r instanceof Qa&&i instanceof Qa?ao(r.elements,i.elements,dr):r instanceof dc&&i instanceof dc?dr(r.Pe,i.Pe):r instanceof cc&&i instanceof cc}(t.transform,e.transform)}class bk{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gc{}function nI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kc(t.key,on.none()):new ll(t.key,t.data,on.none());{const n=t.data,r=mn.empty();let i=new Lt(Rt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ni(t.key,r,new An(i.toArray()),on.none())}}function Ak(t,e,n){t instanceof ll?function(i,s,o){const l=i.value.clone(),u=$v(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ni?function(i,s,o){if(!xu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=$v(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(rI(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function va(t,e,n,r){return t instanceof ll?function(s,o,l,u){if(!xu(s.precondition,o))return l;const c=s.value.clone(),h=Bv(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ni?function(s,o,l,u){if(!xu(s.precondition,o))return l;const c=Bv(s.fieldTransforms,u,o),h=o.data;return h.setAll(rI(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return xu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Ck(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=JE(r.transform,i||null);s!=null&&(n===null&&(n=mn.empty()),n.set(r.field,s))}return n||null}function Uv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ao(r,i,(s,o)=>Sk(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ll extends Gc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ni extends Gc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function rI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $v(t,e,n){const r=new Map;Ne(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,xk(o,l,n[i]))}return r}function Bv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Tk(s,o,e))}return r}class Kc extends Gc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kk extends Gc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Ak(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=va(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=YE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=nI(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,(n,r)=>Uv(n,r))&&ao(this.baseMutations,e.baseMutations,(n,r)=>Uv(n,r))}}class fm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ne(e.mutations.length===r.length);let i=function(){return vk}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new fm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,Ee;function Ok(t){switch(t){default:return ae();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function iI(t){if(t===void 0)return jr("GRPC error has no .code"),F.UNKNOWN;switch(t){case ht.OK:return F.OK;case ht.CANCELLED:return F.CANCELLED;case ht.UNKNOWN:return F.UNKNOWN;case ht.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ht.INTERNAL:return F.INTERNAL;case ht.UNAVAILABLE:return F.UNAVAILABLE;case ht.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ht.NOT_FOUND:return F.NOT_FOUND;case ht.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ht.ABORTED:return F.ABORTED;case ht.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ht.DATA_LOSS:return F.DATA_LOSS;default:return ae()}}(Ee=ht||(ht={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=new Xi([4294967295,4294967295],0);function zv(t){const e=Dk().encode(t),n=new CE;return n.update(e),new Uint8Array(n.digest())}function Hv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xi([n,r],0),new Xi([i,s],0)]}class pm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ra(`Invalid padding: ${n}`);if(r<0)throw new ra(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ra(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Xi.fromNumber(r)));return i.compare(Lk)===1&&(i=new Xi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=zv(e),[r,i]=Hv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new pm(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=zv(e),[r,i]=Hv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ul.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qc(ue.min(),i,new Ze(Ae),Vr(),me())}}class ul{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ul(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class sI{constructor(e,n){this.targetId=e,this.me=n}}class oI{constructor(e,n,r=Vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Wv{constructor(){this.fe=0,this.ge=Gv(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),n=me(),r=me();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new ul(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Gv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vr(),this.qe=qv(),this.Qe=new Ze(Ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Rf(s))if(r===0){const o=new te(s.path);this.Ue(n,o,Qt.newNoDocument(o,ue.min()))}else Ne(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=ss(r).toUint8Array()}catch(u){if(u instanceof VE)return oo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new pm(o,i,s)}catch(u){return oo(u instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Rf(l.target)){const u=new te(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Qt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=me();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Qc(e,n,this.Qe,this.ke,r);return this.ke=Vr(),this.qe=qv(),this.Qe=new Ze(Ae),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Wv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Lt(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function qv(){return new Ze(te.comparator)}function Gv(){return new Ze(te.comparator)}const Vk={asc:"ASCENDING",desc:"DESCENDING"},Mk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fk={and:"AND",or:"OR"};class Uk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Of(t,e){return t.useProto3Json||zc(e)?e:{value:e}}function hc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $k(t,e){return hc(t,e.toTimestamp())}function lr(t){return Ne(!!t),ue.fromTimestamp(function(n){const r=bi(n);return new mt(r.seconds,r.nanos)}(t))}function mm(t,e){return Df(t,e).canonicalString()}function Df(t,e){const n=function(i){return new ze(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lI(t){const e=ze.fromString(t);return Ne(fI(e)),e}function Lf(t,e){return mm(t.databaseId,e.path)}function lh(t,e){const n=lI(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(cI(n))}function uI(t,e){return mm(t.databaseId,e)}function Bk(t){const e=lI(t);return e.length===4?ze.emptyPath():cI(e)}function jf(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cI(t){return Ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Kv(t,e,n){return{name:Lf(t,e),fields:n.value.mapValue.fields}}function zk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Ne(h===void 0||typeof h=="string"),Vt.fromBase64String(h||"")):(Ne(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const h=c.code===void 0?F.UNKNOWN:iI(c.code);return new K(h,c.message||"")}(o);n=new oI(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=lh(t,r.document.name),s=lr(r.document.updateTime),o=r.document.createTime?lr(r.document.createTime):ue.min(),l=new mn({mapValue:{fields:r.document.fields}}),u=Qt.newFoundDocument(i,s,o,l),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Su(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=lh(t,r.document),s=r.readTime?lr(r.readTime):ue.min(),o=Qt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Su([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=lh(t,r.document),s=r.removedTargetIds||[];n=new Su([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Nk(i,s),l=r.targetId;n=new sI(l,o)}}return n}function Hk(t,e){let n;if(e instanceof ll)n={update:Kv(t,e.key,e.value)};else if(e instanceof Kc)n={delete:Lf(t,e.key)};else if(e instanceof Ni)n={update:Kv(t,e.key,e.data),updateMask:Zk(e.fieldMask)};else{if(!(e instanceof kk))return ae();n={verify:Lf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof cc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ka)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Qa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof dc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$k(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function Wk(t,e){return t&&t.length>0?(Ne(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?lr(i.updateTime):lr(s);return o.isEqual(ue.min())&&(o=lr(s)),new bk(o,i.transformResults||[])}(n,e))):[]}function qk(t,e){return{documents:[uI(t,e.path)]}}function Gk(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uI(t,i);const s=function(c){if(c.length!==0)return hI(Jn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(g){return{field:Ts(g.field),direction:Yk(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Of(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function Kk(t){let e=Bk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ne(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(m){const g=dI(m);return g instanceof Jn&&$E(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(b){return new Ga(xs(b.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,zc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,_=m.values||[];return new lc(_,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,_=m.values||[];return new lc(_,g)}(n.endAt)),fk(e,i,o,s,l,"F",u,c)}function Qk(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xs(n.unaryFilter.field);return pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xs(n.unaryFilter.field);return pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xs(n.unaryFilter.field);return pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xs(n.unaryFilter.field);return pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return pt.create(xs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jn.create(n.compositeFilter.filters.map(r=>dI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function Yk(t){return Vk[t]}function Xk(t){return Mk[t]}function Jk(t){return Fk[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function xs(t){return Rt.fromServerFormat(t.fieldPath)}function hI(t){return t instanceof pt?function(n){if(n.op==="=="){if(Dv(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(Ov(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dv(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(Ov(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:Xk(n.op),value:n.value}}}(t):t instanceof Jn?function(n){const r=n.getFilters().map(i=>hI(i));return r.length===1?r[0]:{compositeFilter:{op:Jk(n.op),filters:r}}}(t):ae()}function Zk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,r,i,s=ue.min(),o=ue.min(),l=Vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.ct=e}}function t2(t){const e=Kk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.un=new r2}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Si.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class r2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Lt(ze.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Lt(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new co(0)}static kn(){return new co(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.changes=new Io(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&va(r.mutation,i,An.empty(),mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const i=Gi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=na();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Gi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Vr();const o=ya(),l=function(){return ya()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Ni)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),va(h.mutation,c,h.mutation.getFieldMask(),mt.now())):o.set(c.key,An.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var m;return l.set(c,new s2(h,(m=o.get(c))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ya();let i=new Ze((o,l)=>o-l),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||An.empty();h=l.applyToLocalView(c,h),r.set(u,h);const m=(i.get(l.batchId)||me()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,m=YE();h.forEach(g=>{if(!s.has(g)){const _=nI(n.get(g),r.get(g));_!==null&&m.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Gi());let l=-1,u=s;return o.next(c=>U.forEach(c,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,me())).next(h=>({batchId:l,changes:QE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=na();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=na();return this.indexManager.getCollectionParents(e,s).next(l=>U.forEach(l,u=>{const c=function(m,g){return new Eo(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Qt.newInvalidDocument(h)))});let l=na();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&va(h.mutation,c,An.empty(),mt.now()),Wc(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:lr(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:t2(i.bundledQuery),readTime:lr(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.overlays=new Ze(te.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gi();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Gi(),s=n.length+1,o=new te(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ze((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Gi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=Gi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=i)););return U.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Rk(n,r));let s=this.Ir.get(n);s===void 0&&(s=me(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(){this.Tr=new Lt(Tt.Er),this.dr=new Lt(Tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Tt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Tt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new ze([])),r=new Tt(n,e),i=new Tt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new ze([])),r=new Tt(n,e),i=new Tt(n,e+1);let s=me();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Tt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||Ae(e.wr,n.wr)}static Ar(e,n){return Ae(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Lt(Tt.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Pk(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Tt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tt(n,0),i=new Tt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Lt(Ae);return n.forEach(i=>{const s=new Tt(i,0),o=new Tt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const o=new Tt(new te(s),0);let l=new Lt(Ae);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ne(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new Tt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Tt(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.Mr=e,this.docs=function(){return new Ze(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=Vr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Qt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Vr();const o=n.path,l=new te(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||KC(GC(h),r)<=0||(i.has(h.key)||Wc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new h2(this)}getSize(e){return U.resolve(this.size)}}class h2 extends i2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.persistence=e,this.Nr=new Io(n=>um(n),cm),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gm,this.targetCount=0,this.kr=co.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new co(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sm(0),this.Kr=!1,this.Kr=!0,this.$r=new u2,this.referenceDelegate=e(this),this.Ur=new f2(this),this.indexManager=new n2,this.remoteDocumentCache=function(i){return new d2(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new e2(n),this.Gr=new a2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new l2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new c2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new m2(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class m2 extends YC{constructor(e){super(),this.currentSequenceNumber=e}}class ym{constructor(e){this.persistence=e,this.Jr=new gm,this.Yr=null}static Zr(e){return new ym(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=te.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=me(),i=me();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new vm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vA()?8:XC(Zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new g2;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ko()<=ye.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Ko()<=ye.DEBUG&&J("QueryEngine","Query:",Is(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ko()<=ye.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ar(n))):U.resolve())}Yi(e,n){if(Mv(n))return U.resolve(null);let r=ar(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=uc(n,null,"F"),r=ar(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=me(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,l);return this.ns(n,c,o,u.readTime)?this.Yi(e,uc(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return Mv(n)||i.isEqual(ue.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(Ko()<=ye.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Is(n)),this.rs(e,o,n,qC(i,-1)).next(l=>l))})}ts(e,n){let r=new Lt(GE(e));return n.forEach((i,s)=>{Wc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ko()<=ye.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Is(n)),this.Ji.getDocumentsMatchingQuery(e,n,Si.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ze(Ae),this._s=new Io(s=>um(s),cm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function _2(t,e,n,r){return new v2(t,e,n,r)}async function pI(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=me();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:l}))})})}function w2(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const m=c.batch,g=m.keys();let _=U.resolve();return g.forEach(b=>{_=_.next(()=>h.getEntry(u,b)).next(k=>{const C=c.docVersions.get(b);Ne(C!==null),k.version.compareTo(C)<0&&(m.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),h.addEntry(k)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=me();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function mI(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function E2(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((h,m)=>{const g=i.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,m)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(Vt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(m,_),function(k,C,E){return k.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,_,h)&&l.push(n.Ur.updateTargetData(s,_))});let u=Vr(),c=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(I2(s,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(ue.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return U.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function I2(t,e,n){let r=me(),i=me();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Vr();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ue.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):J("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function T2(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function x2(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ai(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Vf(t,e,n){const r=ce(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!al(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Qv(t,e,n){const r=ce(t);let i=ue.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const m=ce(u),g=m._s.get(h);return g!==void 0?U.resolve(m.os.get(g)):m.Ur.getTargetData(c,h)}(r,o,ar(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:me())).next(l=>(S2(r,mk(e),l),{documents:l,Ts:s})))}function S2(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Yv{constructor(){this.activeTargetIds=Ek()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class b2{constructor(){this.so=new Yv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Yv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu=null;function uh(){return iu===null?iu=function(){return 268435456+Math.round(2147483648*Math.random())}():iu++,"0x"+iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht="WebChannelConnection";class P2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=uh(),u=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(h=>(J("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw oo("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=C2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=uh();return new Promise((o,l)=>{const u=new kE;u.setWithCredentials(!0),u.listenOnce(PE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Iu.NO_ERROR:const h=u.getResponseJson();J(Ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Iu.TIMEOUT:J(Ht,`RPC '${e}' ${s} timed out`),l(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case Iu.HTTP_ERROR:const m=u.getStatus();if(J(Ht,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const b=function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(E)>=0?E:F.UNKNOWN}(_.status);l(new K(b,_.message))}else l(new K(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new K(F.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{J(Ht,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);J(Ht,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=uh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OE(),l=NE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");J(Ht,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=o.createWebChannel(h,u);let g=!1,_=!1;const b=new k2({Io:C=>{_?J(Ht,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(g||(J(Ht,`Opening RPC '${e}' stream ${i} transport.`),m.open(),g=!0),J(Ht,`RPC '${e}' stream ${i} sending:`,C),m.send(C))},To:()=>m.close()}),k=(C,E,v)=>{C.listen(E,A=>{try{v(A)}catch(D){setTimeout(()=>{throw D},0)}})};return k(m,ta.EventType.OPEN,()=>{_||(J(Ht,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),k(m,ta.EventType.CLOSE,()=>{_||(_=!0,J(Ht,`RPC '${e}' stream ${i} transport closed`),b.So())}),k(m,ta.EventType.ERROR,C=>{_||(_=!0,oo(Ht,`RPC '${e}' stream ${i} transport errored:`,C),b.So(new K(F.UNAVAILABLE,"The operation could not be completed")))}),k(m,ta.EventType.MESSAGE,C=>{var E;if(!_){const v=C.data[0];Ne(!!v);const A=v,D=A.error||((E=A[0])===null||E===void 0?void 0:E.error);if(D){J(Ht,`RPC '${e}' stream ${i} received error:`,D);const L=D.status;let V=function(T){const x=ht[T];if(x!==void 0)return iI(x)}(L),I=D.message;V===void 0&&(V=F.INTERNAL,I="Unknown error status: "+L+" with message "+D.message),_=!0,b.So(new K(V,I)),m.close()}else J(Ht,`RPC '${e}' stream ${i} received:`,v),b.bo(v)}}),k(l,RE.STAT_EVENT,C=>{C.stat===Af.PROXY?J(Ht,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Af.NOPROXY&&J(Ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function ch(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t){return new Uk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(jr(n.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new K(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class R2 extends yI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=zk(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?lr(o.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=jf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Rf(u)?{documents:qk(s,u)}:{query:Gk(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=aI(s,o.resumeToken);const c=Of(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){l.readTime=hc(s,o.snapshotVersion.toTimestamp());const c=Of(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=Qk(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=jf(this.serializer),n.removeTarget=e,this.a_(n)}}class N2 extends yI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Wk(e.writeResults,e.commitTime),r=lr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=jf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Hk(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Df(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Df(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class D2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(jr(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{fs(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=ce(u);c.L_.add(4),await cl(c),c.q_.set("Unknown"),c.L_.delete(4),await Xc(c)}(this))})}),this.q_=new D2(r,i)}}async function Xc(t){if(fs(t))for(const e of t.B_)await e(!0)}async function cl(t){for(const e of t.B_)await e(!1)}function vI(t,e){const n=ce(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Im(n)?Em(n):To(n).r_()&&wm(n,e))}function _m(t,e){const n=ce(t),r=To(n);n.N_.delete(e),r.r_()&&_I(n,e),n.N_.size===0&&(r.r_()?r.o_():fs(n)&&n.q_.set("Unknown"))}function wm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}To(t).A_(e)}function _I(t,e){t.Q_.xe(e),To(t).R_(e)}function Em(t){t.Q_=new jk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),To(t).start(),t.q_.v_()}function Im(t){return fs(t)&&!To(t).n_()&&t.N_.size>0}function fs(t){return ce(t).L_.size===0}function wI(t){t.Q_=void 0}async function j2(t){t.q_.set("Online")}async function V2(t){t.N_.forEach((e,n)=>{wm(t,e)})}async function M2(t,e){wI(t),Im(t)?(t.q_.M_(e),Em(t)):t.q_.set("Unknown")}async function F2(t,e,n){if(t.q_.set("Online"),e instanceof oI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fc(t,r)}else if(e instanceof Su?t.Q_.Ke(e):e instanceof sI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await mI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(Vt.EMPTY_BYTE_STRING,h.snapshotVersion)),_I(s,u);const m=new ai(h.target,u,c,h.sequenceNumber);wm(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await fc(t,r)}}async function fc(t,e,n){if(!al(e))throw e;t.L_.add(1),await cl(t),t.q_.set("Offline"),n||(n=()=>mI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Xc(t)})}function EI(t,e){return e().catch(n=>fc(t,n,e))}async function Jc(t){const e=ce(t),n=Ai(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;U2(e);)try{const i=await T2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,$2(e,i)}catch(i){await fc(e,i)}II(e)&&TI(e)}function U2(t){return fs(t)&&t.O_.length<10}function $2(t,e){t.O_.push(e);const n=Ai(t);n.r_()&&n.V_&&n.m_(e.mutations)}function II(t){return fs(t)&&!Ai(t).n_()&&t.O_.length>0}function TI(t){Ai(t).start()}async function B2(t){Ai(t).p_()}async function z2(t){const e=Ai(t);for(const n of t.O_)e.m_(n.mutations)}async function H2(t,e,n){const r=t.O_.shift(),i=fm.from(r,e,n);await EI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Jc(t)}async function W2(t,e){e&&Ai(t).V_&&await async function(r,i){if(function(o){return Ok(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();Ai(r).s_(),await EI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Jc(r)}}(t,e),II(t)&&TI(t)}async function Jv(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=fs(n);n.L_.add(3),await cl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Xc(n)}async function q2(t,e){const n=ce(t);e?(n.L_.delete(2),await Xc(n)):e||(n.L_.add(2),await cl(n),n.q_.set("Unknown"))}function To(t){return t.K_||(t.K_=function(n,r,i){const s=ce(n);return s.w_(),new R2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:j2.bind(null,t),Ro:V2.bind(null,t),mo:M2.bind(null,t),d_:F2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Im(t)?Em(t):t.q_.set("Unknown")):(await t.K_.stop(),wI(t))})),t.K_}function Ai(t){return t.U_||(t.U_=function(n,r,i){const s=ce(n);return s.w_(),new N2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:B2.bind(null,t),mo:W2.bind(null,t),f_:z2.bind(null,t),g_:H2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Jc(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Tm(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xm(t,e){if(jr("AsyncQueue",`${e}: ${t}`),al(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=na(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new qs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.W_=new Ze(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ho{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ho(e,n,qs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class K2{constructor(){this.queries=e_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ce(n),s=i.queries;i.queries=e_(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function e_(){return new Io(t=>qE(t),Hc)}async function xI(t,e){const n=ce(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new G2,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=xm(o,`Initialization of query '${Is(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Sm(n)}async function SI(t,e){const n=ce(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Q2(t,e){const n=ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&Sm(n)}function Y2(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Sm(t){t.Y_.forEach(e=>{e.next()})}var Mf,t_;(t_=Mf||(Mf={})).ea="default",t_.Cache="cache";class bI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Mf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.key=e}}class CI{constructor(e){this.key=e}}class X2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=GE(e),this.Ra=new qs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Zv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const g=i.get(h),_=Wc(this.query,m)?m:null,b=!!g&&this.mutatedKeys.has(g.key),k=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let C=!1;g&&_?g.data.isEqual(_.data)?b!==k&&(r.track({type:3,doc:_}),C=!0):this.ga(g,_)||(r.track({type:2,doc:_}),C=!0,(u&&this.Aa(_,u)>0||c&&this.Aa(_,c)<0)&&(l=!0)):!g&&_?(r.track({type:0,doc:_}),C=!0):g&&!_&&(r.track({type:1,doc:g}),C=!0,(u||c)&&(l=!0)),C&&(_?(o=o.add(_),s=k?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(_,b){const k=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return k(_)-k(b)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new ho(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Zv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new CI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new AI(r))}),n}ba(e){this.Ta=e.Ts,this.da=me();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ho.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class J2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Z2{constructor(e){this.key=e,this.va=!1}}class eP{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Io(l=>qE(l),Hc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ze(te.comparator),this.Na=new Map,this.La=new gm,this.Ba={},this.ka=new Map,this.qa=co.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function tP(t,e,n=!0){const r=DI(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await kI(r,e,n,!0),i}async function nP(t,e){const n=DI(t);await kI(n,e,!0,!1)}async function kI(t,e,n,r){const i=await x2(t.localStore,ar(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await rP(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&vI(t.remoteStore,i),l}async function rP(t,e,n,r,i){t.Ka=(m,g,_)=>async function(k,C,E,v){let A=C.view.ma(E);A.ns&&(A=await Qv(k.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,A)));const D=v&&v.targetChanges.get(C.targetId),L=v&&v.targetMismatches.get(C.targetId)!=null,V=C.view.applyChanges(A,k.isPrimaryClient,D,L);return r_(k,C.targetId,V.wa),V.snapshot}(t,m,g,_);const s=await Qv(t.localStore,e,!0),o=new X2(e,s.Ts),l=o.ma(s.documents),u=ul.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);r_(t,n,c.wa);const h=new J2(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function iP(t,e,n){const r=ce(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Hc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Vf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_m(r.remoteStore,i.targetId),Ff(r,i.targetId)}).catch(ol)):(Ff(r,i.targetId),await Vf(r.localStore,i.targetId,!0))}async function sP(t,e){const n=ce(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_m(n.remoteStore,r.targetId))}async function oP(t,e,n){const r=fP(t);try{const i=await function(o,l){const u=ce(o),c=mt.now(),h=l.reduce((_,b)=>_.add(b.key),me());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let b=Vr(),k=me();return u.cs.getEntries(_,h).next(C=>{b=C,b.forEach((E,v)=>{v.isValidDocument()||(k=k.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,b)).next(C=>{m=C;const E=[];for(const v of l){const A=Ck(v,m.get(v.key).overlayedDocument);A!=null&&E.push(new Ni(v.key,A,ME(A.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,E,l)}).next(C=>{g=C;const E=C.applyToLocalDocumentSet(m,k);return u.documentOverlayCache.saveOverlays(_,C.batchId,E)})}).then(()=>({batchId:g.batchId,changes:QE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ze(Ae)),c=c.insert(l,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await dl(r,i.changes),await Jc(r.remoteStore)}catch(i){const s=xm(i,"Failed to persist write");n.reject(s)}}async function PI(t,e){const n=ce(t);try{const r=await E2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ne(o.va):i.removedDocuments.size>0&&(Ne(o.va),o.va=!1))}),await dl(n,r,e)}catch(r){await ol(r)}}function n_(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ce(o);u.onlineState=l;let c=!1;u.queries.forEach((h,m)=>{for(const g of m.j_)g.Z_(l)&&(c=!0)}),c&&Sm(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aP(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ze(te.comparator);o=o.insert(s,Qt.newNoDocument(s,ue.min()));const l=me().add(s),u=new Qc(ue.min(),new Map,new Ze(Ae),o,l);await PI(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),bm(r)}else await Vf(r.localStore,e,!1).then(()=>Ff(r,e,n)).catch(ol)}async function lP(t,e){const n=ce(t),r=e.batch.batchId;try{const i=await w2(n.localStore,e);NI(n,r,null),RI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dl(n,i)}catch(i){await ol(i)}}async function uP(t,e,n){const r=ce(t);try{const i=await function(o,l){const u=ce(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(Ne(m!==null),h=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);NI(r,e,n),RI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await dl(r,i)}catch(i){await ol(i)}}function RI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function NI(t,e,n){const r=ce(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ff(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||OI(t,r)})}function OI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_m(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),bm(t))}function r_(t,e,n){for(const r of n)r instanceof AI?(t.La.addReference(r.key,e),cP(t,r)):r instanceof CI?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||OI(t,r.key)):ae()}function cP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),bm(t))}function bm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(ze.fromString(e)),r=t.qa.next();t.Na.set(r,new Z2(n)),t.Oa=t.Oa.insert(n,r),vI(t.remoteStore,new ai(ar(dm(n.path)),r,"TargetPurposeLimboResolution",sm.oe))}}async function dl(t,e,n){const r=ce(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){i.push(c);const m=vm.Wi(u.targetId,c);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const h=ce(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(c,g=>U.forEach(g.$i,_=>h.persistence.referenceDelegate.addReference(m,g.targetId,_)).next(()=>U.forEach(g.Ui,_=>h.persistence.referenceDelegate.removeReference(m,g.targetId,_)))))}catch(m){if(!al(m))throw m;J("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const _=h.os.get(g),b=_.snapshotVersion,k=_.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(g,k)}}}(r.localStore,s))}async function dP(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await pI(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new K(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await dl(n,r.hs)}}function hP(t,e){const n=ce(t),r=n.Na.get(e);if(r&&r.va)return me().add(r.key);{let i=me();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function DI(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aP.bind(null,e),e.Ca.d_=Q2.bind(null,e.eventManager),e.Ca.$a=Y2.bind(null,e.eventManager),e}function fP(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uP.bind(null,e),e}class pc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return _2(this.persistence,new y2,e.initialUser,this.serializer)}Ga(e){return new p2(ym.Zr,this.serializer)}Wa(e){return new b2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pc.provider={build:()=>new pc};class Uf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>n_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dP.bind(null,this.syncEngine),await q2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new K2}()}createDatastore(e){const n=Yc(e.databaseInfo.databaseId),r=function(s){return new P2(s)}(e.databaseInfo);return function(s,o,l,u){return new O2(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new L2(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>n_(this.syncEngine,n,0),function(){return Xv.D()?new Xv:new A2}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,h){const m=new eP(i,s,o,l,u,c);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ce(i);J("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await cl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Uf.provider={build:()=>new Uf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=LE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{J("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dh(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function i_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mP(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Jv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Jv(e.remoteStore,i)),t._onlineComponents=e}async function mP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await dh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await dh(t,new pc)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await dh(t,new pc);return t._offlineComponents}async function jI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await i_(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await i_(t,new Uf))),t._onlineComponents}function gP(t){return jI(t).then(e=>e.syncEngine)}async function $f(t){const e=await jI(t),n=e.eventManager;return n.onListen=tP.bind(null,e.syncEngine),n.onUnlisten=iP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sP.bind(null,e.syncEngine),n}function yP(t,e,n={}){const r=new _i;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new LI({next:g=>{h.Za(),o.enqueueAndForget(()=>SI(s,m)),g.fromCache&&u.source==="server"?c.reject(new K(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new bI(l,h,{includeMetadataChanges:!0,_a:!0});return xI(s,m)}(await $f(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vP(t,e,n,r){if(e===!0&&r===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function o_(t){if(!te.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function a_(t){if(te.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zc(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ed{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VC;switch(r.type){case"firstParty":return new $C(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=s_.get(n);r&&(J("ComponentProvider","Removing Datastore"),s_.delete(n),r.terminate())}(this),Promise.resolve()}}function _P(t,e,n,r={}){var i;const s=(t=kn(t,ed))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Gt.MOCK_USER;else{l=dA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Gt(c)}t._authCredentials=new MC(new DE(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class an{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class wi extends zr{constructor(e,n,r){super(e,n,dm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new te(e))}withConverter(e){return new wi(this.firestore,e,this._path)}}function hn(t,e,...n){if(t=wt(t),MI("collection","path",e),t instanceof ed){const r=ze.fromString(e,...n);return a_(r),new wi(t,null,r)}{if(!(t instanceof an||t instanceof wi))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return a_(r),new wi(t.firestore,null,r)}}function Jr(t,e,...n){if(t=wt(t),arguments.length===1&&(e=LE.newId()),MI("doc","path",e),t instanceof ed){const r=ze.fromString(e,...n);return o_(r),new an(t,null,new te(r))}{if(!(t instanceof an||t instanceof wi))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return o_(r),new an(t.firestore,t instanceof wi?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gI(this,"async_queue_retry"),this.Vu=()=>{const r=ch();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ch();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ch();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new _i;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!al(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw jr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Tm.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function c_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Mr extends ed{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new u_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u_(e),this._firestoreClient=void 0,await e}}}function wP(t,e){const n=typeof t=="object"?t:SE(),r=typeof t=="string"?t:"(default)",i=rm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=uA("firestore");s&&_P(i,...s)}return i}function td(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||EP(t),t._firestoreClient}function EP(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,h){return new ek(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,VI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new pP(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fo(Vt.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fo(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=/^__.*__$/;class TP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,n,this.fieldTransforms):new ll(e,this.data,n,this.fieldTransforms)}}class FI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ni(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Pm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Pm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return mc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(UI(this.Cu)&&IP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yc(e)}Qu(e,n,r,i=!1){return new Pm({Cu:e,methodName:n,qu:r,path:Rt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fl(t){const e=t._freezeSettings(),n=Yc(t._databaseId);return new xP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rm(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Nm("Data must be an object, but it was:",o,r);const l=zI(r,o);let u,c;if(s.merge)u=new An(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const g=Bf(e,m,n);if(!o.contains(g))throw new K(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);WI(h,g)||h.push(g)}u=new An(h),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new TP(new mn(l),u,c)}class nd extends Am{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nd}}function $I(t,e,n,r){const i=t.Qu(1,e,n);Nm("Data must be an object, but it was:",i,r);const s=[],o=mn.empty();hs(r,(u,c)=>{const h=Om(e,u,n);c=wt(c);const m=i.Nu(h);if(c instanceof nd)s.push(h);else{const g=pl(c,m);g!=null&&(s.push(h),o.set(h,g))}});const l=new An(s);return new FI(o,l,i.fieldTransforms)}function BI(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[Bf(e,r,n)],u=[i];if(s.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(Bf(e,s[g])),u.push(s[g+1]);const c=[],h=mn.empty();for(let g=l.length-1;g>=0;--g)if(!WI(c,l[g])){const _=l[g];let b=u[g];b=wt(b);const k=o.Nu(_);if(b instanceof nd)c.push(_);else{const C=pl(b,k);C!=null&&(c.push(_),h.set(_,C))}}const m=new An(c);return new FI(h,m,o.fieldTransforms)}function SP(t,e,n,r=!1){return pl(n,t.Qu(r?4:3,e))}function pl(t,e){if(HI(t=wt(t)))return Nm("Unsupported field value:",e,t),zI(t,e);if(t instanceof Am)return function(r,i){if(!UI(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=pl(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ik(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=mt.fromDate(r);return{timestampValue:hc(i.serializer,s)}}if(r instanceof mt){const s=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hc(i.serializer,s)}}if(r instanceof Cm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fo)return{bytesValue:aI(i.serializer,r._byteString)};if(r instanceof an){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof km)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return hm(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Zc(r)}`)}(t,e)}function zI(t,e){const n={};return jE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hs(t,(r,i)=>{const s=pl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function HI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof Cm||t instanceof fo||t instanceof an||t instanceof Am||t instanceof km)}function Nm(t,e,n){if(!HI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Zc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Bf(t,e,n){if((e=wt(e))instanceof hl)return e._internalPath;if(typeof e=="string")return Om(t,e);throw mc("Field path arguments must be of type string or ",t,!1,void 0,n)}const bP=new RegExp("[~\\*/\\[\\]]");function Om(t,e,n){if(e.search(bP)>=0)throw mc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hl(...e.split("."))._internalPath}catch{throw mc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new K(F.INVALID_ARGUMENT,l+t+u)}function WI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AP extends qI{data(){return super.data()}}function rd(t,e){return typeof e=="string"?Om(t,e):e instanceof hl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dm{}class Lm extends Dm{}function hh(t,e,...n){let r=[];e instanceof Dm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof jm).length,l=s.filter(u=>u instanceof id).length;if(o>1||o>0&&l>0)throw new K(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class id extends Lm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new id(e,n,r)}_apply(e){const n=this._parse(e);return KI(e._query,n),new zr(e.firestore,e.converter,Nf(e._query,n))}_parse(e){const n=fl(e.firestore);return function(s,o,l,u,c,h,m){let g;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){h_(m,h);const _=[];for(const b of m)_.push(d_(u,s,b));g={arrayValue:{values:_}}}else g=d_(u,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||h_(m,h),g=SP(l,o,m,h==="in"||h==="not-in");return pt.create(c,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fh(t,e,n){const r=e,i=rd("where",t);return id._create(i,r,n)}class jm extends Dm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)KI(o,u),o=Nf(o,u)}(e._query,n),new zr(e.firestore,e.converter,Nf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vm extends Lm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ga(s,o)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Eo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function CP(t,e="asc"){const n=e,r=rd("orderBy",t);return Vm._create(r,n)}class Mm extends Lm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Mm(e,n,r)}_apply(e){return new zr(e.firestore,e.converter,uc(e._query,this._limit,this._limitType))}}function kP(t){return Mm._create("limit",t,"F")}function d_(t,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new K(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WE(e)&&n.indexOf("/")!==-1)throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ze.fromString(n));if(!te.isDocumentKey(r))throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nv(t,new te(r))}if(n instanceof an)return Nv(t,n._key);throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zc(n)}.`)}function h_(t,e){if(!Array.isArray(t)||t.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KI(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PP{convertValue(e,n="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ot(o.doubleValue));return new km(s)}convertGeoPoint(e){return new Cm(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=am(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ha(e));default:return null}}convertTimestamp(e){const n=bi(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ze.fromString(e);Ne(fI(r));const i=new Wa(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(n)||jr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class QI extends qI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bu extends QI{data(e={}){return super.data(e)}}class YI{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ia(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bu(this._firestore,this._userDataWriter,r.key,r,new ia(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new bu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ia(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new bu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ia(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:RP(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}class Um extends PP{constructor(e){super(),this.firestore=e}convertBytes(e){return new fo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function NP(t){t=kn(t,zr);const e=kn(t.firestore,Mr),n=td(e),r=new Um(e);return GI(t._query),yP(n,t._query).then(i=>new YI(e,r,t,i))}function OP(t,e,n){t=kn(t,an);const r=kn(t.firestore,Mr),i=Fm(t.converter,e,n);return ml(r,[Rm(fl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,on.none())])}function ph(t,e,n,...r){t=kn(t,an);const i=kn(t.firestore,Mr),s=fl(i);let o;return o=typeof(e=wt(e))=="string"||e instanceof hl?BI(s,"updateDoc",t._key,e,n,r):$I(s,"updateDoc",t._key,e),ml(i,[o.toMutation(t._key,on.exists(!0))])}function DP(t){return ml(kn(t.firestore,Mr),[new Kc(t._key,on.none())])}function LP(t,e){const n=kn(t.firestore,Mr),r=Jr(t),i=Fm(t.converter,e);return ml(n,[Rm(fl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function Es(t,...e){var n,r,i;t=wt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||c_(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(c_(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let u,c,h;if(t instanceof an)c=kn(t.firestore,Mr),h=dm(t._key.path),u={next:m=>{e[o]&&e[o](jP(c,t,m))},error:e[o+1],complete:e[o+2]};else{const m=kn(t,zr);c=kn(m.firestore,Mr),h=m._query;const g=new Um(c);u={next:_=>{e[o]&&e[o](new YI(c,g,m,_))},error:e[o+1],complete:e[o+2]},GI(t._query)}return function(g,_,b,k){const C=new LI(k),E=new bI(_,C,b);return g.asyncQueue.enqueueAndForget(async()=>xI(await $f(g),E)),()=>{C.Za(),g.asyncQueue.enqueueAndForget(async()=>SI(await $f(g),E))}}(td(c),h,l,u)}function ml(t,e){return function(r,i){const s=new _i;return r.asyncQueue.enqueueAndForget(async()=>oP(await gP(r),i,s)),s.promise}(td(t),e)}function jP(t,e,n){const r=n.docs.get(e._key),i=new Um(t);return new QI(t,i,e._key,r,new ia(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=fl(e)}set(e,n,r){this._verifyNotCommitted();const i=mh(e,this._firestore),s=Fm(i.converter,n,r),o=Rm(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,on.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=mh(e,this._firestore);let o;return o=typeof(n=wt(n))=="string"||n instanceof hl?BI(this._dataReader,"WriteBatch.update",s._key,n,r,i):$I(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=mh(e,this._firestore);return this._mutations=this._mutations.concat(new Kc(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mh(t,e){if((t=wt(t)).firestore!==e)throw new K(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t){return td(t=kn(t,Mr)),new VP(t,e=>ml(t,e))}(function(e,n=!0){(function(i){wo=i})(_o),so(new rs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Mr(new FC(r.getProvider("auth-internal")),new zC(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),vi(Av,"4.7.3",e),vi(Av,"4.7.3","esm2017")})();var zf=function(t,e){return zf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},zf(t,e)};function pe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");zf(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var We=function(){return We=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},We.apply(this,arguments)};function $m(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function z(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(h){try{c(r.next(h))}catch(m){o(m)}}function u(h){try{c(r.throw(h))}catch(m){o(m)}}function c(h){h.done?s(h.value):i(h.value).then(l,u)}c((r=r.apply(t,e||[])).next())})}function H(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(h){return u([c,h])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function gl(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function lt(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function FP(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function XI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UP=XI,JI=new il("auth","Firebase",XI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new tm("@firebase/auth");function $P(t,...e){gc.logLevel<=ye.WARN&&gc.warn(`Auth (${_o}): ${t}`,...e)}function Au(t,...e){gc.logLevel<=ye.ERROR&&gc.error(`Auth (${_o}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,...e){throw Bm(t,...e)}function ur(t,...e){return Bm(t,...e)}function ZI(t,e,n){const r=Object.assign(Object.assign({},UP()),{[e]:n});return new il("auth","Firebase",r).create(e,{appName:t.name})}function Ei(t){return ZI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JI.create(t,...e)}function oe(t,e,...n){if(!t)throw Bm(e,...n)}function br(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Au(e),new Error(e)}function Ur(t,e){t||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function BP(){return f_()==="http:"||f_()==="https:"}function f_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BP()||mA()||"connection"in navigator)?navigator.onLine:!0}function HP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ur(n>e,"Short delay should be less than long delay!"),this.isMobile=hA()||gA()}get(){return zP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t,e){Ur(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=new yl(3e4,6e4);function sd(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xo(t,e,n,r,i={}){return tT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=sl(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return pA()||(c.referrerPolicy="no-referrer"),eT.fetch()(rT(t,t.config.apiHost,n,l),c)})}async function tT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},WP),e);try{const i=new GP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw su(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw su(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw su(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw su(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ZI(t,h,c);Fr(t,h)}}catch(i){if(i instanceof Br)throw i;Fr(t,"network-request-failed",{message:String(i)})}}async function nT(t,e,n,r,i={}){const s=await xo(t,e,n,r,i);return"mfaPendingCredential"in s&&Fr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function rT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?zm(t.config,i):`${t.config.apiScheme}://${i}`}class GP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ur(this.auth,"network-request-failed")),qP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function su(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ur(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(t,e){return xo(t,"POST","/v1/accounts:delete",e)}async function iT(t,e){return xo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QP(t,e=!1){const n=wt(t),r=await n.getIdToken(e),i=Hm(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:_a(gh(i.auth_time)),issuedAtTime:_a(gh(i.iat)),expirationTime:_a(gh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function gh(t){return Number(t)*1e3}function Hm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Au("JWT malformed, contained fewer than 3 sections"),null;try{const i=vE(n);return i?JSON.parse(i):(Au("Failed to decode base64 JWT payload"),null)}catch(i){return Au("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function p_(t){const e=Hm(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Br&&YP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function YP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_a(this.lastLoginAt),this.creationTime=_a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ya(t,iT(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?sT(s.providerUserInfo):[],l=ZP(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),h=u?c:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Wf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function JP(t){const e=wt(t);await yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sT(t){return t.map(e=>{var{providerId:n}=e,r=$m(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(t,e){const n=await tT(t,{},async()=>{const r=sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=rT(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",eT.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tR(t,e){return xo(t,"POST","/v2/accounts:revokeToken",sd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=p_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await eR(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Gs;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gs,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ar{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=$m(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ya(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QP(this,e)}reload(){return JP(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await yc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sr(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await Ya(this,KP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(l=n.tenantId)!==null&&l!==void 0?l:void 0,C=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:A,emailVerified:D,isAnonymous:L,providerData:V,stsTokenManager:I}=n;oe(A&&I,e,"internal-error");const w=Gs.fromJSON(this.name,I);oe(typeof A=="string",e,"internal-error"),Kr(m,e.name),Kr(g,e.name),oe(typeof D=="boolean",e,"internal-error"),oe(typeof L=="boolean",e,"internal-error"),Kr(_,e.name),Kr(b,e.name),Kr(k,e.name),Kr(C,e.name),Kr(E,e.name),Kr(v,e.name);const T=new Ar({uid:A,auth:e,email:g,emailVerified:D,displayName:m,isAnonymous:L,photoURL:b,phoneNumber:_,tenantId:k,stsTokenManager:w,createdAt:E,lastLoginAt:v});return V&&Array.isArray(V)&&(T.providerData=V.map(x=>Object.assign({},x))),C&&(T._redirectEventId=C),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new Gs;i.updateFromServerResponse(n);const s=new Ar({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await yc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?sT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Gs;l.updateFromIdToken(r);const u=new Ar({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Wf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=new Map;function Cr(t){Ur(t instanceof Function,"Expected a class definition");let e=m_.get(t);return e?(Ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,m_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oT.type="NONE";const g_=oT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ks{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Cu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Cu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ar._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ks(Cr(g_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Cr(g_);const o=Cu(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const h=await c._get(o);if(h){const m=Ar._fromJSON(e,h);c!==s&&(l=m),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ks(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ks(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hT(e))return"Blackberry";if(fT(e))return"Webos";if(lT(e))return"Safari";if((e.includes("chrome/")||uT(e))&&!e.includes("edge/"))return"Chrome";if(dT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aT(t=Zt()){return/firefox\//i.test(t)}function lT(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uT(t=Zt()){return/crios\//i.test(t)}function cT(t=Zt()){return/iemobile/i.test(t)}function dT(t=Zt()){return/android/i.test(t)}function hT(t=Zt()){return/blackberry/i.test(t)}function fT(t=Zt()){return/webos/i.test(t)}function Wm(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nR(t=Zt()){var e;return Wm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rR(){return yA()&&document.documentMode===10}function pT(t=Zt()){return Wm(t)||dT(t)||fT(t)||hT(t)||/windows phone/i.test(t)||cT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t,e=[]){let n;switch(t){case"Browser":n=y_(Zt());break;case"Worker":n=`${y_(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_o}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(t,e={}){return xo(t,"GET","/v2/passwordPolicy",sd(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=6;class aR{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:oR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v_(this),this.idTokenSubscription=new v_(this),this.beforeStateQueue=new iR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ks.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await iT(this,{idToken:e}),r=await Ar._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Sr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sr(this.app))return Promise.reject(Ei(this));const n=e?wt(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sr(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sr(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sR(this),n=new aR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new il("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await tR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cr(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Ks.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$P(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function od(t){return wt(t)}class v_{constructor(e){this.auth=e,this.observer=null,this.addObserver=SA(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uR(t){qm=t}function cR(t){return qm.loadJS(t)}function dR(){return qm.gapiScript}function hR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t,e){const n=rm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(sc(s,e??{}))return i;Fr(i,"already-initialized")}return n.initialize({options:e})}function pR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function mR(t,e,n){const r=od(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=gT(e),{host:o,port:l}=gR(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),yR()}function gT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gR(t){const e=gT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:__(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:__(o)}}}function __(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,n){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(t,e){return nT(t,"POST","/v1/accounts:signInWithIdp",sd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="http://localhost";class as extends yT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new as(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=$m(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new as(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Qs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Qs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qs(e,n)}buildRequest(){const e={requestUri:vR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends vT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends vl{constructor(){super("facebook.com")}static credential(e){return as._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ti.credential(e.oauthAccessToken)}catch{return null}}}ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return as._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ni.credential(n,r)}catch{return null}}}ni.GOOGLE_SIGN_IN_METHOD="google.com";ni.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends vl{constructor(){super("github.com")}static credential(e){return as._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.GITHUB_SIGN_IN_METHOD="github.com";ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends vl{constructor(){super("twitter.com")}static credential(e,n){return as._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ii.credential(n,r)}catch{return null}}}ii.TWITTER_SIGN_IN_METHOD="twitter.com";ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(t,e){return nT(t,"POST","/v1/accounts:signUp",sd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ar._fromIdTokenResponse(e,r,i),o=w_(r);return new Ci({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=w_(r);return new Ci({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function w_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(t){var e;if(Sr(t.app))return Promise.reject(Ei(t));const n=od(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ci({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await _R(n,{returnSecureToken:!0}),i=await Ci._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends Br{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,vc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new vc(e,n,r,i)}}function _T(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vc._fromErrorAndOperation(t,s,e,r):s})}async function ER(t,e,n=!1){const r=await Ya(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ci._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t,e,n=!1){const{auth:r}=t;if(Sr(r.app))return Promise.reject(Ei(r));const i="reauthenticate";try{const s=await Ya(t,_T(r,i,e,t),n);oe(s.idToken,r,"internal-error");const o=Hm(s.idToken);oe(o,r,"internal-error");const{sub:l}=o;return oe(t.uid===l,r,"user-mismatch"),Ci._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(t,e,n=!1){if(Sr(t.app))return Promise.reject(Ei(t));const r="signIn",i=await _T(t,r,e),s=await Ci._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function xR(t,e,n,r){return wt(t).onIdTokenChanged(e,n,r)}function SR(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}function bR(t,e,n,r){return wt(t).onAuthStateChanged(e,n,r)}const _c="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_c,"1"),this.storage.removeItem(_c),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=1e3,CR=10;class ET extends wT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);rR()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,CR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ET.type="LOCAL";const kR=ET;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT extends wT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}IT.type="SESSION";const TT=IT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ad(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await PR(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=Gm("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function NR(t){cr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function OR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LR(){return xT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="firebaseLocalStorageDb",jR=1,wc="firebaseLocalStorage",bT="fbase_key";class _l{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ld(t,e){return t.transaction([wc],e?"readwrite":"readonly").objectStore(wc)}function VR(){const t=indexedDB.deleteDatabase(ST);return new _l(t).toPromise()}function qf(){const t=indexedDB.open(ST,jR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wc,{keyPath:bT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wc)?e(r):(r.close(),await VR(),e(await qf()))})})}async function E_(t,e,n){const r=ld(t,!0).put({[bT]:e,value:n});return new _l(r).toPromise()}async function MR(t,e){const n=ld(t,!1).get(e),r=await new _l(n).toPromise();return r===void 0?null:r.value}function I_(t,e){const n=ld(t,!0).delete(e);return new _l(n).toPromise()}const FR=800,UR=3;class AT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>UR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ad._getInstance(LR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await OR(),!this.activeServiceWorker)return;this.sender=new RR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qf();return await E_(e,_c,"1"),await I_(e,_c),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>E_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>MR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>I_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ld(i,!1).getAll();return new _l(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AT.type="LOCAL";const $R=AT;new yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t,e){return e?Cr(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends yT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zR(t){return TR(t.auth,new Km(t),t.bypassAuthState)}function HR(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),IR(n,new Km(t),t.bypassAuthState)}async function WR(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),ER(n,new Km(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zR;case"linkViaPopup":case"linkViaRedirect":return WR;case"reauthViaPopup":case"reauthViaRedirect":return HR;default:Fr(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=new yl(2e3,1e4);class Fs extends CT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=Gm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qR.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="pendingRedirect",ku=new Map;class KR extends CT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ku.get(this.auth._key());if(!e){try{const r=await QR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ku.set(this.auth._key(),e)}return this.bypassAuthState||ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QR(t,e){const n=JR(e),r=XR(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function YR(t,e){ku.set(t._key(),e)}function XR(t){return Cr(t._redirectPersistence)}function JR(t){return Cu(GR,t.config.apiKey,t.name)}async function ZR(t,e,n=!1){if(Sr(t.app))return Promise.reject(Ei(t));const r=od(t),i=BR(r,e),o=await new KR(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=10*60*1e3;class tN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!kT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ur(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eN&&this.cachedEventUids.clear(),this.cachedEventUids.has(T_(e))}saveEventToCache(e){this.cachedEventUids.add(T_(e)),this.lastProcessedEventTime=Date.now()}}function T_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t,e={}){return xo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sN=/^https?/;async function oN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rN(t);for(const n of e)try{if(aN(n))return}catch{}Fr(t,"unauthorized-domain")}function aN(t){const e=Hf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!sN.test(n))return!1;if(iN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=new yl(3e4,6e4);function x_(){const t=cr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uN(t){return new Promise((e,n)=>{var r,i,s;function o(){x_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x_(),n(ur(t,"network-request-failed"))},timeout:lN.get()})}if(!((i=(r=cr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=cr().gapi)===null||s===void 0)&&s.load)o();else{const l=hR("iframefcb");return cr()[l]=()=>{gapi.load?o():n(ur(t,"network-request-failed"))},cR(`${dR()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Pu=null,e})}let Pu=null;function cN(t){return Pu=Pu||uN(t),Pu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=new yl(5e3,15e3),hN="__/auth/iframe",fN="emulator/auth/iframe",pN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gN(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zm(e,fN):`https://${t.config.authDomain}/${hN}`,r={apiKey:e.apiKey,appName:t.name,v:_o},i=mN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${sl(r).slice(1)}`}async function yN(t){const e=await cN(t),n=cr().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:gN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pN,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ur(t,"network-request-failed"),l=cr().setTimeout(()=>{s(o)},dN.get());function u(){cr().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_N=500,wN=600,EN="_blank",IN="http://localhost";class S_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TN(t,e,n,r=_N,i=wN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},vN),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Zt().toLowerCase();n&&(l=uT(c)?EN:n),aT(c)&&(e=e||IN,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[_,b])=>`${g}${_}=${b},`,"");if(nR(c)&&l!=="_self")return xN(e||"",l),new S_(null);const m=window.open(e||"",l,h);oe(m,t,"popup-blocked");try{m.focus()}catch{}return new S_(m)}function xN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="__/auth/handler",bN="emulator/auth/handler",AN=encodeURIComponent("fac");async function b_(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_o,eventId:i};if(e instanceof vT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",xA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof vl){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${AN}=${encodeURIComponent(u)}`:"";return`${CN(t)}?${sl(l).slice(1)}${c}`}function CN({config:t}){return t.emulator?zm(t,bN):`https://${t.authDomain}/${SN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="webStorageSupport";class kN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TT,this._completeRedirectFn=ZR,this._overrideRedirectResult=YR}async _openPopup(e,n,r,i){var s;Ur((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await b_(e,n,r,Hf(),i);return TN(e,o,Gm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await b_(e,n,r,Hf(),i);return NR(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ur(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await yN(e),r=new tN(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yh,{type:yh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[yh];o!==void 0&&n(!!o),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pT()||lT()||Wm()}}const PN=kN;var A_="@firebase/auth",C_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ON(t){so(new rs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mT(t)},c=new lR(r,i,s,u);return pR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),so(new rs("auth-internal",e=>{const n=od(e.getProvider("auth").getImmediate());return(r=>new RN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vi(A_,C_,NN(t)),vi(A_,C_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=5*60,LN=EE("authIdTokenMaxAge")||DN;let k_=null;const jN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LN)return;const i=n==null?void 0:n.token;k_!==i&&(k_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function VN(t=SE()){const e=rm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fR(t,{popupRedirectResolver:PN,persistence:[$R,kR,TT]}),r=EE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=jN(s.toString());SR(n,o,()=>o(n.currentUser)),xR(n,l=>o(l))}}const i=_E("auth");return i&&mR(n,`http://${i}`),n}function MN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}uR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ur("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",MN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ON("Browser");var Pt=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{},nn={searchParams:"URLSearchParams"in Pt,iterable:"Symbol"in Pt&&"iterator"in Symbol,blob:"FileReader"in Pt&&"Blob"in Pt&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in Pt,arrayBuffer:"ArrayBuffer"in Pt};function FN(t){return t&&DataView.prototype.isPrototypeOf(t)}if(nn.arrayBuffer)var UN=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],$N=ArrayBuffer.isView||function(t){return t&&UN.indexOf(Object.prototype.toString.call(t))>-1};function So(t){if(typeof t!="string"&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||t==="")throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function Qm(t){return typeof t!="string"&&(t=String(t)),t}function Ym(t){var e={next:function(){var n=t.shift();return{done:n===void 0,value:n}}};return nn.iterable&&(e[Symbol.iterator]=function(){return e}),e}function Et(t){this.map={},t instanceof Et?t.forEach(function(e,n){this.append(n,e)},this):Array.isArray(t)?t.forEach(function(e){if(e.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}Et.prototype.append=function(t,e){t=So(t),e=Qm(e);var n=this.map[t];this.map[t]=n?n+", "+e:e};Et.prototype.delete=function(t){delete this.map[So(t)]};Et.prototype.get=function(t){return t=So(t),this.has(t)?this.map[t]:null};Et.prototype.has=function(t){return this.map.hasOwnProperty(So(t))};Et.prototype.set=function(t,e){this.map[So(t)]=Qm(e)};Et.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)};Et.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),Ym(t)};Et.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),Ym(t)};Et.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),Ym(t)};nn.iterable&&(Et.prototype[Symbol.iterator]=Et.prototype.entries);function vh(t){if(!t._noBody){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}}function PT(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function BN(t){var e=new FileReader,n=PT(e);return e.readAsArrayBuffer(t),n}function zN(t){var e=new FileReader,n=PT(e),r=/charset=([A-Za-z0-9_-]+)/.exec(t.type),i=r?r[1]:"utf-8";return e.readAsText(t,i),n}function HN(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function P_(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function RT(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?typeof t=="string"?this._bodyText=t:nn.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:nn.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:nn.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():nn.arrayBuffer&&nn.blob&&FN(t)?(this._bodyArrayBuffer=P_(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):nn.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||$N(t))?this._bodyArrayBuffer=P_(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof t=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):nn.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},nn.blob&&(this.blob=function(){var t=vh(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=vh(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(nn.blob)return this.blob().then(BN);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var t=vh(this);if(t)return t;if(this._bodyBlob)return zN(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(HN(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},nn.formData&&(this.formData=function(){return this.text().then(GN)}),this.json=function(){return this.text().then(JSON.parse)},this}var WN=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function qN(t){var e=t.toUpperCase();return WN.indexOf(e)>-1?e:t}function ls(t,e){if(!(this instanceof ls))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var n=e.body;if(t instanceof ls){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new Et(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,!n&&t._bodyInit!=null&&(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new Et(e.headers)),this.method=qN(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in Pt){var s=new AbortController;return s.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+new Date().getTime());else{var i=/\?/;this.url+=(i.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}ls.prototype.clone=function(){return new ls(this,{body:this._bodyInit})};function GN(t){var e=new FormData;return t.trim().split("&").forEach(function(n){if(n){var r=n.split("="),i=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(s))}}),e}function KN(t){var e=new Et,n=t.replace(/\r?\n[\t ]+/g," ");return n.split("\r").map(function(r){return r.indexOf(`
`)===0?r.substr(1,r.length):r}).forEach(function(r){var i=r.split(":"),s=i.shift().trim();if(s){var o=i.join(":").trim();try{e.append(s,o)}catch(l){console.warn("Response "+l.message)}}}),e}RT.call(ls.prototype);function hr(t,e){if(!(this instanceof hr))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new Et(e.headers),this.url=e.url||"",this._initBody(t)}RT.call(hr.prototype);hr.prototype.clone=function(){return new hr(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Et(this.headers),url:this.url})};hr.error=function(){var t=new hr(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var QN=[301,302,303,307,308];hr.redirect=function(t,e){if(QN.indexOf(e)===-1)throw new RangeError("Invalid status code");return new hr(null,{status:e,headers:{location:t}})};var Bi=Pt.DOMException;try{new Bi}catch{Bi=function(e,n){this.message=e,this.name=n;var r=Error(e);this.stack=r.stack},Bi.prototype=Object.create(Error.prototype),Bi.prototype.constructor=Bi}function NT(t,e){return new Promise(function(n,r){var i=new ls(t,e);if(i.signal&&i.signal.aborted)return r(new Bi("Aborted","AbortError"));var s=new XMLHttpRequest;function o(){s.abort()}s.onload=function(){var c={statusText:s.statusText,headers:KN(s.getAllResponseHeaders()||"")};i.url.indexOf("file://")===0&&(s.status<200||s.status>599)?c.status=200:c.status=s.status,c.url="responseURL"in s?s.responseURL:c.headers.get("X-Request-URL");var h="response"in s?s.response:s.responseText;setTimeout(function(){n(new hr(h,c))},0)},s.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},s.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request timed out"))},0)},s.onabort=function(){setTimeout(function(){r(new Bi("Aborted","AbortError"))},0)};function l(c){try{return c===""&&Pt.location.href?Pt.location.href:c}catch{return c}}if(s.open(i.method,l(i.url),!0),i.credentials==="include"?s.withCredentials=!0:i.credentials==="omit"&&(s.withCredentials=!1),"responseType"in s&&(nn.blob?s.responseType="blob":nn.arrayBuffer&&(s.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof Et||Pt.Headers&&e.headers instanceof Pt.Headers)){var u=[];Object.getOwnPropertyNames(e.headers).forEach(function(c){u.push(So(c)),s.setRequestHeader(c,Qm(e.headers[c]))}),i.headers.forEach(function(c,h){u.indexOf(h)===-1&&s.setRequestHeader(h,c)})}else i.headers.forEach(function(c,h){s.setRequestHeader(h,c)});i.signal&&(i.signal.addEventListener("abort",o),s.onreadystatechange=function(){s.readyState===4&&i.signal.removeEventListener("abort",o)}),s.send(typeof i._bodyInit>"u"?null:i._bodyInit)})}NT.polyfill=!0;Pt.fetch||(Pt.fetch=NT,Pt.Headers=Et,Pt.Request=ls,Pt.Response=hr);var zi;(function(t){t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR"})(zi||(zi={}));var YN=function(){function t(e){e===void 0&&(e=zi.INFO),this.logLevel=e,this._debug=console.debug,this._info=console.info,this._warn=console.warn,this._error=console.error}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<=zi.DEBUG&&(e.unshift("[DEBUG]"),this._debug.apply(this,lt([],ve(e),!1)))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<=zi.INFO&&(e.unshift("[INFO]"),this._info.apply(this,lt([],ve(e),!1)))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<=zi.WARN&&(e.unshift("[WARN]"),this._warn.apply(this,lt([],ve(e),!1)))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<=zi.ERROR&&(e.unshift("[ERROR]"),this._error.apply(this,lt([],ve(e),!1)))},t}(),Ie=new YN(3),XN=function(t,e){this._driver=t,this.liff=e,this.hooks=this._driver.hooks,this.internalHooks=this._driver.internalHooks},JN=function(t,e){this._driver=t,this.liff=e,this.hooks=this._driver.hooks},ZN=function(){function t(e,n){this.pluginCtx=new JN(e,n),this.moduleCtx=new XN(e,n)}return Object.defineProperty(t.prototype,"pluginContext",{get:function(){return this.pluginCtx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"moduleContext",{get:function(){return this.moduleCtx},enumerable:!1,configurable:!0}),t}(),eO=function(){function t(){this.modules=new Map,this.hooks={},this.internalHooks={}}return t.prototype.addModule=function(e,n){this.modules.set(e,n),n.hooks&&(this.hooks[e]=Object.entries(n.hooks).reduce(function(r,i){var s,o=ve(i,2),l=o[0],u=o[1];return We(We({},r),((s={})[l]=u.on.bind(u),s))},{})),"internalHooks"in n&&n.internalHooks&&(this.internalHooks[e]=Object.entries(n.internalHooks).reduce(function(r,i){var s,o=ve(i,2),l=o[0],u=o[1];return We(We({},r),((s={})[l]=u.on.bind(u),s))},{}))},t.prototype.hasModule=function(e){return this.modules.has(e)},t}(),he=function(){},R_=function(t){return t instanceof he},OT=function(t){function e(n,r,i){var s=t.call(this)||this;return s.driver=n,s.contextHolder=r,s.option=i,s}return pe(e,t),e.prototype.install=function(){return this.factory(this.driver,this.contextHolder)},Object.defineProperty(e.prototype,"name",{get:function(){return"use"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOption",{get:function(){return{namespacePrefix:"$"}},enumerable:!1,configurable:!0}),e.prototype.factory=function(n,r){var i=Object.assign({},this.defaultOption,this.option).namespacePrefix;return function(s,o){if(!s||typeof s.install!="function"||typeof s.name!="string")return Ie.warn("To install the plugin, you need to define the `name` property and the `install` method."),this;var l=R_(s)?s.name:"".concat(i).concat(s.name);if(n.hasModule(l))return this;var u=R_(s)?s.install.call(s,r.moduleContext,o):s.install.call(s,r.pluginContext,o);return this["".concat(l)]?(Ie.warn("There is a duplicate plugin name. `".concat(l,"` plugin namespace will be override.")),this["".concat(l)]=u):u!==void 0&&(this["".concat(l)]=u),n.addModule(l,s),this}},e}(he),DT,tO=new Promise(function(t){DT=t}),Nt="UNKNOWN",vt="UNAUTHORIZED",Ge="INVALID_ARGUMENT",ut="INIT_FAILED",Pe="FORBIDDEN",fr="INVALID_CONFIG",Mi="INVALID_ID_TOKEN",Gf="CREATE_SUBWINDOW_FAILED",Kf="EXCEPTION_IN_SUBWINDOW",LT="liffEvent",Zn="LIFF_STORE",Ec="https://liff.".concat("line.me","/"),Qf="https://miniapp.".concat("line.me","/"),Se={ACCESS_TOKEN:"accessToken",ID_TOKEN:"IDToken",DECODED_ID_TOKEN:"decodedIDToken",FEATURE_TOKEN:"featureToken",LOGIN_TMP:"loginTmp",CONFIG:"config",CONTEXT:"context",EXPIRES:"expires",RAW_CONTEXT:"rawContext",CLIENT_ID:"clientId",IS_SUBSEQUENT_LIFF_APP:"isSubsequentLiffApp",MST_CHALLENGE:"mstChallenge",MSIT:"msit",MST:"mst",MST_VERIFIER:"mstVerifier",APP_DATA:"appData"},N_="isInClient",Xm=["context_token","feature_token","access_token","id_token","client_id","mst_verifier","mst_challenge","msit"],nO=5,rO=["liff.ref.source","liff.ref.medium","liff.ref.campaign","liff.ref.term","liff.ref.content"],iO="liff://subwindow",Oe={INIT:"init",SUBMIT:"submit",CANCEL:"cancel",CLOSE:"close",ERROR:"error"},sO=100,jT=100,VT="liff.subwindow",Ic="healthCheck",oO=["profile","chat_message.write","openid","email"];function O_(t){return window.atob(t.replace(/-/g,"+").replace(/_/g,"/"))}var _h={decode:O_,encode:function(t){return window.btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},decodeUnicode:function(t){var e=O_(t).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join("");return decodeURIComponent(e)}};function $n(t,e){if(t===e)return 0;for(var n=t.split("."),r=e.split("."),i=Math.max(n.length,r.length),s=0;s<i;s++){n[s]||(n[s]="0"),r[s]||(r[s]="0");var o=parseInt(n[s])-parseInt(r[s]);if(o!==0)return o>0?1:-1}return 0}function D_(t){var e=t.replace("#","").match(/.{2}/g)||[];if(e.length!==4)return Ie.warn("convertArgbToRgba: Received invalid ARGB color"),"";var n=function(o){var l=Ki(o);return Math.round(l/255*100)/100}(e[0]),r=Ki(e[1]),i=Ki(e[2]),s=Ki(e[3]);return"rgba(".concat(r,", ").concat(i,", ").concat(s,", ").concat(n,")")}function Ki(t){return parseInt(t,16)}function L_(t){var e=t.replace("#","").match(/.{2}/g)||[];if(e.length!==3)return Ie.warn("convertArgbToRgba: Received invalid hex color"),"";var n=Ki(e[0]),r=Ki(e[1]),i=Ki(e[2]);return"".concat(n,", ").concat(r,", ").concat(i)}function j_(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}var Jm={get:function(t){var e=new RegExp("(?:(?:^|.*;\\s*)".concat(t,"\\s*\\=\\s*([^;]*).*$)|^.*$"));return document.cookie.replace(e,"$1")},set:function(t,e,n){var r=t+"="+e;if(n)for(var i in n){var s=n[i]?"=".concat(n[i]):"";r+="; ".concat(i).concat(s)}Ie.debug("set cookie",r),document.cookie=r},remove:function(t,e){var n="".concat(t,"=; expires=Thu, 01 Jan 1970 00:00:00 GMT");if(e)for(var r in e)n+="; ".concat(r,"=").concat(e[r]);document.cookie=n}},aO=new Set(["400","401","403","404","429","500"]),MT=function(t){function e(n,r,i){var s=t.call(this,r,i)||this;return s.code=n,s}return pe(e,t),e}(Error);function M(t,e,n){return n!=null&&n.cause&&console.error("This is the cause of LiffError described below.",n.cause),new MT(t,e||"",n||{})}function Zm(t){var e=t.match(/([^-]+)-[^-]+/);return e&&e[1]}function lO(t){var e="";return t.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").forEach(function(n){e+=String.fromCharCode(parseInt(n))}),window.btoa(e)}var FT=function(){function t(){this.map={}}return t.prototype.clear=function(){this.map={}},t.prototype.getItem=function(e){var n=this.map[e];return n===void 0?null:n},t.prototype.setItem=function(e,n){this.map[e]=n},t.prototype.removeItem=function(e){delete this.map[e]},t.prototype.key=function(e){var n=Object.keys(this.map)[e];return n===void 0?null:n},Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.map).length},enumerable:!1,configurable:!0}),t}(),wh,Yt={parse:function(t){return t.replace(/^\?/,"").replace(/^#\/?/,"").split(/&+/).filter(function(e){return e.length>0}).reduce(function(e,n){var r=ve(n.split("=").map(decodeURIComponent),2),i=r[0],s=r[1],o=e[i];return Array.isArray(o)?o.push(s):Object.prototype.hasOwnProperty.call(e,i)?e[i]=[o,s]:e[i]=s,e},{})},stringify:function(t){return Object.keys(t).map(function(e){var n=t[e],r=function(i){return i!==void 0?"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(i)):encodeURIComponent(e)};return Array.isArray(n)?n.map(function(i){return r(i)}).join("&"):r(n)}).join("&")}},V_="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function uO(){return window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967296}function po(t){for(var e="",n=0;n<t;n++)e+=V_[Math.floor(uO()*V_.length)];return e}function UT(t){var e=new URL(t),n=e.hash.slice(1).split("&").filter(function(r){return!Xm.some(function(i){return r.startsWith("".concat(i,"="))})}).join("&");return e.hash=n,e.toString()}function cO(t){var e=new URL(t);return e.toString().replace(new RegExp(String.raw(M_||(M_=FP(["^",""],["^",""])),e.origin)),"")}var dO=function(t){var e=UT(t);if(e!==t){var n=cO(e);window.history.replaceState(history.state,"",n)}};function Xa(t,e){if(!t)throw new Error("addParamsToUrl: invalid URL");var n=new URL(t);return Object.entries(e).forEach(function(r){var i=ve(r,2),s=i[0],o=i[1];n.searchParams.set(s,o)}),n.toString()}var M_,F_=((wh={})[Ec]=function(){var t=U_(Ec);return new RegExp("^".concat(t,"(\\d+-\\w+)"))},wh[Qf]=function(){var t=U_(Qf);return new RegExp("^".concat(t,"((\\d+-\\w+)|(\\w+$))"))},wh);function eg(t){for(var e in F_){var n=t.match(F_[e]());if(n)return n[1]}return null}function U_(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function hO(t){var e=t.match(/^(https?:\/\/.*?)\//);return e&&e[1]||""}function Yf(t){return t.startsWith("line:")}function tg(t){return t===void 0&&(t=window.navigator.userAgent),/ipad/.test(t.toLowerCase())}function $T(t){return t===void 0&&(t=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+/.test(t)}function BT(t){return t===void 0&&(t=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+ LIFF/.test(t)}function fO(t){return t===void 0&&(t=window.navigator.userAgent),/LIFF\/SubWindow/.test(t)}var zT=function(){return typeof window>"u"},ou=null;function Ce(){return ou===null&&(ou=BT()||$T()&&/[#|&]access_token=/.test(location.hash)||sessionStorage.getItem("".concat(Zn,":").concat(N_))==="1",sessionStorage.setItem("".concat(Zn,":").concat(N_),ou?"1":"0")),!!ou}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"isInClient"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Ce()}},e})(he);function rt(){var t;return(t=window.__liffConfig)!==null&&t!==void 0?t:{}}function pO(t){window.__liffConfig=t}function mO(t,e){if(!e)throw M(fr,"liffId is necessary for liff.init()");var n=(Ce()?sessionStorage:localStorage).getItem("".concat(Zn,":").concat(e,":").concat(t));try{return n===null?null:JSON.parse(n)}catch{return null}}function wn(t){return mO(t,rt().liffId)}function On(t,e){var n=rt().liffId;if(!n)throw M(fr,"liffId is necessary for liff.init()");(Ce()?sessionStorage:localStorage).setItem("".concat(Zn,":").concat(n,":").concat(t),JSON.stringify(e))}function It(){return wn(Se.CONTEXT)}function ng(t){On(Se.CONTEXT,t)}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getContext"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return It()}},e})(he);function HT(){return((It()||{}).d||{}).aId}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getAId"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return HT()}},e})(he);function WT(){return((It()||{}).d||{}).autoplay||!1}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getIsVideoAutoPlay"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return WT()}},e})(he);function qT(){return(It()||{}).profilePlus}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getProfilePlus"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return qT()}},e})(he);function gO(){return!!wn(Se.IS_SUBSEQUENT_LIFF_APP)}function yO(t){On(Se.IS_SUBSEQUENT_LIFF_APP,t)}function vO(){return wn(Se.APP_DATA)}function Xf(t){On(Se.APP_DATA,t)}function _O(){return wn(Se.MST_VERIFIER)}function wO(t){On(Se.MST_VERIFIER,t)}function EO(){return wn(Se.MSIT)}function IO(t){On(Se.MSIT,t)}function ud(){return wn(Se.MST)}function TO(t){On(Se.MST,t)}function GT(){return wn(Se.MST_CHALLENGE)}function xO(t){On(Se.MST_CHALLENGE,t)}function SO(){return wn(Se.CLIENT_ID)}function KT(t){On(Se.CLIENT_ID,t)}function bO(){return wn(Se.RAW_CONTEXT)}function wl(){return wn(Se.FEATURE_TOKEN)}function $_(t){On(Se.FEATURE_TOKEN,t)}function cd(){return wn(Se.ID_TOKEN)}function QT(t){On(Se.ID_TOKEN,t)}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getIDToken"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return cd()}},e})(he);function pr(){return wn(Se.ACCESS_TOKEN)}function rg(t){On(Se.ACCESS_TOKEN,t)}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getAccessToken"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return pr()}},e})(he);function YT(t){var e=rt().liffId;if(!e)throw M(fr,"liffId is necessary for liff.init()");(Ce()?sessionStorage:localStorage).removeItem("".concat(Zn,":").concat(e,":").concat(t))}function XT(){return wn(Se.LOGIN_TMP)}function AO(t){On(Se.LOGIN_TMP,t)}function B_(){YT(Se.LOGIN_TMP)}function JT(t){var e=rt();Jm.set("".concat(Zn,":").concat(Se.EXPIRES,":").concat(e.liffId),t.getTime(),{expires:t.toUTCString(),path:"/",secure:null})}function CO(){var t=rt();return Jm.get("".concat(Zn,":").concat(Se.EXPIRES,":").concat(t.liffId))}function kO(){var t=rt();Jm.remove("".concat(Zn,":").concat(Se.EXPIRES,":").concat(t.liffId),{path:"/"})}function dd(){return wn(Se.DECODED_ID_TOKEN)}function ZT(t){On(Se.DECODED_ID_TOKEN,t)}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getDecodedIDToken"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return dd()}},e})(he);function PO(){Object.keys(Se).forEach(function(t){YT(Se[t])}),kO()}function Ot(){return!!pr()}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"isLoggedIn"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Ot()}},e})(he);function hd(){return"2.27.3"}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getVersion"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return"2.27.3"}},e})(he);var RO=function(){function t(){}return t.prototype.invoke=function(){return fO()},t}(),NO=function(){function t(e){this.storage=e}return Object.defineProperty(t,"IN_SUB_WINDOW_KEY",{get:function(){return"inSubWindow"},enumerable:!1,configurable:!0}),t.prototype.invoke=function(){return new URLSearchParams(window.location.search).has(VT)&&this.setInSubWindow(!0),!(!this.getInSubWindow()&&!this.getSubWindowIdentifier())},t.prototype.getInSubWindow=function(){var e=this.storage.getItem("".concat(Zn,":").concat(this.getLiffId(),":").concat(t.IN_SUB_WINDOW_KEY));return e!==null&&JSON.parse(e)},t.prototype.getSubWindowIdentifier=function(){var e,n,r="liff.subwindow.identifier",i=new URLSearchParams(window.location.search);return i.get(r)||(e=r,(n=i.get("liff.state"))?new URLSearchParams(n).get(e):null)||null},t.prototype.setInSubWindow=function(e){this.storage.setItem("".concat(Zn,":").concat(this.getLiffId(),":").concat(t.IN_SUB_WINDOW_KEY),String(e))},t.prototype.getLiffId=function(){var e=rt().liffId;if(!e)throw M(fr,"liffId is necessary for liff.init()");return e},t}(),OO=function(t){function e(){var n=t.call(this)||this;return zT()?n.impl={invoke:function(){return!1}}:Ce()?n.impl=new RO:n.impl=new NO(window.sessionStorage),n}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"isSubWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return this.impl.invoke.bind(this.impl)},e}(he),e1=new OO,ir=e1.install();function mr(){var t=navigator.userAgent.match(/Line\/\d+(\.\d+)*/i);return t?t[0].slice(5):null}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getLineVersion"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return mr()}},e})(he);var Eh;function Xt(){if(!Eh){var t=window.navigator.userAgent.toLowerCase();Eh=/iphone|ipad|ipod/.test(t)?"ios":/android/.test(t)?"android":"web"}return Eh}(function(t){function e(){return t.call(this)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getOS"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Xt()}},e})(he);function t1(t){var e,n=It();return(e=n==null?void 0:n.availability)===null||e===void 0?void 0:e[t]}function jn(t,e,n){var r=t1(t),i=n||t;if(!r)return{available:!1,error:{code:Pe,message:"".concat(i," is not allowed in this LIFF app")}};var s=r.minVer,o=r.unsupportedFromVer,l=!s||function(c,h){var m=mr();return!!m&&!(h&&$n(m,h)>0)&&$n(m,c)>=0}(s,o),u=Ce();return u&&!l?{available:!1,error:{code:Pe,message:"".concat(i," is unavailable in this client version.")}}:r.permission?u&&l||e?{available:!0}:{available:!1,error:{code:Pe,message:"".concat(i," is not allowed in external browser")}}:{available:!1,error:{code:Pe,message:"".concat(i," is not allowed in this LIFF app")}}}var z_=function(){return Ot()?!BT()&&$T()?{available:!1,error:{code:Pe,message:"Subwindow is not supported in this browser"}}:ir()?{available:!1,error:{code:Pe,message:"this api can be only called in parent window"}}:jn("subwindowOpen",!0):{available:!1,error:{code:vt,message:"Need access_token for api call, Please login first"}}},DO=["subwindowOpen","shareTargetPicker","multipleLiffTransition","scanCode","scanCodeV2","getAdvertisingId","addToHomeScreen","bluetoothLeFunction","skipChannelVerificationScreen","createShortcutOnHomeScreen","internalCreateShortcutOnHomeScreen","iap"],Tn={scanCode:function(){return jn("scanCode")},getAdvertisingId:function(){return jn("getAdvertisingId")},bluetoothLeFunction:function(){return jn("bluetoothLeFunction")},shareTargetPicker:function(){return ir()?{available:!1,error:{code:Pe,message:"this api can be only called in parent window"}}:Ot()?jn("shareTargetPicker",!0):{available:!1,error:{code:vt,message:"Need access_token for api call, Please login first"}}},multipleLiffTransition:function(){var t=t1("multipleLiffTransition");return t&&t.permission?Ce()?{available:!0}:{available:!1,error:{code:Pe,message:"multipleLiffTransition is available only in the LINE App browser"}}:{available:!1,error:{code:Pe,message:"multipleLiffTransition is not allowed in this LIFF app"}}},subwindowOpen:z_,scanCodeV2:function(){if(!Ot())return{available:!1,error:{code:vt,message:"Need access_token for api call, Please login first"}};var t=z_();return t.available?jn("scanCodeV2",!0):t},addToHomeScreen:function(){return ir()?{available:!1,error:{code:Pe,message:"this api can be only called in parent window"}}:jn("addToHomeScreen")},skipChannelVerificationScreen:function(){var t=It();return t?t.type==="square_chat"?{available:!1,error:{code:Pe,message:"skipChannelVerificationScreen is not allowed in OpenChat"}}:jn("skipChannelVerificationScreen"):{available:!1,error:{code:Pe,message:"Context is not found"}}},createShortcutOnHomeScreen:function(){if(ir())return{available:!1,error:{code:Pe,message:"this api can be only called in parent window"}};if(!Ot())return{available:!1,error:{code:vt,message:"Need access_token for api call, Please login first"}};var t=Xt();return t!=="android"&&t!=="ios"?{available:!1,error:{code:Pe,message:"this api can be only called in mobile device"}}:jn("addToHomeV2",!0,"createShortcutOnHomeScreen")},internalCreateShortcutOnHomeScreen:function(){if(ir())return{available:!1,error:{code:Pe,message:"this api can be only called in parent window"}};if(!Ot())return{available:!1,error:{code:vt,message:"Need access_token for api call, Please login first"}};var t=Xt();if(t!=="android"&&t!=="ios")return{available:!1,error:{code:Pe,message:"this api can be only called in mobile device"}};var e=jn("addToHomeV2",!0,"internalCreateShortcutOnHomeScreen");return e.available?jn("addToHomeLineScheme",!0,"internalCreateShortcutOnHomeScreen"):e},iap:function(){return Ce()?Ot()?ir()?{available:!1,error:{code:Pe,message:"this api can be only called in parent window"}}:jn("iap",!1,"In-App Purchase"):{available:!1,error:{code:vt,message:"Need access_token for api call, Please login first"}}:{available:!1,error:{code:Pe,message:"In-App Purchase is not allowed in external browser"}}}},Ln=function(t){return function(){var e=t();if(!e.available)throw M(e.error.code,e.error.message)}},Pr={scanCode:Ln(Tn.scanCode),getAdvertisingId:Ln(Tn.getAdvertisingId),bluetoothLeFunction:Ln(Tn.bluetoothLeFunction),shareTargetPicker:Ln(Tn.shareTargetPicker),multipleLiffTransition:Ln(Tn.multipleLiffTransition),subwindowOpen:Ln(Tn.subwindowOpen),scanCodeV2:Ln(Tn.scanCodeV2),addToHomeScreen:Ln(Tn.addToHomeScreen),skipChannelVerificationScreen:Ln(Tn.skipChannelVerificationScreen),createShortcutOnHomeScreen:Ln(Tn.createShortcutOnHomeScreen),internalCreateShortcutOnHomeScreen:Ln(Tn.internalCreateShortcutOnHomeScreen),iap:Ln(Tn.iap)};function El(t){if(!function(n){return DO.some(function(r){return r===n})}(t))throw M(Ge,"Unexpected API name.");var e=Tn[t];return!e||e().available}(function(t){function e(){var n=t.apply(this,lt([],ve(arguments),!1))||this;return n.hooks={},n}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"isApiAvailable"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(n){return El(n)}},e})(he);var LO=function(){function t(){}return t.prototype.invoke=function(e){var n=Pr[e];return!!n&&(n(),!0)},t}(),jO=function(){function t(e){this.liff=e}return t.prototype.invoke=function(e){return this.liff.checkFeature(e)},t}(),Ih=function(){function t(e){$n(hd(),t.SDK_VERSION_SUPPORTING_NEW)>=0?this.impl=new LO:this.impl=new jO(e)}return Object.defineProperty(t,"SDK_VERSION_SUPPORTING_NEW",{get:function(){return"2.11.0"},enumerable:!1,configurable:!0}),t.prototype.invoke=function(e){return this.impl.invoke(e)},t}(),Jf=function(t,e){return Jf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Jf(t,e)};function VO(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(c){try{u(r.next(c))}catch(h){s(h)}}function l(c){try{u(r.throw(c))}catch(h){s(h)}}function u(c){var h;c.done?i(c.value):(h=c.value,h instanceof n?h:new n(function(m){m(h)})).then(o,l)}u((r=r.apply(t,[])).next())})}function MO(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(u){return function(c){return function(h){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&h[0]?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return o.label++,{value:h[1],done:!1};case 5:o.label++,r=h[1],h=[0];continue;case 7:h=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){o=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){o.label=h[1];break}if(h[0]===6&&o.label<i[1]){o.label=i[1],i=h;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(h);break}i[2]&&o.ops.pop(),o.trys.pop();continue}h=e.call(t,o)}catch(m){h=[6,m],r=0}finally{n=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([u,c])}}}var n1=!1,FO=function(){return n1},UO=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}Jf(n,r),n.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"_legacyExtensionsEnabled"},enumerable:!1,configurable:!0}),e.prototype.install=function(){n1=!0},e}(he);function $O(){var t;return Xt()==="ios"?(t=mr())&&$n(t,"9.19.0")<0?"https://static.line-scdn.net/liff/edge/2/ios-918-extensions_2_22_0.js":"https://static.line-scdn.net/liff/edge/2/ios-extensions_2_22_0.js":"https://static.line-scdn.net/liff/edge/2/non-ios-extensions_2_22_0.js"}function BO(){return FO()?function(){return VO(this,void 0,void 0,function(){return MO(this,function(t){switch(t.label){case 0:return[3,2];case 1:return[2,t.sent().default];case 2:return[2,new Promise(function(e,n){var r=document.createElement("script"),i=$O();r.onload=function(){var s=window.liffClientExtension;s?e(s):n(M(ut,"Unable to load client features. (Extension is empty)"))},r.onerror=function(s){n(M(ut,"Unable to load client features.",{cause:s}))},r.src=i,r.type="text/javascript",document.body.appendChild(r)})]}})})}():Promise.resolve(void 0)}function ig(){PO()}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"logout"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return ig()}},e})(he);var zO=/([\x90\x9D\x81\x8D\x8F<"{|}>\\^`]|\n|.*#.*#|%(?![0-9A-Fa-f]{2})[^%]{0,2})/,r1=function(t){if(zO.test(t))throw M(Ge,"invalid URL.");var e=new URL(t),n=e.username,r=e.password,i=e.hash,s=e.search;return{username:n,password:r,pathname:e.pathname,hash:i,origin:e.origin,search:s}},H_=function(t){return t.substring(1).split("&").filter(function(e){return!/^liff\./.test(e)&&!!e})},HO=function(t,e){var n=t.substring(e.length);return n==="/"?"":(n.length>0&&n[0]!=="/"&&(n="/"+n),n)},W_=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},WO=function(t,e){var n=function(r,i){for(var s=lt([],ve(r),!1),o=0;o<i.length;o++){var l=i[o],u=s.indexOf(l);u>-1&&s.splice(u,1)}return s}(function(r){var i,s,o=r.replace(/\+/g,"%2B"),l=new URLSearchParams(o),u=[];try{for(var c=gl(l.entries()),h=c.next();!h.done;h=c.next()){var m=ve(h.value,2),g=m[0],_=m[1];u.push("".concat(W_(g),"=").concat(W_(_)))}}catch(k){i={error:k}}finally{try{h&&!h.done&&(s=c.return)&&s.call(c)}finally{if(i)throw i.error}}if(u.length===0)return[""];var b=r.split("&");return u.map(function(k,C){return k.endsWith("=")&&!b[C].endsWith("=")?k.slice(0,-1):k})}(H_(t).join("&")),H_(e)).join("&");return n!==""?"?".concat(n):""},qO=function(t){var e=new RegExp("^".concat(Xm.join("|"))),n=t.substring(1).split("&").filter(function(r){return!e.test(r)&&!!r}).join("&");return n?"#".concat(n):""},i1=function(t,e){return e.indexOf(t)===0&&(t.endsWith("/")&&(t=t.substring(0,t.length-1)),e[t.length]===void 0||e[t.length]==="/")},sg=function(t,e){var n=r1(t),r=new URL(e);if(n.username!==r.username||n.password!==r.password||r.origin!==n.origin||!i1(r.pathname,n.pathname))throw M(Ge,"invalid URL.")},GO=function(t){function e(){var n=t.apply(this,lt([],ve(arguments),!1))||this;return n.extraParams="",n.getAndValidateContext=function(){var r=It();if(!r)throw M(ut,"Could not get Context from server.");if(!r.endpointUrl)throw M(ut,"Could not get endpointUrl from server.");if(!r.permanentLinkPattern)throw M(ut,"Could not get permanentLinkPattern from server.");return r},n.createUrl=function(){var r=n.getAndValidateContext(),i=window.location,s=i.pathname,o=i.search,l=i.hash,u=i.origin,c=new URL(r.endpointUrl);if(c.origin!==u||!i1(c.pathname,s))throw M(fr,"Current page is not under entrypoint.");var h=s.substring(c.pathname.length);h.length>0&&h[0]!=="/"&&(h="/"+h);var m=new RegExp("^".concat(Xm.join("|"))),g=l.substring(1).split("&").filter(function(V){return!m.test(V)&&!!V}).join("&"),_=g===c.hash.substring(1)?"":g,b=function(V){return V.substring(1).split("&").filter(function(I){return!/liff\.state/.test(I)&&!!I})},k=b(o),C=b(c.search);n.extraParams&&k.push(n.extraParams);for(var E=0;E<C.length;E++){var v=C[E],A=k.indexOf(v);A>-1&&k.splice(A,1)}var D=k.join("&"),L="".concat(h).concat(D!==""?"?".concat(D):"").concat(_?"#".concat(_):"");return"".concat(Ec).concat(rt().liffId).concat(L)},n.createUrlBy=function(r){return z(n,void 0,void 0,function(){var i,s,o,l,u,c;return H(this,function(h){if(!(i=rt().liffId))throw M(ut,"Should run after liff init.");return s=this.getAndValidateContext(),sg(r,s.endpointUrl),o=r1(r),l=new URL(s.endpointUrl),u=s.miniDomainAllowed?Qf:Ec,c=s.miniDomainAllowed&&s.miniAppId?s.miniAppId:i,[2,u.concat(c,HO(o.pathname,l.pathname),WO(o.search,l.search),qO(o.hash))]})})},n.setExtraQueryParam=function(r){n.extraParams=r},n.install=function(){return{createUrl:n.createUrl,createUrlBy:n.createUrlBy,setExtraQueryParam:n.setExtraQueryParam}},n}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"permanentLink"},enumerable:!1,configurable:!0}),e}(he),KO=new GO;function QO(t){return z(this,void 0,void 0,function(){var e,n,r;return H(this,function(i){switch(i.label){case 0:if(!t.ok)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.json()];case 2:return[2,i.sent()];case 3:return i.sent(),[2,t];case 4:return e=String(t.status),n=aO.has(e)?e:Nt,[4,t.json().catch(function(){throw M(n,t.statusText)})];case 5:throw r=i.sent(),M(r.error||r.errorCode||n,r.error_description||r.message)}})})}function s1(t){var e=function(n){if(n)return n;var r=pr();if(!r)throw M(vt,"Need access_token for api call, Please login first");return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(r)}}(t&&t.headers);return We(We({},t),{headers:e})}function ct(t,e){var n;try{n=s1(e)}catch(r){return Promise.reject(r)}return fetch(t,n).then(QO)}function YO(t,e){var n;try{n=s1(e)}catch(r){return Promise.reject(r)}return fetch(t,n)}function tt(t){var e=t.subdomain,n=e===void 0?"api":e,r=t.pathname;return"https://".concat(n,".").concat("line.me","/").concat(r)}var XO={token:tt({pathname:"oauth2/v2.1/token"}),certs:tt({pathname:"oauth2/v2.1/certs"}),"openid-configuration":tt({subdomain:"access",pathname:".well-known/openid-configuration"}),authorize:tt({subdomain:"access",pathname:"liff/v1/authorize"}),profile:tt({pathname:"v2/profile"}),message:tt({pathname:"message/v3/share"}),friendship:tt({pathname:"friendship/v1/status"}),shareTargetPicker:tt({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker"}),shareTargetPickerOtt:tt({pathname:"liff/v2/apps"}),shareTargetPickerResult:tt({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker/result"}),apps:tt({pathname:"liff/v2/apps"}),subWindowGetMSIT:tt({pathname:"liff/v2/sub/msit"}),subWindowGetMSTByMSIT:tt({pathname:"liff/v2/sub/mst"}),subWindowSubscribe:tt({subdomain:"liff",pathname:"liff/v2/sub/waitResult"}),subWindowPost:tt({pathname:"liff/v2/sub/result"}),subWindowGetAppData:tt({pathname:"liff/v2/sub/appData"}),subWindowGetOrigin:function(t){return tt({pathname:"liff/v2/sub/".concat(t,"/origin")})},accessTokenVerify:tt({pathname:"oauth2/v2.1/verify"}),unauthorizedPermissions:tt({subdomain:"liff",pathname:"liff/v2/incrementalAgreement/unauthorizedPermissions"}),permanentLink:tt({subdomain:"liff",pathname:"liff/v2/permanentLink"}),createShortcutOnHomeScreen:tt({subdomain:"liff-shortcut",pathname:"api/shortcut"}),iapVirtualConfirm:tt({pathname:"iap/v1/product/virtualConfirm"})};function Ye(t){return XO[t]}function og(t){return ct("".concat(Ye("accessTokenVerify"),"?access_token=").concat(encodeURIComponent(t)),{headers:{"Content-Type":"application/json",Accept:"application/json"}})}var o1="liff.subwindow.identifier",Zf="liff.subwindow.cryptokey",Ru=We(We({},Oe),{GET_DATA:"getData",SET_DATA:"setData",NOT_FOUND:"notFound",TEARDOWN:"teardown"}),Tc={BROADCAST:"broadcast",COMMAND:"command"},wa={MAIN:"main",SUB:"sub"},a1=function(t){return z(void 0,void 0,void 0,function(){var e;return H(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,window.crypto.subtle.importKey("jwk",{kty:"oct",k:t,alg:"A128GCM",ext:!0},{name:"AES-GCM"},!1,["encrypt","decrypt"])];case 1:return[2,n.sent()];case 2:throw e=n.sent(),M(Nt,e);case 3:return[2]}})})},JO=function(t,e,n){return z(void 0,void 0,void 0,function(){var r,i,s,o;return H(this,function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),r=new TextEncoder().encode(t),[4,a1(e)];case 1:return i=l.sent(),[4,window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},i,new TextEncoder().encode(n))];case 2:return s=l.sent(),[2,btoa(new Uint8Array(s).reduce(function(u,c){return u+String.fromCharCode(c)},""))];case 3:throw o=l.sent(),M(Nt,o);case 4:return[2]}})})},ZO=function(t,e,n){return z(void 0,void 0,void 0,function(){var r,i,s,o,l,u,c;return H(this,function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),r=new TextEncoder().encode(t),[4,a1(e)];case 1:for(i=h.sent(),s=atob(n),o=new Uint8Array(s.length),l=0;l<s.length;l++)o[l]=s.charCodeAt(l);return[4,window.crypto.subtle.decrypt({name:"AES-GCM",iv:r},i,o.buffer)];case 2:return u=h.sent(),[2,new TextDecoder().decode(new Uint8Array(u))];case 3:throw c=h.sent(),M(Nt,c);case 4:return[2]}})})},eD=function(t,e){return Ea(t)===Ea(e)},Ea=function(t){return"".concat(t.identifier,"-").concat(t.action,"-").concat(t.timestamp)},tD=function(t){return Object.keys(Oe).map(function(e){return Oe[e]}).includes(t)?Tc.BROADCAST:Tc.COMMAND};function nD(){var t=document.createElement("form");t.method="POST",t.action="$MESSAGE_HANDLER_URL";var e=document.createElement("input");e.type="hidden",e.name="identifier",e.value="$IDENTIFIER",t.appendChild(e),document.body.appendChild(t),t.submit()}var rD=function(t){t===void 0&&(t=wa.MAIN);var e=this;this.identification={identifier:"",cryptoKey:""},this.messageHandlerInstance=null,this.listeners=new Map,this.sentMessages=[],this.generateIdentification=function(){return z(e,void 0,void 0,function(){var n,r,i,s,o;return H(this,function(l){switch(l.label){case 0:return n=new URLSearchParams(window.location.search),r=function(u){var c=n.get("liff.state");return c?new URLSearchParams(c).get(u):null},i=this,o={identifier:this.windowType===wa.MAIN?po(12):n.get("liff.subwindow.identifier")||r("liff.subwindow.identifier")||""},this.windowType!==wa.MAIN?[3,2]:[4,z(void 0,void 0,void 0,function(){var u,c,h;return H(this,function(m){switch(m.label){case 0:return m.trys.push([0,3,,4]),[4,window.crypto.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"])];case 1:return u=m.sent(),[4,window.crypto.subtle.exportKey("jwk",u)];case 2:if(!(c=m.sent())||!c.k)throw M(Nt,"failed to generate key");return[2,c.k];case 3:throw h=m.sent(),M(Nt,h);case 4:return[2]}})})];case 1:return s=l.sent(),[3,3];case 2:s=n.get(Zf)||r(Zf)||"",l.label=3;case 3:return i.identification=(o.cryptoKey=s,o),[2]}})})},this.hasIdentification=function(){var n=e.identification,r=n.identifier,i=n.cryptoKey;return typeof r=="string"&&typeof i=="string"&&r.length>0&&i.length>0},this.isReady=function(){return e.hasIdentification()&&!!e.messageHandlerInstance},this.setup=function(){return z(e,void 0,void 0,function(){var n,r,i,s,o,l=this;return H(this,function(u){switch(u.label){case 0:return this.messageHandlerInstance?[2]:[4,this.generateIdentification()];case 1:if(u.sent(),!(n=this.identification.identifier))return[2];if(r=/^[a-zA-Z0-9]+$/gm,!n.match(r))throw M(Nt,"Invalid identifier");return(i=document.createElement("iframe")).style.display="none",i.src="about:blank",document.body.appendChild(i),(o=i==null?void 0:i.contentWindow)===null||o===void 0||o.window.eval("(".concat(nD.toString().replace("$MESSAGE_HANDLER_URL","".concat("https://liff-subwindow.line.me/liff/v2/sub/messageHandler")).replace("$IDENTIFIER",n.split("'")[0]),")()")),s="iframe-".concat(n,"-ready"),[4,new Promise(function(c){var h=function(m){m.data[s]&&(l.messageHandlerInstance=i,window.addEventListener("message",l.proxyToListeners),c(),document.removeEventListener("message",h))};window.addEventListener("message",h)})];case 2:return[2,u.sent()]}})})},this.teardown=function(){return z(e,void 0,void 0,function(){var n,r;return H(this,function(i){switch(i.label){case 0:return this.isReady()?[4,this.send({eventName:Ru.TEARDOWN})]:[3,2];case 1:i.sent(),window.removeEventListener("message",this.proxyToListeners),this.listeners.clear(),(r=(n=this.messageHandlerInstance)===null||n===void 0?void 0:n.parentNode)===null||r===void 0||r.removeChild(this.messageHandlerInstance),this.messageHandlerInstance=null,i.label=2;case 2:return[2]}})})},this.listen=function(n){e.listeners.set(n,n)},this.listenRepliedEvent=function(n,r){var i=function(s){s.replyTarget&&eD(s.replyTarget,n)&&(r(s),e.listeners.delete(i))};e.listeners.set(i,i)},this.send=function(n){return z(e,void 0,void 0,function(){var r,i,s,o,l=this;return H(this,function(u){switch(u.label){case 0:if(!this.isReady())throw M("message bus is not ready to send message");return i={action:tD(n.eventName),identifier:this.identification.identifier||"",timestamp:new Date().getTime()},[4,this.getEncryptedContext(n)];case 1:return i.context=u.sent(),r=i,(o=(s=this.messageHandlerInstance)===null||s===void 0?void 0:s.contentWindow)===null||o===void 0||o.postMessage({messageBusEvent:r},"*"),this.sentMessages.push(Ea(r)),[4,new Promise(function(c){l.listenRepliedEvent(r,function(h){c(h.context)})})];case 2:return[2,u.sent()]}})})},this.reply=function(n,r){return z(e,void 0,void 0,function(){var i,s,o,l;return H(this,function(u){switch(u.label){case 0:if(!this.isReady())throw M("message bus is not ready to send message");if(!n.identifier||!n.timestamp)throw M(Nt,"target message is not valid");return s={action:Tc.BROADCAST},[4,this.getEncryptedContext(r)];case 1:return s.context=u.sent(),s.identifier=this.identification.identifier||"",s.timestamp=new Date().getTime(),s.replyTarget={action:n.action,identifier:n.identifier,timestamp:n.timestamp},i=s,(l=(o=this.messageHandlerInstance)===null||o===void 0?void 0:o.contentWindow)===null||l===void 0||l.postMessage({messageBusEvent:i},"*"),this.sentMessages.push(Ea(i)),[2]}})})},this.setData=function(n,r){n===void 0&&(n="appData"),e.send({eventName:Ru.SET_DATA,key:n,data:r})},this.getData=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return z(e,lt([],ve(n),!1),void 0,function(i){return i===void 0&&(i="appData"),H(this,function(s){switch(s.label){case 0:return[4,this.send({eventName:Ru.GET_DATA,key:i})];case 1:return[2,s.sent()]}})})},this.proxyToListeners=function(n){return z(e,void 0,void 0,function(){var r,i=this;return H(this,function(s){return r=n.data.messageBusEvent,n.origin!=="https://liff-subwindow.line.me"?[2]:r?(this.sentMessages.includes(Ea(r))||r.identifier!==this.identification.identifier||r.action!==Tc.BROADCAST&&!r.replyTarget||this.listeners.forEach(function(o){return z(i,void 0,void 0,function(){var l,u,c;return H(this,function(h){switch(h.label){case 0:return l=o,u=[We({},r)],c={},[4,this.getDecryptedContext(r.context)];case 1:return l.apply(void 0,[We.apply(void 0,u.concat([(c.context=h.sent(),c)]))]),[2]}})})}),[2]):[2]})})},this.getEncryptedContext=function(n){return z(e,void 0,void 0,function(){var r,i,s,o,l,u,c;return H(this,function(h){switch(h.label){case 0:return r=this.identification,i=r.identifier,s=r.cryptoKey,l=(o=JSON).stringify,c={eventName:n.eventName,key:n.key?n.key:void 0},n.data?[4,JO(i,s,JSON.stringify(n.data))]:[3,2];case 1:return u=h.sent(),[3,3];case 2:u=void 0,h.label=3;case 3:return[2,l.apply(o,[(c.data=u,c)])]}})})},this.getDecryptedContext=function(n){return z(e,void 0,void 0,function(){var r,i,s,o,l,u,c,h;return H(this,function(m){switch(m.label){case 0:return r=this.identification,i=r.identifier,s=r.cryptoKey,(o=JSON.parse(n)).data&&typeof o.data=="string"?(h=(c=JSON).parse,[4,ZO(i,s,o.data)]):[3,2];case 1:return u=h.apply(c,[m.sent()]),[3,3];case 2:u=void 0,m.label=3;case 3:return l=u,[2,We(We({},o),{data:l})]}})})},this.windowType=t};function iD(t){return new CustomEvent(LT,{detail:t})}(function(){if(typeof window<"u"&&typeof window.CustomEvent!="function"){let e=function(n,r){var i=r||{},s=i.bubbles,o=s!==void 0&&s,l=i.cancelable,u=l!==void 0&&l,c=i.detail,h=c===void 0?void 0:c,m=document.createEvent("CustomEvent");return m.initCustomEvent(n,o,u,h),m};var t=e;e.prototype=Event.prototype,window.CustomEvent=e}})();var Ss={},q_=!1;function ag(t,e){q_||(q_=!0,window.addEventListener(LT,function(n){n&&n.detail&&n.detail.type&&Ss[n.detail.type]&&Ss[n.detail.type].forEach(function(r){return r(n)})})),Ss[t]?Ss[t].push(e):Ss[t]=[e]}function lg(t,e){var n=Ss[t];if(n&&Array.isArray(n)){var r=n.indexOf(e);r>=0&&n.splice(r,1)}}function sD(t){var e={};try{e=JSON.parse(t)}catch(r){throw M(Ge,r.message)}var n=iD(e);Ie.debug("[client dispatchEvent to js]",{type:n.type,detail:n.detail}),window.dispatchEvent(n)}function l1(t,e,n){e===void 0&&(e={}),n===void 0&&(n="");var r=wl();if(!r)throw M(Pe,"Invalid featureToken for client features");if(!window._liff||!window._liff.postMessage)throw M(Ge,"postMessage is not available from client");Ie.debug("[js postMessage to client]",t,n,e),window._liff.postMessage(t,r,n,JSON.stringify(e))}function bo(t,e,n){return e===void 0&&(e={}),n===void 0&&(n={once:!0}),wl()?(n=We({callbackId:po(12),once:!0},n),new Promise(function(r,i){var s=function(o){if(o&&o.detail){var l=o.detail.callbackId===n.callbackId,u=typeof o.detail.callbackId!="string";(l||u)&&(n.once&&lg(t,s),Ie.debug("[callback detail]",o.detail),o.detail.error?i(o.detail.error):o.detail.data?r(o.detail.data):i(o.detail))}i()};ag(t,s),l1(t,e,n.callbackId)})):Promise.reject(M(Pe,"Invalid featureToken for client features"))}function Ys(){var t=mr();t!==null&&(Xt()==="ios"&&$n(t,"9.19")>=0||Xt()==="android"&&$n(t,"11.6.0")>=0)?location.href="liff://close":window._liff&&window._liff.postMessage?t!==null&&$n(t,"10.15.0")>=0?Xt()==="ios"?window._liff.postMessage("closeWindow",""):window._liff.postMessage("closeWindow","","",""):bo("closeWindow"):window.close()}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"closeWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Ys()}},e})(he);function u1(t){var e=Ye("subWindowGetOrigin");return ct(e(t))}var Ii={};function mo(t,e){t&&Ii[t]&&Ii[t].forEach(function(n){n(e)})}function c1(t,e){Ii[t]||(Ii[t]=[]),Ii[t].push(e)}function d1(t,e){if(Ii[t]){var n=Ii[t].indexOf(e);n>=0&&Ii[t].splice(n,1)}}var h1,f1,p1,m1,ep,g1=function(){function t(e){this.storage=e}return t.prototype.getItem=function(e){return this.storage.getItem("".concat(this.getKeyPrefix(),":").concat(e))},t.prototype.setItem=function(e,n){this.storage.setItem("".concat(this.getKeyPrefix(),":").concat(e),n)},t.prototype.removeItem=function(e){this.storage.removeItem("".concat(this.getKeyPrefix(),":").concat(e))},t.prototype.clear=function(){this.storage.clear()},t.prototype.getKeyPrefix=function(){return"".concat(Zn,":").concat(this.getLiffId())},t.prototype.getLiffId=function(){var e=rt().liffId;if(!e)throw M(fr,"liffId is necessary for liff.init()");return e},t}(),y1=new g1(new FT);function xc(){var t=y1.getItem("subWindowStatusUpdated");return t!==null&&JSON.parse(t)}function us(t){y1.setItem("subWindowStatusUpdated",String(t))}function tp(t){h1=t}function Ia(){return h1}function np(){return p1}function G_(){return m1}function v1(){return z(this,arguments,void 0,function(t){return t===void 0&&(t=wa.MAIN),H(this,function(e){switch(e.label){case 0:return[4,(ep=new rD(t)).setup()];case 1:return e.sent(),[2,ep]}})})}function Ao(){return ep}var oD=new FT,_1=new g1(zT()?oD:window.sessionStorage);function aD(t){_1.setItem("mainWindowOrigin",t)}function w1(){return _1.getItem("mainWindowOrigin")}function E1(t){return z(this,arguments,void 0,function(e,n){var r,i,s,o,l,u,c,h;return n===void 0&&(n={}),H(this,function(m){switch(m.label){case 0:if((r=Ao())!=null&&r.isReady())return[3,5];if(i=JSON.stringify(n),s=rt().liffId,o=w1(),!window.opener||!o||!s)throw M(Kf);l=!1,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,u1(s)];case 2:return u=m.sent(),l=u.subwindowCommonModule,[3,4];case 3:throw c=m.sent(),Ie.debug(c),M(Kf);case 4:return h=l?o:location.origin,[2,new Promise(function(g){window.addEventListener("message",function _(b){lD(b)&&(window.removeEventListener("message",_),g({status:e,result:i}))}),window.opener.postMessage({status:e,result:i},h)})];case 5:return r.send({eventName:e,data:n}),[4,new Promise(function(g){setTimeout(g,500)})];case 6:return m.sent(),[2,{status:e,result:JSON.stringify(n)}]}})})}function lD(t){return!(!t.data||typeof t.data.type!="string"||![Oe.SUBMIT,Oe.CANCEL].includes(t.data.type))}function ug(t){var e,n=G_();if(t.origin===n){var r=t.data;if(r){var i,s=r.status,o=r.result;try{i=JSON.parse(o||"{}")}catch{i={}}switch(s){case Ic:window.clearInterval(np()),cg();break;case Oe.CANCEL:case Oe.SUBMIT:us(!0),window.clearInterval(np()),window.removeEventListener("message",ug),mo(s,i),(e=Ia())===null||e===void 0||e.postMessage({type:s},G_());break;default:Ie.debug("unexpected message")}}}}var uD=function(t){return z(void 0,void 0,void 0,function(){var e,n,r,i;return H(this,function(s){if(xc())return[2];switch(e=t.context,n=e.eventName,r=e.data,i=Ao(),n){case Oe.INIT:T1(!r.hasOpener);break;case Oe.CANCEL:case Oe.SUBMIT:us(!0),mo(n,r),i==null||i.reply(t,{eventName:n});break;case Oe.CLOSE:xc()===!1&&(us(!0),mo(Oe.CLOSE,{})),cg()}return[2]})})};function I1(){window.clearInterval(f1),window.clearInterval(np()),window.removeEventListener("message",ug)}function T1(t){if(t===void 0&&(t=!1),I1(),us(!1),t){var e=Ia();e&&(e.close(),tp(null))}}function cg(){return z(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return(t=Ao())?[4,t.teardown()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}function cD(t){return z(this,void 0,void 0,function(){var e,n,r,i,s,o,l,u,c,h,m,g;return H(this,function(_){switch(_.label){case 0:return(e=eg(t.url))?(T1(!0),[4,cg()]):[2,Promise.reject(M(Ge,"params.url must be liff url or mini url"))];case 1:return _.sent(),tp(Xt()!=="ios"||tg()?window.open("","liffsubwindow","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):window.open()),n=t.url,r=t.appData,(i=new URL(n)).searchParams.append(VT,"true"),[4,v1()];case 2:return s=_.sent(),i.searchParams.append(o1,s.identification.identifier),i.searchParams.append(Zf,s.identification.cryptoKey),i.hostname=function(k){var C=ve(k.split(".")),E=C[0],v=C.slice(1);return lt(["".concat(E,"-ext")],ve(v),!1).join(".")}(i.hostname),o=i.toString(),[4,u1(e)];case 3:if(l=_.sent(),u=l.origin,c=l.subwindowCommonModule,!(h=Ia()))throw M(Gf);if(!c)return h.close(),[2];(function(k){m1=k})(u),s.listen(uD),s.setData("appData",r),window.addEventListener("message",ug),_.label=4;case 4:return _.trys.push([4,6,,7]),[4,(g=t.onBeforeTransition)===null||g===void 0?void 0:g.call(t)];case 5:return _.sent(),[3,7];case 6:throw m=_.sent(),h.close(),m;case 7:return h.location.href=o,b=function(k,C){var E=Ia(),v={type:Ic};return C&&(v.message=JSON.stringify(C)),window.setInterval(function(){E==null||E.postMessage(v,k)},jT)}(u,r),p1=b,function(k){f1=k}(window.setInterval(function(){var k=Ia();k&&k.closed&&(I1(),tp(null),xc()===!1&&(us(!0),mo(Oe.CLOSE,{})))},sO)),[2]}var b})})}var Qo=null;function x1(t){return z(this,void 0,void 0,function(){var e,n,r,i,s,o,l,u,c,h,m,g,_,b,k=this;return H(this,function(C){switch(C.label){case 0:if(e=t.msit,n=t.mstChallenge,r=t.reconnectCount,i=r===void 0?0:r,s=function(){return z(k,void 0,void 0,function(){return H(this,function(E){switch(E.label){case 0:return[4,(v=1e3,new Promise(function(A){return setTimeout(A,v)}))];case 1:return E.sent(),[4,x1({msit:e,mstChallenge:n,onSuccess:t.onSuccess,onError:t.onError,reconnectCount:i+1})];case 2:return E.sent(),[2]}var v})})},o=function(){for(var E=[],v=0;v<arguments.length;v++)E[v]=arguments[v];Qo=null,t.onSuccess.apply(t,lt([],ve(E),!1))},l=function(){for(var E=[],v=0;v<arguments.length;v++)E[v]=arguments[v];Qo=null,t.onError.apply(t,lt([],ve(E),!1))},u=Date.now(),Qo===null&&(Qo=u),c=u-Qo,i>=10||c>6e5)return l(M(Nt,"Failed to connect")),[2];C.label=1;case 1:return C.trys.push([1,3,,5]),[4,YO(Ye("subWindowSubscribe"),{method:"POST",body:JSON.stringify({msit:e,mstChallenge:n})})];case 2:return h=C.sent(),[3,5];case 3:return C.sent(),[4,s()];case 4:return C.sent(),[2];case 5:return h.status>=500?[4,s()]:[3,7];case 6:return C.sent(),[3,17];case 7:return h.status>=400&&500>h.status?[4,K_(h)]:[3,9];case 8:return g=C.sent(),m=g?M(Ge,g.errorDetail):M(Nt,"Some error happened in the server"),l(m),[3,17];case 9:return h.status!==200?[3,16]:[4,K_(h)];case 10:if(!(g=C.sent()))return l(M(Nt,"Some error happened in the server")),[2];switch(_=g.status,b=g.result,_){case Oe.ERROR:return[3,11];case Oe.CLOSE:case Oe.CANCEL:case Oe.SUBMIT:return[3,13]}return[3,14];case 11:return[4,s()];case 12:return C.sent(),[3,15];case 13:return o(_,b),[3,15];case 14:l(M(Nt,"Some error happened in the server")),C.label=15;case 15:return[3,17];case 16:l(M(Nt,"Some error happened in the server")),C.label=17;case 17:return[2]}})})}function K_(t){return z(this,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t.json()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,null];case 3:return[2]}})})}function dD(t){var e={};return Object.keys(t).forEach(function(n){n==="closeButtonColor"?t[n]==="white"?e[n]="#ffffff":e[n]="#000000":e[n]=t[n]}),e}var hD={height:"full",closeButtonPosition:"right",closeButtonColor:"black",closeButtonLabel:""};function fD(t){var e=t.appData,n=t.native,r=rt().liffId,i=GT(),s=eg(t.url);if(!r)return Promise.reject(M(vt,"liffId is invalid"));if(!i)return Promise.reject(M(vt,"mst_challenge is invalid"));if(!s)return Promise.reject(M(Ge,"params.url must be liff url or mini url"));var o=Object.assign({},hD,n);return function(l){var u=l.mainLiffId,c=l.subLiffId,h=l.mstChallenge,m=l.appData,g=l.view;return u&&h?ct(Ye("subWindowGetMSIT"),{method:"POST",body:JSON.stringify({mainLiffId:u,subLiffId:c,mstChallenge:h,appData:m,view:g})}):Promise.reject(M(Ge,"no proper argument"))}({mainLiffId:r,subLiffId:s,mstChallenge:i,appData:e,view:dD(o)}).then(function(l){var u=l.msit;return x1({msit:u,mstChallenge:i,onSuccess:function(c,h){mo(c,h)},onError:function(c){mo(Oe.ERROR,c)}}),u}).then(function(l){return function(u,c){return z(this,void 0,void 0,function(){var h,m,g;return H(this,function(_){switch(_.label){case 0:return h=u.url,(m=new URLSearchParams).set("msit",c),[4,(g=u.onBeforeTransition)===null||g===void 0?void 0:g.call(u)];case 1:return _.sent(),location.href="".concat(iO,"?url=").concat(encodeURIComponent(h),"&").concat(m.toString()),[2]}})})}(t,l)})}function S1(t){return Pr.subwindowOpen(),Ce()?fD(t):cD(t)}function dg(t){if(!t.mst||!t.status)return Promise.reject(M(Ge,"no proper argument"));var e=JSON.stringify(t);return ct(Ye("subWindowPost"),{method:"POST",body:e})}function fd(){if(!ir())throw M(vt,"this api can be only called in child window")}function b1(t){return t===void 0&&(t={}),fd(),Ce()?function(){return z(this,arguments,void 0,function(e){var n,r;return e===void 0&&(e={}),H(this,function(i){switch(i.label){case 0:return(n=ud())?[4,dg({mst:n,status:Oe.CANCEL,result:e})]:[2,Promise.reject(M(vt,"mst is invalid"))];case 1:return r=i.sent(),us(!0),[2,r]}})})}(t):function(e){return e===void 0&&(e={}),E1(Oe.CANCEL,e)}(t)}function A1(t){return t===void 0&&(t={}),fd(),Ce()?function(){return z(this,arguments,void 0,function(e){var n,r;return e===void 0&&(e={}),H(this,function(i){switch(i.label){case 0:return(n=ud())?[4,dg({mst:n,status:Oe.SUBMIT,result:e})]:[2,Promise.reject(M(vt,"mst is invalid"))];case 1:return r=i.sent(),us(!0),[2,r]}})})}(t):function(e){return e===void 0&&(e={}),E1(Oe.SUBMIT,e)}(t)}function C1(){return fd(),Ce()?function(){return z(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return xc()!==!1?[3,2]:(t=ud())?[4,dg({mst:t,status:Oe.CLOSE,result:{}})]:[2,Promise.reject(M(vt,"mst is invalid"))];case 1:e.sent(),e.label=2;case 2:return Ys(),[2]}})})}():function(){return z(this,void 0,void 0,function(){var t;return H(this,function(e){return(t=Ao())!=null&&t.isReady()?(t.send({eventName:Oe.CLOSE}),[2,new Promise(function(n){setTimeout(function(){Ys(),n()},jT)})]):(Ys(),[2,Promise.resolve()])})})}()}function k1(){return fd(),function(){var t,e=vO();try{t=e?JSON.parse(e):{}}catch{t={}}return Promise.resolve(t)}()}function pD(t){var e=t.msit,n=t.mstVerifier;return e&&n?ct(Ye("subWindowGetMSTByMSIT"),{method:"POST",body:JSON.stringify({msit:e,mstVerifier:n})}):Promise.reject(M(Ge,"no proper argument"))}function mD(t){var e=t.mst;return e?ct(Ye("subWindowGetAppData"),{method:"POST",body:JSON.stringify({mst:e})}):Promise.reject(M(Ge,"no proper argument"))}var Sn={on:c1,off:d1,open:S1,cancel:b1,submit:A1,close:C1,getAppData:k1};(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"subWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){var n=this;return{on:c1.bind(this),off:d1.bind(this),open:function(r){return S1.call(n,We(We({},r),{onBeforeTransition:void 0}))},cancel:b1.bind(this),submit:A1.bind(this),close:C1.bind(this),getAppData:k1.bind(this)}},e})(he);var P1={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.sha256=n()})(Cx,function(){var e=function n(r){function i(P,N){return P>>>N|P<<32-N}for(var s=Math.pow,o=s(2,32),l="length",u,c,h="",m=[],g=r[l]*8,_=n.h=n.h||[],b=n.k=n.k||[],k=b[l],C={},E=2;k<64;E++)if(!C[E]){for(u=0;u<313;u+=E)C[u]=E;_[k]=s(E,.5)*o|0,b[k++]=s(E,.3333333333333333)*o|0}for(r+="";r[l]%64-56;)r+="\0";for(u=0;u<r[l];u++){if(c=r.charCodeAt(u),c>>8)return;m[u>>2]|=c<<(3-u)%4*8}for(m[m[l]]=g/o|0,m[m[l]]=g,c=0;c<m[l];){var v=m.slice(c,c+=16),A=_;for(_=_.slice(0,8),u=0;u<64;u++){var D=v[u-15],L=v[u-2],V=_[0],I=_[4],w=_[7]+(i(I,6)^i(I,11)^i(I,25))+(I&_[5]^~I&_[6])+b[u]+(v[u]=u<16?v[u]:v[u-16]+(i(D,7)^i(D,18)^D>>>3)+v[u-7]+(i(L,17)^i(L,19)^L>>>10)|0),T=(i(V,2)^i(V,13)^i(V,22))+(V&_[1]^V&_[2]^_[1]&_[2]);_=[w+T|0].concat(_),_[4]=_[4]+w|0}for(u=0;u<8;u++)_[u]=_[u]+A[u]|0}for(u=0;u<8;u++)for(c=3;c+1;c--){var x=_[u]>>c*8&255;h+=(x<16?0:"")+x.toString(16)}return h};return e.code='var sha256=function a(b){function c(a,b){return a>>>b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o={},p=2;64>n;p++)if(!o[p]){for(d=0;313>d;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="\\x80";b[h]%64-56;)b+="\\x00";for(d=0;d<b[h];d++){if(e=b.charCodeAt(d),e>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(j[j[h]]=k/g|0,j[j[h]]=k,e=0;e<j[h];){var q=j.slice(e,e+=16),r=l;for(l=l.slice(0,8),d=0;64>d;d++){var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+(q[d]=16>d?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0),x=(c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]);l=[w+x|0].concat(l),l[4]=l[4]+w|0}for(d=0;8>d;d++)l[d]=l[d]+r[d]|0}for(d=0;8>d;d++)for(e=3;e+1;e--){var y=l[d]>>8*e&255;i+=(16>y?0:"")+y.toString(16)}return i};',e})})(P1);var gD=P1.exports;const yD=r0(gD);var vD=function(){var t=this;this.type="sync",this.fns=new Set,this.on=function(e){t.fns.add(e)},this.call=function(){for(var e,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];try{for(var s=gl(t.fns),o=s.next();!o.done;o=s.next()){var l=o.value;l.apply(void 0,lt([],ve(r),!1))}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},Yo=function(){var t=this;this.type="async",this.fns=new Set,this.on=function(e){t.fns.add(e)},this.call=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return z(t,void 0,void 0,function(){var r,i,s,o,l,u;return H(this,function(c){switch(c.label){case 0:r=[];try{for(i=gl(this.fns),s=i.next();!s.done;s=i.next())o=s.value,r.push(o.apply(void 0,lt([],ve(e),!1)))}catch(h){l={error:h}}finally{try{s&&!s.done&&(u=i.return)&&u.call(i)}finally{if(l)throw l.error}}return[4,Promise.all(r)];case 1:return c.sent(),[2]}})})}},Ta=function(t){var e,n=po(43),r=lO(yD(n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),i=rt();if(!i||!i.liffId)throw M(fr,"You need to define `liffId` for liff.login()");var s={app_id:i.liffId,state:po(12),response_type:"code",code_challenge_method:"S256",code_challenge:r,liff_sdk_version:hd()};t&&t.redirectUri&&(s.redirect_uri=t.redirectUri),ir()&&!Ce()&&(!((e=Ao())===null||e===void 0)&&e.isReady()?s.redirect_uri=window.location.href:s.disable_auto_login="true"),AO({codeVerifier:n});var o=Ye("authorize")+"?"+Yt.stringify(s);Ie.debug("[Redirect] ".concat(o)),window.location.href=o},_D=function(t){function e(){var n=t.apply(this,lt([],ve(arguments),!1))||this;return n.hooks={before:new vD},n}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"login"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return this._login.bind(this)},e.prototype._login=function(n){this.hooks.before.call(n),Ta(n)},e}(he),Th,Nu=typeof navigator>"u"?"en":(Th=navigator.language)!==null&&Th!==void 0?Th:"en",rp=null;function wD(t){return z(this,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return Nu=t,[4,R1()];case 1:return e.sent(),[2]}})})}function R1(){return z(this,void 0,void 0,function(){var t,e;return H(this,function(n){switch(n.label){case 0:return[4,ct("".concat("https://liffsdk.line-scdn.net/xlt/manifest.json"),{method:"GET",headers:{Accept:"application/json"}})];case 1:return t=n.sent(),e="".concat(Nu),!t.languages[e]&&Nu.includes("-")&&(e=Nu.split("-")[0]),t.languages[e]||(e="en"),[4,ct("".concat("https://liffsdk.line-scdn.net/xlt","/").concat(t.languages[e]),{method:"GET",headers:{Accept:"application/json"}})];case 2:return rp=n.sent(),[2]}})})}function xh(t){if(rp===null)throw M(ut,"please call xlt after liff.init");return rp[t]}var ED=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"i18n"},enumerable:!1,configurable:!0}),e.prototype.install=function(n){return n.internalHooks.init.beforeFinished(this.beforeInitFinished.bind(this)),{setLang:wD}},e.prototype.beforeInitFinished=function(){return z(this,void 0,void 0,function(){return H(this,function(n){switch(n.label){case 0:return[4,R1()];case 1:return n.sent(),[2]}})})},e}(he),ID=new ED,Q_={iconColor:"#111111",statusBarColor:"BLACK",titleTextColor:"#111111",titleSubtextColor:"#B7B7B7",titleButtonColor:"#111111",titleBackgroundColor:"#FFFFFF",progressBarColor:"#06C755",progressBackgroundColor:"#FFFFFF",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#FFFFFF",baseTextColor:"#000000",lightButtonBorderColor:"rgba(0, 0, 0, 0.15)"},Y_={iconColor:"#FFFFFF",statusBarColor:"WHITE",titleTextColor:"#FFFFFF",titleSubtextColor:"#949494",titleButtonColor:"#FFFFFF",titleBackgroundColor:"#111111",progressBarColor:"#06C755",progressBackgroundColor:"#111111",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#000000",baseTextColor:"#FFFFFF",lightButtonBorderColor:"rgba(255, 255, 255, 0.5)"};function TD(){var t;Wt("color-scheme",(((t=It())==null?void 0:t.menuColorSetting)||{adaptableColorSchemes:["light"]}).adaptableColorSchemes.join(" "));var e=window.matchMedia("(prefers-color-scheme: dark)");Sh({matches:e==null?void 0:e.matches,media:e==null?void 0:e.media}),e.addEventListener?e.addEventListener("change",Sh):e.addListener&&e.addListener(Sh)}function Sh(t){var e=It(),n=(e==null?void 0:e.menuColorSetting)||{adaptableColorSchemes:["light"],lightModeColor:Q_,darkModeColor:Y_},r=n.adaptableColorSchemes,i=n.lightModeColor,s=n.darkModeColor,o=r.includes("dark");t.matches&&o?X_(We(We({},Y_),s)):X_(We(We({},Q_),i))}function X_(t){var e=t.iconColor,n=t.statusBarColor,r=t.titleTextColor,i=t.titleSubtextColor,s=t.titleButtonColor,o=t.titleBackgroundColor,l=t.progressBarColor,u=t.progressBackgroundColor,c=t.titleButtonAreaBackgroundColor,h=t.titleButtonAreaBorderColor,m=t.baseBackgroundColor,g=t.baseTextColor,_=t.lightButtonBorderColor;Wt("--liff-base-background-color",m),Wt("--liff-base-text-color",g),Wt("--liff-base-background-rgb-color",L_(m)),Wt("--liff-base-text-rgb-color",L_(g)),Wt("--liff-light-button-border-color",_),Wt("--liff-title-text-color",r),Wt("--liff-title-background-color",o),Wt("--liff-title-button-color",s),Wt("--liff-icon-color",e),Wt("--liff-status-bar-color",n),Wt("--liff-title-subtext-color",i),Wt("--liff-progress-bar-color",l),Wt("--liff-progress-background-color",u),Wt("--liff-title-button-area-background-color",D_(c)),Wt("--liff-title-button-area-border-color",D_(h))}function Wt(t,e){document.documentElement.style.setProperty(t,e)}var xD={addToHomeScreen:function(t){if(!new Ih(t).invoke("addToHomeScreen"))throw M(Pe,"No permission for liff.addToHomeScreen()")},scanCode:function(t){if(!new Ih(t).invoke("scanCode"))return Promise.reject(M(Pe,"No permission for liff.scanCode()"))},getAdvertisingId:function(t){if(!new Ih(t).invoke("getAdvertisingId"))return Promise.reject(M(Pe,"No permission for liff.getAdvertisingId()"))},initPlugins:function(){}};function SD(t){return z(this,void 0,void 0,function(){var e;return H(this,function(n){switch(n.label){case 0:return[4,BO()];case 1:return(e=n.sent())?(e.install(t,xD),[2]):[2]}})})}function bD(){return z(this,void 0,void 0,function(){return H(this,function(t){switch(t.label){case 0:return[4,ct(Ye("certs"))];case 1:return[2,t.sent()]}})})}function AD(t,e,n){return z(this,void 0,void 0,function(){var r;return H(this,function(i){switch(i.label){case 0:return[4,crypto.subtle.importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"])];case 1:return r=i.sent(),[4,crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},r,n,e)];case 2:return[2,i.sent()]}})})}function N1(t,e){return z(this,void 0,void 0,function(){var n,r,i,s,o,l,u,c,h,m,g,_,b,k,C,E;return H(this,function(v){switch(v.label){case 0:return n=t.split("."),r=ve(n,3),i=r[0],s=r[1],o=r[2],l=JSON.parse(_h.decode(i)),u=JSON.parse(_h.decodeUnicode(s)),c=j_(_h.decode(o)),h=j_("".concat(i,".").concat(s)),[4,bD()];case 1:if(m=v.sent(),!(g=m.keys.find(function(A){return A.kid===l.kid})))return[3,6];if(delete g.alg,l.alg!=="ES256")throw M(Mi,'Invalid "alg" value in ID_TOKEN');_=void 0,v.label=2;case 2:return v.trys.push([2,4,,5]),[4,AD(g,h,c)];case 3:return _=v.sent(),[3,5];case 4:throw b=v.sent(),M(Mi,"".concat("Failed to use Crypto API to verify ID_TOKEN",": ").concat(b));case 5:if(_){if(k=u.iss!=="https://access.".concat("line.me"),C=u.aud!==e,E=1e3*u.exp<Date.now(),k)throw M(Mi,'Invalid "iss" value in ID_TOKEN');if(C)throw M(Mi,'Invalid "aud" value in ID_TOKEN');if(E)throw M(Mi,'Invalid "exp" value in ID_TOKEN');return[2,u]}throw M(Mi,"Invalid signature in ID_TOKEN");case 6:throw M(Mi,'Invalid "kid" value in ID_TOKEN');case 7:return[2]}})})}function hg(t){var e=t.split(".");if(e[1])try{var n=e[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(window.atob(n))}catch{return null}return null}function O1(t){var e=t.pathname,n=t.query,r=n?"?".concat(Yt.stringify(n)):"",i="".concat("liff://").concat(e).concat(r);location.href=i}var ip=null;function CD(){typeof ip=="boolean"&&Ie.warn("liff.init is not expected to be called more than once"),ip=!!gO()||!(!Ce()||Yt.parse(window.location.hash).feature_token||wl())&&(yO(!0),!0)}function sp(){return!!ip}function kD(t,e){return z(this,void 0,void 0,function(){var n;return H(this,function(r){switch(r.label){case 0:return(n=ud())?[2,n]:t&&e?[4,pD({msit:t,mstVerifier:e})]:[3,2];case 1:return[2,r.sent().mst];case 2:return[2,null]}})})}function PD(t){return ct("".concat(Ye("apps"),"/").concat(t,"/featureToken"))}function RD(t){return z(this,void 0,void 0,function(){var e,n,r,i;return H(this,function(s){switch(s.label){case 0:return e=Yt.parse(window.location.hash),n=function(o){for(var l,u,c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];var m=function(b){Object.keys(b).filter(function(k){return b[k]!==null&&b[k]!==void 0}).forEach(function(k){o[k]=b[k]})};try{for(var g=gl(c),_=g.next();!_.done;_=g.next())m(_.value)}catch(b){l={error:b}}finally{try{_&&!_.done&&(u=g.return)&&u.call(g)}finally{if(l)throw l.error}}return o}({access_token:pr(),context_token:bO(),feature_token:wl(),id_token:cd(),client_id:SO(),mst_challenge:GT(),mst_verifier:_O(),msit:EO()},e),sp()?Ot()?[4,PD(t)]:[3,2]:[3,3];case 1:r=s.sent().featureToken,n.feature_token||(n.feature_token=r),s.label=2;case 2:(i=Zm(t))&&(n.client_id=i),s.label=3;case 3:return[2,n]}})})}function ND(t){if(t.persisted&&El("multipleLiffTransition"))if(Xt()==="ios")window.location.reload();else{var e=rt().liffId,n=wl();if(!e)throw M(ut,"Invalid LIFF ID.");if(!n)throw M(Pe,"Invalid featureToken for client features");O1({pathname:"app/".concat(e),query:{feature_token:n}})}}function OD(t){return z(this,void 0,void 0,function(){var e,n,r,i,s,o,l,u,c,h,m,g,_,b,k,C,E,v,A;return H(this,function(D){switch(D.label){case 0:return[4,new Promise(function(L){var V=mr();if(!V||$n(V,"9.5.0")<0)L();else if(window._liff&&window._liff.features)L();else{Ie.debug("cannot find window._liff.features, listen to ready event");var I=function(){Ie.debug("ready event is fired"),lg("ready",I),L()};ag("ready",I)}})];case 1:return D.sent(),CD(),[4,RD(t.liffId)];case 2:if(e=D.sent(),n=e.access_token,r=e.context_token,i=e.feature_token,s=e.id_token,o=e.client_id,l=e.mst_verifier,u=e.mst_challenge,c=e.msit,r){if(typeof r!="string")throw M(ut,"Cannot get context token, perhaps there is an incorrect parameter in permanent link");ng(hg(r))}if(((v=It())===null||v===void 0?void 0:v.liffId)!==void 0&&((A=It())===null||A===void 0?void 0:A.liffId)!==t.liffId)throw M(ut,"Invalid LIFF ID");return!ir()&&i&&(function(L,V){El("multipleLiffTransition")&&O1({pathname:"app/".concat(L),query:{feature_token:V}})}(t.liffId,i),sp()&&$_(i)),u&&xO(u),l&&wO(l),o&&KT(o),c&&IO(c),window.addEventListener("pageshow",ND),Ot()?[3,5]:i&&n?[3,5]:sp()?(h=Xa(location.href,{"liff.hback":"2"}),Ta({redirectUri:h}),[4,new Promise(function(){})]):[3,4];case 3:D.sent(),D.label=4;case 4:throw Ta(),M(ut,"Failed to parse feature_token or access_token");case 5:return n&&i?[4,og(n)]:[3,7];case 6:if(m=D.sent(),g=m.client_id,_=m.expires_in,b=Zm(t.liffId),g!==b)throw Ta(),M(ut,"Failed to verify access_token");$_(i),JT(new Date(Date.now()+1e3*_)),rg(n),D.label=7;case 7:return[4,kD(c,l)];case 8:return(k=D.sent())?(TO(k),[4,mD({mst:k})]):[3,10];case 9:(C=D.sent().data)&&Xf(JSON.stringify(C)),D.label=10;case 10:return s&&!cd()&&QT(s),s&&o&&!dd()?[4,N1(s,o)]:[3,12];case 11:(E=D.sent())&&ZT(E),D.label=12;case 12:return[2]}})})}function DD(t){return z(this,void 0,void 0,function(){var e,n,r,i,s,o,l;return H(this,function(u){switch(u.label){case 0:return e=Ye("apps"),n="".concat(e,"/").concat(t,"/contextToken"),r=pr(),i={"Content-Type":"application/json",Accept:"application/json"},r&&(i.Authorization="Bearer ".concat(r)),[4,ct(n,{headers:i})];case 1:if(s=u.sent(),!(o=s.contextToken))throw M(ut,"Can not get context from server.");if(!(l=hg(o)))throw M(ut,"Invalid context token.");return[2,l]}})})}function D1(){return z(this,void 0,void 0,function(){var t,e;return H(this,function(n){switch(n.label){case 0:if(!(t=rt().liffId))throw M(ut,"Invalid LIFF ID.");return[4,DD(t)];case 1:return e=n.sent(),ng(e),[2]}})})}function LD(t){return z(this,void 0,void 0,function(){var e,n,r,i=this;return H(this,function(s){switch(s.label){case 0:e=function(){return z(i,void 0,void 0,function(){var o,l,u,c,h,m;return H(this,function(g){switch(g.label){case 0:return[4,(_=rt(),b=Yt.parse(window.location.search),k=XT(),C={grant_type:"authorization_code",client_id:b.liffClientId,appId:_.liffId,code:b.code,code_verifier:k.codeVerifier,redirect_uri:_.redirectUri||b.liffRedirectUri,id_token_key_type:"JWK"},E=Yt.stringify(C),ct(Ye("token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:E}))];case 1:return o=g.sent(),l=o.access_token,u=o.id_token,c=o.expires_in,KT(t),rg(l),JT(new Date(Date.now()+1e3*c)),B_(),u?(QT(u),[4,N1(u,t)]):[3,3];case 2:(h=g.sent())&&ZT(h),g.label=3;case 3:return(m=Yt.parse(location.hash).context_token)?(ng(hg(m)),[3,6]):[3,4];case 4:return[4,D1()];case 5:g.sent(),g.label=6;case 6:return[2]}var _,b,k,C,E})})},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e()];case 2:return s.sent(),[3,4];case 3:throw n=s.sent(),r=n,B_(),r;case 4:return[2]}})})}function L1(){return z(this,void 0,void 0,function(){var t,e,n,r,i,s,o=this;return H(this,function(l){switch(l.label){case 0:return(e=Ao())?[3,2]:[4,v1(wa.SUB)];case 1:e=l.sent(),l.label=2;case 2:return(t=e).isReady()?(n=po(8),[4,t.getData("appData")]):[3,8];case 3:return r=l.sent(),i=r.eventName,s=r.data,i!==Ru.NOT_FOUND?[3,6]:[4,t.teardown()];case 4:return l.sent(),[4,L1()];case 5:return[2,l.sent()];case 6:s&&Xf(JSON.stringify(s)),l.label=7;case 7:return t.listen(function(u){return z(o,void 0,void 0,function(){var c,h;return H(this,function(m){return c=u.context,h=c.data,c.eventName===Oe.INIT&&(h==null?void 0:h.subWindowId)!==n&&Ys(),c.eventName!==Oe.CANCEL&&c.eventName!==Oe.SUBMIT||t.teardown(),[2]})})}),Ot()&&t.send({eventName:Oe.INIT,data:{subWindowId:n,hasOpener:!!window.opener}}),[3,10];case 8:return w1()?[3,10]:[4,new Promise(function(u){window.addEventListener("message",function(c){return function h(m){var g=m.data,_=m.source,b=m.origin;if(g){var k=g.type,C=g.message;k===Ic&&(window.removeEventListener("message",h),C&&Xf(C),aD(b),_&&_.postMessage&&_.postMessage({status:Ic},b),c())}}}(u))})];case 9:return[2,l.sent()];case 10:return[2]}})})}var jD=new(function(){function t(){var e=this;this.getAndValidateContext=function(){var n=It();if(!n)throw M(ut,"Could not get Context from server.");if(!n.endpointUrl)throw M(ut,"Could not get endpointUrl from server.");if(!n.permanentLinkPattern)throw M(ut,"Could not get permanentLinkPattern from server.");return n},this.decodeState=function(n){var r=e.getAndValidateContext();n=n.replace(/\n/g,"%0D%0A");var i=e.hasTrailingSlash(r.endpointUrl)||e.hasTrailingSlash(n),s=new URL(r.endpointUrl),o=s.origin,l=s.pathname,u=s.search,c=new URL("".concat(o).concat(e.attachSlashAtStart(n))),h=c.pathname,m=c.search,g=c.hash,_="".concat(u).concat(u?m.replace(/\?/g,"&"):m),b="".concat(l).concat(e.attachSlashAtStart(h)).replace("//","/");return(b=e.attachSlashAtStart("".concat(b))).endsWith("/")&&!i&&(b=b.substring(0,b.length-1)),"".concat(o).concat(b).concat(_).concat(g).replace(/%0D%0A/g,`
`)}}return t.prototype.attachSlashAtStart=function(e){return"".concat(e&&e.length>0&&!e.startsWith("/")?"/":"").concat(e)},t.prototype.hasTrailingSlash=function(e){var n=e.indexOf("?"),r=e.indexOf("#"),i=-1;return(i=n===-1&&r===-1?e.length:n===-1?r:r===-1?n:Math.min(n,r))>0&&e[i-1]==="/"},t.prototype.invoke=function(){return z(this,void 0,void 0,function(){var e,n,r,i,s;return H(this,function(o){switch(o.label){case 0:if(e=Yt.parse(window.location.search),typeof(n=e["liff.state"])!="string")return[2];o.label=1;case 1:return o.trys.push([1,4,,5]),r=location.href,(i=this.decodeState(n))===r?[3,3]:(e["liff.hback"]?location.replace(Xa(i,{"liff.hback":e["liff.hback"]})):location.replace(i),[4,new Promise(function(){})]);case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:if((s=o.sent()).code===ut)throw s;return Ie.debug(s),[3,5];case 5:return[2]}})})},t}());function VD(t,e){return z(this,void 0,void 0,function(){var n,r;return H(this,function(i){switch(i.label){case 0:if(!t.liffId)throw M(fr,"liffId is necessary for liff.init()");return pO(t),!Ce()&&Ot()&&(CO()||ig()),n=Yt.parse(window.location.search),!ir()||Ce()?[3,2]:[4,L1()];case 1:i.sent(),i.label=2;case 2:if(n.error&&n.liffOAuth2Error)throw l=n.error,u=n.error_description,c=u.replace(/\+/g," "),h="".concat(l,": ").concat(c),M(ut,h);return s=n.code,o=XT(),s&&!Ot()&&o&&o.codeVerifier?[4,LD(n.liffClientId)]:[3,4];case 3:i.sent(),i.label=4;case 4:return Ce()?[4,OD(t)]:[3,6];case 5:return i.sent(),[3,8];case 6:return Ot()?[3,8]:[4,D1()];case 7:i.sent(),i.label=8;case 8:return[4,jD.invoke()];case 9:if(i.sent(),r=It())try{sg(location.href,r.endpointUrl)}catch{Ie.warn(`liff.init() was called with a current URL that is not related to the endpoint URL.
`.concat(location.href," is not under ").concat(r.endpointUrl))}return[4,e()];case 10:return i.sent(),dO(window.location.href),[2]}var s,o,l,u,c,h})})}var j1=function(t,e){return new Promise(function(n,r){if(t){var i=document.createElement("script");i.type="module",i.onload=function(){n()},i.src=t,document.head.appendChild(i)}else r(M(fr,e))})},MD=function(t){var e="https://static.line-scdn.net/lui/edge/versions/1.13.0/lui-alert.js";return e&&t&&(e=e.replace(/\d{1,2}\.\d{1,2}\.\d{1,3}/,t)),j1(e,"LUI_ALERT_URL is not defined")},bh=function(){return z(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return t=function(){var r,i=document.querySelector('script[src*="luivendor.js"]');if(i&&(!((r=i.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g))===null||r===void 0)&&r.length))return i.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g)[0]}(),t?[3,2]:[4,j1("https://static.line-scdn.net/lui/edge/versions/1.13.0/luivendor.js","LUI_VENDOR_URL is not defined")];case 1:e.sent(),e.label=2;case 2:return[4,MD(t)];case 3:return e.sent(),[4,(n=po(6),new Promise(function(){var r=document.createElement("div");r.innerHTML='<lui-alert id="'.concat("liffAlert","-").concat(n,'" shown title="').concat(xh("alert.android.extBrowser.autoLoginWorkaround.title"),'" message="').concat(xh("alert.android.extBrowser.autoLoginWorkaround.desc"),'" button="').concat(xh("alert.android.extBrowser.autoLoginWorkaround.button.text"),'"></lui-alert>'),document.body.appendChild(r);var i=document.getElementById("".concat("liffAlert","-").concat(n));i&&i.addEventListener("lui-button-click",function(){var s=window.open(Xa(window.location.href,{liffIsEscapedFromApp:"true"}),"_blank");s&&(s.location.href=Xa(window.location.href,{liffIsEscapedFromApp:"true"}),window.close())})}))];case 4:return e.sent(),[2]}var n})})},J_=function(t){try{return new URL(t).searchParams.get("lineAppVersion")}catch{return null}};function FD(){return z(this,void 0,void 0,function(){var t,e,n;return H(this,function(r){switch(r.label){case 0:return t=(n=J_(window.location.href))!==null&&n!==void 0?n:J_(window.document.referrer),t&&$n(t,"13.10.0")>=0?[2]:Ce()||Xt()!=="android"||(e=Yt.parse(window.location.search))[o1]||e.liffIsEscapedFromApp?[2]:e.liffClientId&&document.referrer.includes("access.".concat("line.me"))?(window.location.href=Xa(window.location.href,{liffIsEscapedFromApp:"true"}),[2]):e.liffClientId&&document.referrer.includes("android-app://")?[4,bh()]:[3,2];case 1:r.sent(),r.label=2;case 2:return e.liffClientId&&document.referrer===""&&window.history.length===1?[4,bh()]:[3,4];case 3:r.sent(),r.label=4;case 4:return!document.referrer.includes("liffClientId")||document.referrer.includes("liffIsEscapedFromApp")?[3,6]:[4,bh()];case 5:r.sent(),r.label=6;case 6:return[2]}})})}var UD=function(t){function e(){var n=t.apply(this,lt([],ve(arguments),!1))||this;return n.hooks={before:new Yo,after:new Yo},n.internalHooks={beforeFinished:new Yo,beforeSuccess:new Yo,error:new Yo},n}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"init"},enumerable:!1,configurable:!0}),e.prototype.install=function(n){var r=n.liff;return this.liffForWindow=r,this.init.bind(this)},e.prototype.init=function(n,r,i){return z(this,void 0,void 0,function(){var s;return H(this,function(o){switch(o.label){case 0:return[4,this.hooks.before.call()];case 1:o.sent(),l=this.liffForWindow,window&&!window.liff&&(window.liff=l),o.label=2;case 2:return o.trys.push([2,9,,11]),[4,Promise.all([SD(this.liffForWindow),VD(n,this.internalHooks.beforeFinished.call)])];case 3:return o.sent(),TD(),[4,this.internalHooks.beforeSuccess.call()];case 4:return o.sent(),!n.withLoginOnExternalBrowser||Ot()?[3,6]:(Ta(),[4,new Promise(function(){})]);case 5:o.sent(),o.label=6;case 6:return[4,FD()];case 7:return o.sent(),[4,this.hooks.after.call()];case 8:return o.sent(),typeof r=="function"&&r(),DT(),[3,11];case 9:return s=o.sent(),[4,this.internalHooks.error.call(s)];case 10:throw o.sent(),typeof i=="function"&&i(s),s;case 11:return[2]}var l})})},e}(he);function V1(){return{liffApp:"https://liff.".concat("line.me"),liffServer:"https://api.".concat("line.me"),miniApp:"https://miniapp.".concat("line.me")}}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getOrigins"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return V1()}},e})(he);function M1(){return navigator.language}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getLanguage"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return M1()}},e})(he);function F1(){var t=mr();if(!t||!Ce()||Xt()!=="ios")return navigator.language;if($n(t,"14.11.0")>=0){var e=window.prompt("LIFF:GET_APP_LANGUAGE");if(e)return e}return navigator.language}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getAppLanguage"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return F1()}},e})(he);function U1(t){return z(this,void 0,void 0,function(){var e,n,r,i,s,o,l;return H(this,function(u){switch(u.label){case 0:return function(c){if(!oO.includes(c))throw M(Ge,"Unexpected permission name.");var h=It();return!!(h!=null&&h.scope.includes(c))}(t)?(e=pr())?[4,og(e)]:[3,2]:[2,{state:"unavailable"}];case 1:n=u.sent(),r=unescape(n.scope).split(" ");try{for(i=gl(r),s=i.next();!s.done;s=i.next())if(s.value.includes(t))return[2,{state:"granted"}]}catch(c){o={error:c}}finally{try{s&&!s.done&&(l=i.return)&&l.call(i)}finally{if(o)throw o.error}}return[2,{state:"prompt"}];case 2:throw M(vt,"Need access_token for api call, Please login first")}})})}function $1(){var t,e,n=It();return!!n&&n.type!=="square_chat"&&(El("skipChannelVerificationScreen")||!Ce()&&((e=(t=n.availability)===null||t===void 0?void 0:t.skipChannelVerificationScreen)===null||e===void 0?void 0:e.permission))}function $D(){var t=rt().liffId;if(t)return ct("".concat(Ye("unauthorizedPermissions"),"?liffId=").concat(t),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(pr())}});throw M(vt,"liffId is required")}var Ou,au=Sn.on,lu=Sn.off,BD=Sn.open,zD=function(){function t(e,n){var r=this;this.onSubmit=function(i){return z(r,[i],void 0,function(s){var o=s.newAccessToken,l=s.ICA_ERROR;return H(this,function(u){return o?this.resolve({newAccessToken:o}):l&&this.reject(M(Nt,l)),this.teardown(),[2]})})},this.onClose=function(){return z(r,void 0,void 0,function(){return H(this,function(i){return this.reject(M(vt,"user didn't allow the agreement")),this.teardown(),[2]})})},this.onCancel=function(){return z(r,void 0,void 0,function(){return H(this,function(i){return this.reject(M(vt,"user didn't allow the agreement")),this.teardown(),[2]})})},this.onError=function(i){return z(r,void 0,void 0,function(){return H(this,function(s){return this.reject(i),this.teardown(),[2]})})},this.resolve=e,this.reject=n,this.setup()}return t.prototype.setup=function(){au("submit",this.onSubmit),au("close",this.onClose),au("cancel",this.onCancel),au("error",this.onError)},t.prototype.teardown=function(){lu("submit",this.onSubmit),lu("close",this.onClose),lu("cancel",this.onCancel),lu("error",this.onError),Ou=void 0},t.prototype.open=function(e){var n=rt().liffId;n?BD({url:"".concat("https://liff.line.me/1656032314-Xgrw5Pmk"),appData:{liffId:n,channelId:Zm(n),accessToken:pr()},onBeforeTransition:e}).catch(this.reject):this.reject(M(vt,"liffId is required"))},t}();function B1(){return z(this,void 0,void 0,function(){var t,e,n=this;return H(this,function(r){switch(r.label){case 0:if(!$1())throw M(Pe,"SkipChannelVerificationScreen is unavailable.");return Ou&&Ou.teardown(),t=function(){return z(n,void 0,void 0,function(){var i;return H(this,function(s){switch(s.label){case 0:return[4,$D()];case 1:if(i=s.sent(),(Ce()?i:i.filter(function(o){return o!=="chat_message.write"})).length<=0)throw M(Pe,"All permissions have already been approved.");return[2]}})})},[4,new Promise(function(i,s){(Ou=new zD(i,s)).open(t)})];case 1:return e=r.sent().newAccessToken,rg(e),[2]}})})}function HD(){return z(this,void 0,void 0,function(){var t,e;return H(this,function(n){switch(n.label){case 0:if(!(t=pr()))throw M(vt,"Need access_token for api call, Please login first");return[4,og(t)];case 1:return e=n.sent(),[2,decodeURIComponent(e.scope).split(" ").filter(function(r){return r!==""})]}})})}function Xs(t,e){var n=this;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return z(n,void 0,void 0,function(){var s,o,l;return H(this,function(u){switch(u.label){case 0:return s=(r.length>0?r[r.length-1]:{}).ignorePermissionCheck,o=s!==void 0&&s,[4,U1(e)];case 1:if((l=u.sent().state)!=="unavailable")return[3,2];throw M(Pe,"The permission is not in LIFF app scope.");case 2:return l!=="prompt"||!$1()||o||!Ce()&&e==="chat_message.write"?[3,4]:[4,B1()];case 3:return u.sent(),[3,5];case 4:o&&r.pop(),u.label=5;case 5:return[4,t.apply(void 0,lt([],ve(r),!1))];case 6:return[2,u.sent()]}})})}}var WD=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"permission"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return{query:U1,requestAll:B1,getGrantedAll:HD}},e}(he),qD=new WD;function fg(){return ct(Ye("profile"))}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getProfile"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return Xs(fg,"profile")},e})(he);var GD=function(t,e){return t?"&".concat(t.split("&").filter(function(n){return n.indexOf("is_liff_external_open_window")===-1}).join("&").concat("".concat(e?"#".concat(e):""))):"".concat(e?"#".concat(e):"")};function pd(t){if(!function(s){if(!s||typeof s!="object")return!1;var o=s,l=o.url,u=o.external,c=ve([typeof l,typeof u],2),h=c[0],m=c[1];return h==="string"&&l!==""&&(m==="undefined"||m==="boolean")}(t))throw M(Ge,"Invalid parameters for liff.openWindow()");var e=mr();if(Ce())if(e!==null&&Xt()==="ios"&&$n(e,"9.19")>=0||!window._liff.postMessage){var n=t.url,r=t.external,i=r!==void 0&&r;window.open(function(s,o){var l,u,c,h,m,g,_,b,k;(function(E){return E.indexOf("#")!==-1&&E.indexOf("?")!==-1&&E.indexOf("#")<E.indexOf("?")})(s)||function(E){return E.indexOf("?")===-1&&E.indexOf("#")!==-1}(s)?(_=(l=ve(s.split("#"),2))[0],u=l[1],b=(c=ve((u===void 0?"":u).split("?"),2))[0],k=c[1]):(_=(h=ve(s.split("?"),2))[0],m=h[1],k=(g=ve((m===void 0?"":m).split("#"),2))[0],b=g[1]);var C=GD(k,b);return"".concat(_,"?").concat("is_liff_external_open_window","=").concat(!!o).concat(C)}(n,i))}else bo("openWindow",t);else window.open(t.url,"_blank")}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"openWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(n){return pd(n)}},e})(he);var KD=function(t){return typeof t=="object"&&t!==null&&function(e){return typeof e=="string"||e instanceof String}(t.type)};function Z_(t){return Promise.reject(M(Ge,t))}function z1(t){if(!function(n){return Array.isArray(n)&&n.every(KD)}(t))return Z_("Parameter 'messages' must be an array of { type, ... }");var e=t.length;return e<1||e>5?Z_("Number of messages should be in range 1 to ".concat(5,".")):ct(Ye("message"),{method:"POST",body:JSON.stringify({messages:t})}).catch(QD)}var QD=function(t){if(t.code==="403"){var e=mr()==="12.0.0",n=Xt()==="ios",r=tg();e&&(n||r)&&window.alert(`LINELINE 12.0.1
Please update your LINE app to LINE 12.0.1 or later.`)}throw t};(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"sendMessages"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return Xs(z1,"chat_message.write")},e})(he);function H1(){return ct(Ye("friendship"))}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getFriendship"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return Xs(H1,"profile")},e})(he);function YD(){return z(this,void 0,void 0,function(){var t,e;return H(this,function(n){switch(n.label){case 0:if(!Ot())return[3,6];n.label=1;case 1:return n.trys.push([1,5,,6]),(t=dd())&&t.sub?[2,t.sub]:[3,2];case 2:return[4,fg()];case 3:if((e=n.sent())&&e.userId)return[2,e.userId];n.label=4;case 4:return[3,6];case 5:return n.sent(),Ie.debug("can't retrieve Mid/Uid because of something wrong"),[3,6];case 6:return[2]}})})}function XD(){return z(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return[4,YD()];case 1:return(t=e.sent())&&t.substring(0,1)==="u"?[2,t]:[2]}})})}var JD=function(t){function e(){var n=t.apply(this,lt([],ve(arguments),!1))||this;return n.utsExtra={isLiffSuccessful:!1,isLoggedIn:!1,id:"",version:""},n.injected=!1,n}return pe(e,t),Object.defineProperty(e,"CUSTOMPLACEID_INIT",{get:function(){return"liff.init"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"CUSTOMTYPE",{get:function(){return"liffSdk"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"LiffUtsLoginStatus",{get:function(){return{isLoggedIn:1,isLiffSuccessful:2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return"analytics"},enumerable:!1,configurable:!0}),e.prototype.install=function(n){var r=n.liff,i=n.internalHooks;this.liffCore=r,i.init.beforeFinished(this.beforeInitFinished.bind(this)),i.init.beforeSuccess(this.beforeInitSuccess.bind(this)),i.init.error(this.initError.bind(this))},e.prototype.createDeprecatedUtsProxy=function(n){var r="LIFF Analytics is deprecated and will be removed in a future version. Please migrate to alternative analytics solutions.";return new Proxy(n,{get:function(i,s){var o=i[s];return typeof o=="function"?function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return Ie.warn("[LIFF Analytics] ".concat(r," Called method: ").concat(String(s))),o.apply(i,l)}:o}})},e.prototype.changeRatioToUTSFormat=function(n){if(n&&Number.isFinite(n))return Math.round(100*n)},e.prototype.setExtra=function(){var n,r=this.utsExtra,i=r.isLiffSuccessful,s=r.isLoggedIn,o=r.id,l=r.version,u=(s?e.LiffUtsLoginStatus.isLoggedIn:0)|(i?e.LiffUtsLoginStatus.isLiffSuccessful:0);(n=this.uts)===null||n===void 0||n.setExtra("liff",{id:o,loginStatus:u,version:l})},e.prototype.assignUtsExtra=function(n){Object.assign(this.utsExtra,n)},e.prototype.setVersion=function(n){this.assignUtsExtra({version:n}),Ie.debug("[LIFFUTS][SDK version] ".concat(n)),this.setExtra()},e.prototype.setLiffId=function(n){this.assignUtsExtra({id:n}),Ie.debug("[LIFFUTS][LIFFID] ".concat(n)),this.setExtra()},e.prototype.setIsLoggedIn=function(n){this.assignUtsExtra({isLoggedIn:n}),Ie.debug("[LIFFUTS][isLoggedIn] ".concat(n)),this.setExtra()},e.prototype.sendLiffInit=function(){var n;Ie.debug("[LIFFUTS][sendCustom] liff.init"),(n=this.uts)===null||n===void 0||n.sendCustom({type:e.CUSTOMTYPE,params:{placeId:e.CUSTOMPLACEID_INIT}})},e.prototype.setIsLiffSuccessful=function(n){this.assignUtsExtra({isLiffSuccessful:n}),Ie.debug("[LIFFUTS][isLiffInitSuccessful] ".concat(n)),this.setExtra()},e.prototype.prepareReferrer=function(n){var r={};Object.keys(n).forEach(function(i){if(rO.includes(i)){var s=n[i];typeof s=="string"&&s&&(r[i.replace(/^liff\.ref\./,"")]=s)}}),Object.keys(r).length>0&&(this.referrer=r)},e.prototype.beforeInitFinished=function(){return z(this,void 0,void 0,function(){var n,r,i,s,o,l,u,c,h,m,g,_;return H(this,function(b){switch(b.label){case 0:if(n=Yt.parse(window.location.search),this.prepareReferrer(n),r=It(),!(i=r==null?void 0:r.utsTracking))return[2];if(s=rt(),o=s.liffId,l=s.analytics,i.mode!=="auto"||!l)return[3,6];Ie.warn("[LIFF Analytics] LIFF Analytics is deprecated and will be removed in a future version. Please migrate to alternative analytics solutions."),Ie.debug("[LIFFUTS] ".concat(new Date().toUTCString())),b.label=1;case 1:return b.trys.push([1,3,,4]),u=this,[4,new Promise(function(k,C){var E=window.uts,v=document.createElement("script");v.type="text/javascript",v.src="https://static.line-scdn.net/uts/edge/4.1.0/uts.js",v.onload=function(){var A=window.uts;k(A),window.uts=E},v.onerror=function(A){C(A)},document.getElementsByTagName("head")[0].appendChild(v)})];case 2:return u.uts=b.sent(),[3,4];case 3:return c=b.sent(),Ie.debug("[LIFFUTS] cannot load UTS, reason: ".concat(c)),[2];case 4:return h=We(We({},l.context),{utsId:l.context.utsId,appName:l.context.appName,appEnv:l.context.appEnv||"release"}),m=We(We({endpoint:"https://uts-front.line-apps.com"},l.options),{sampleRate:this.changeRatioToUTSFormat(i.sendRatio),version:"current"}),this.uts.init(h,m),[4,XD()];case 5:(g=b.sent())&&(Ie.debug("[LIFFUTS][mid] ".concat(g)),this.uts.setMid(g)),r!=null&&r.tid&&(Ie.debug("[LIFFUTS][tid] ".concat(r.tid)),this.uts.setTid(r.tid)),this.referrer&&(Ie.debug("liff.ref.referrer",this.referrer),this.uts.setSessionParams(this.referrer)),o&&this.setLiffId(o),this.setIsLoggedIn(Ot()),this.setVersion(hd()),_=UT(location.href),Ie.debug("[LIFFUTS][url] ".concat(_)),this.uts.setUrl(_),this.liffCore.analytics=this.createDeprecatedUtsProxy(this.uts),this.injected=!0,b.label=6;case 6:return[2]}})})},e.prototype.beforeInitSuccess=function(){return this.injected&&(this.setIsLiffSuccessful(!0),this.sendLiffInit()),Promise.resolve()},e.prototype.initError=function(){return this.injected&&(this.setIsLiffSuccessful(!1),this.sendLiffInit()),Promise.resolve()},e}(he),ZD=function(t){Ie.warn("[LIFF Analytics] LIFF Analytics is deprecated and will be removed in a future version. Please migrate to alternative analytics solutions. Called function: sendShareTargetPicker"),Ie.debug("[LIFFUTS][sendCustom] liff.shareTargetPicker"),t.sendCustom({type:"liffSdk",params:{placeId:"liff.shareTargetPicker"}})},bs,e4=function(){function t(e,n){var r=this;this.resolve=e,this.reject=n,this.onSubmit=function(i){var s=i.message;r.resolve({value:s}),r.destroy()},this.onClose=function(){r.resolve({value:null}),r.destroy()},this.onCancel=function(){r.resolve({value:null}),r.destroy()},this.onError=function(i){r.reject(i),r.destroy()},this.start()}return t.prototype.start=function(){Sn.on("submit",this.onSubmit),Sn.on("close",this.onClose),Sn.on("cancel",this.onCancel),Sn.on("error",this.onError)},t.prototype.destroy=function(){Sn.off("submit",this.onSubmit),Sn.off("close",this.onClose),Sn.off("cancel",this.onCancel),Sn.off("error",this.onError),bs=void 0},t}();function t4(){return z(this,void 0,void 0,function(){return H(this,function(t){return Pr.scanCodeV2(),bs&&bs.destroy(),[2,new Promise(function(e,n){bs=new e4(e,n),Sn.open({url:"https://liff.line.me/1656359117-jxmx5e11"}).catch(function(r){bs==null||bs.destroy(),n(r)})})]})})}var n4=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"scanCodeV2"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return t4},e}(he),r4=new n4,W1={};function i4(){return W1}function s4(t,e){var n=i4(),r=ve(e.split("."),1)[0],i=n[e];i&&t.removeEventListener(r,i),n[e]=null}var e0=!1,t0=!1;function o4(t,e,n,r){e0||(t0=function(){var s=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return s=!0,!1}});window.addEventListener("test",o,o),window.removeEventListener("test",o,o)}catch{s=!1}return s}(),e0=!0);var i=ve(e.split("."),1)[0];return new Promise(function(s){var o=function(l){s(l),n&&n(l)};(function(l,u){W1[l]=u})(e,o),t.addEventListener(i,o,!!t0&&r)})}function n0(t,e,n,r){if(n===void 0&&(n={}),typeof t!="object"||!t.postMessage)throw M(Ge,"target must be window object");if(typeof e!="string")throw M(Ge,"keyname must be string");if(typeof n!="object")throw M(Ge,"incorrect body format. It should be Object or Array comprised of Object");if(!r)throw M(Ge,"serverEndPointUrl isn't passed. please fill up with proper url");if(r==="*")throw new Error("serverEndPointUrl doesn't allow to set '*'");var i={name:e,body:n};t.postMessage(i,r)}function a4(t,e,n,r){o4(t,"message.".concat(e),function(i,s,o){return function(l){Ie.debug("messageReceive",l),l.origin===o&&l.data.name===i&&s(l)}}(e,n,r))}var l4=function(){function t(){this.payloadToShareTargetPicker=null,this.popupWindow=null,this.doesWaitForSubwindowResult=!1}return t.getInstance=function(){return t.instance?t.instance.reset():t.instance=new t,t.instance},t.prototype.init=function(e){return z(this,void 0,void 0,function(){var n,r;return H(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),this.liffId=e.referrer.liffId,this.doesWaitForSubwindowResult=!(!e.options||!e.options.waitForSubwindowResult),this.allowPostMessageOrigin=this.initAllowPostMessageOrigin(),this.payloadToShareTargetPicker=this.buildPayloadToShareTargetPicker(e),window.AbortController&&(this.abortController=new window.AbortController),this.prepareAnotherWindow(),[4,this.initOtt()];case 1:return i.sent(),this.initListener(),this.openAnotherWindow(),this.doesWaitForSubwindowResult?[4,this.pollingShareResult()]:[3,3];case 2:return n=i.sent(),this.finalize(),[2,n];case 3:case 6:return[2];case 4:return[3,6];case 5:if(r=i.sent(),this.finalize(),r.name!=="AbortError")throw r;return[3,6]}})})},t.prototype.resetAllVariables=function(){this.liffId="",this.allowPostMessageOrigin="",this.payloadToShareTargetPicker=null,this.ott="",this.popupWindow=null,this.timeoutIDForHealthCheck=null,this.abortController=null,this.internalError=null,this.doesWaitForSubwindowResult=!1},t.prototype.reset=function(){this.finalize(),this.resetAllVariables()},t.prototype.finalize=function(){var e,n;this.abortController&&this.abortController.abort(),Ce()||(e=this.timeoutIDForHealthCheck,n=this.popupWindow,s4(window,"message.receivedHealthcheck"),e&&clearTimeout(e),n&&!n.closed&&n.close())},t.prototype.buildPayloadToShareTargetPicker=function(e){return{messages:e.messages,isMultiple:e.isMultiple,referrer:e.referrer}},t.prototype.initAllowPostMessageOrigin=function(e){return e===void 0&&(e=Ye("shareTargetPicker")),hO(e)},t.prototype.initOtt=function(){return z(this,void 0,void 0,function(){var e,n,r;return H(this,function(i){switch(i.label){case 0:return this.abortController&&(e=this.abortController.signal),n="".concat(Ye("shareTargetPickerOtt"),"/").concat(this.liffId,"/ott"),r=this,[4,ct(n,{method:"GET",signal:e}).then(function(s){return s.ott})];case 1:return r.ott=i.sent(),[2]}})})},t.prototype.prepareAnotherWindow=function(){Ce()||(Xt()!=="ios"||tg()?this.popupWindow=window.open("","liffpopup","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):this.popupWindow=window.open())},t.prototype.openAnotherWindow=function(){if(Ce()&&this.payloadToShareTargetPicker)e=this.liffId,n=this.ott,r=this.payloadToShareTargetPicker,i={liffId:e,ott:n,data:JSON.stringify(r),closeModals:!1},location.href="".concat("line://picker","?").concat(Yt.stringify(i));else{if(this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),!this.popupWindow)throw M(Gf);(function(s,o,l){var u={liffId:o,ott:l};s.location.href="".concat(Ye("shareTargetPicker"),"?").concat(Yt.stringify(u))})(this.popupWindow,this.liffId,this.ott)}var e,n,r,i},t.prototype.initListener=function(){var e,n;Ce()||(e=this.onReceivedHealthcheck.bind(this),n=this.allowPostMessageOrigin,a4(window,"receivedHealthcheck",e,n))},t.prototype.healthCheck=function(){return z(this,void 0,void 0,function(){var e;return H(this,function(n){switch(n.label){case 0:if(this.popupWindow&&!this.popupWindow.closed)return[3,7];if(!this.doesWaitForSubwindowResult)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.onCanceled()];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),this.internalError=e,[3,4];case 4:return[3,6];case 5:this.finalize(),n.label=6;case 6:return[3,8];case 7:r=this.popupWindow,i=this.allowPostMessageOrigin,n0(r,"healthcheck",void 0,i),this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),n.label=8;case 8:return[2]}var r,i})})},t.prototype.onReceivedHealthcheck=function(){if(!this.popupWindow||!this.payloadToShareTargetPicker)throw M(Gf);var e,n,r;e=this.popupWindow,n=this.payloadToShareTargetPicker,r=this.allowPostMessageOrigin,n0(e,"ready",n,r)},t.prototype.onCanceled=function(){return z(this,void 0,void 0,function(){var e,n;return H(this,function(r){switch(r.label){case 0:if(Ce()||!this.ott)throw new Error("need to call with ott in client");return this.abortController&&(e=this.abortController.signal),n={liffId:this.liffId,ott:this.ott},[4,ct("".concat(Ye("shareTargetPickerResult"),"?").concat(Yt.stringify(n)),{method:"POST",signal:e,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:"result=CANCEL"})];case 1:return[2,r.sent().status==="ok"]}})})},t.prototype.getShareResult=function(){return z(this,void 0,void 0,function(){var e,n;return H(this,function(r){if(!this.ott)throw new Error("need to call with ott in client");return this.abortController&&(e=this.abortController.signal),n={liffId:this.liffId,ott:this.ott},Ie.debug("fetch: getShareResult"),[2,ct("".concat(Ye("shareTargetPickerResult"),"?").concat(Yt.stringify(n)),{method:"GET",headers:{Accept:"application/json"},signal:e})]})})},t.isPollingTimeOut=function(e,n){return(n-e)/6e4>=10},t.prototype.pollingShareResult=function(){return z(this,void 0,void 0,function(){var e,n;return H(this,function(r){switch(r.label){case 0:e=Date.now(),r.label=1;case 1:if(t.isPollingTimeOut(e,Date.now()))return[3,4];if(this.internalError)throw this.internalError;return[4,this.getShareResult()];case 2:if((n=r.sent())&&n.result)switch(n.result){case"SUCCESS":return[2,{status:"success"}];case"CANCEL":return[2];default:throw new Error(n.resultDescription)}return[4,new Promise(function(i){setTimeout(i,500)})];case 3:return r.sent(),[3,1];case 4:throw new Error("Timeout: not finished within ".concat(10,"min"))}})})},t}(),u4=function(t){function e(){var n=t.apply(this,lt([],ve(arguments),!1))||this;return n.shareTargetPicker=function(r){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return z(n,lt([r],ve(i),!1),void 0,function(o,l){var u,c,h,m,g,_,b;return l===void 0&&(l={}),H(this,function(k){switch(k.label){case 0:if(Pr.shareTargetPicker(),!o||!Array.isArray(o)||o.length===0)throw M(Ge,"no proper argument");if(o.length>nO)throw M(Ge,"exceed the limit of num of messages");if(!(u=rt().liffId))throw M(fr);window.liff&&(c=window.liff).analytics&&ZD(c.analytics),h=l.isMultiple===void 0||l.isMultiple,k.label=1;case 1:return k.trys.push([1,3,,4]),m=l4.getInstance(),g=mr(),_={waitForSubwindowResult:!0},Ce()&&g&&$n(g,"10.11.0")<0&&(_.waitForSubwindowResult=!1),[4,m.init({messages:o,isMultiple:h,referrer:{liffId:u,url:location.origin},options:_})];case 2:return[2,k.sent()];case 3:throw(b=k.sent())instanceof MT?b:M(Kf,b.message);case 4:return[2]}})})},n}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"shareTargetPicker"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return this.shareTargetPicker},e}(he),c4=new u4;function q1(t,e){return z(this,void 0,void 0,function(){var n,r;return H(this,function(i){switch(i.label){case 0:return n=Ye("createShortcutOnHomeScreen"),(r=new URL(n)).searchParams.append("liffId",t),r.searchParams.append("url",e.url),e.description&&r.searchParams.append("description",e.description),[4,ct(r.toString())];case 1:return[2,i.sent().shortcutPageUrl]}})})}function G1(t){if(Yf(t))throw M(Ge,"LINE URL scheme are not supported in the current environment.")}function d4(t,e){return z(this,void 0,void 0,function(){var n;return H(this,function(r){switch(r.label){case 0:return Ce()?[2]:[4,new Promise(function(i){setTimeout(i,1e3)})];case 1:return r.sent(),document.visibilityState==="hidden"?[2]:(G1(e.url),[4,q1(t,e)]);case 2:return n=r.sent(),pd({url:n,external:!0}),[2]}})})}function h4(t,e){return z(this,void 0,void 0,function(){var n,r;return H(this,function(i){switch(i.label){case 0:return n={liffId:t,targetUrl:e.url,description:e.description},r="".concat("line://shortcut/liff","?").concat(Yt.stringify(n)),location.href=r,[4,d4(t,e)];case 1:return i.sent(),[2]}})})}function f4(t,e){return z(this,void 0,void 0,function(){var n;return H(this,function(r){switch(r.label){case 0:return G1(e.url),[4,q1(t,e)];case 1:return n=r.sent(),pd({url:n,external:!0}),[2]}})})}function K1(t){var e;if(t.url===void 0||t.url===null||t.url==="")throw M(Ge,"no proper argument");var n=It();if(!(!((e=n==null?void 0:n.availability.addToHomeLineScheme)===null||e===void 0)&&e.permission)){if(Yf(t.url))throw M(Pe,"No permission to specify line schema in url.");if(t.description)throw M(Pe,"No permission to specify description.")}if(!Yf(t.url)){if(!n)throw M(Pe,"Could not get Context from server.");n.liffId!==eg(t.url)&&sg(t.url,n.endpointUrl)}}function p4(t){return z(this,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return K1(t),Pr.internalCreateShortcutOnHomeScreen(),[4,Q1(t)];case 1:return e.sent(),[2]}})})}function m4(t){return z(this,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return K1(t),Pr.createShortcutOnHomeScreen(),[4,Q1(t)];case 1:return e.sent(),[2]}})})}function Q1(t){return z(this,void 0,void 0,function(){var e;return H(this,function(n){switch(n.label){case 0:if(!(e=rt().liffId))throw M(ut,"Invalid LIFF ID.");return Xt()==="ios"?[4,f4(e,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,h4(e,t)];case 3:n.sent(),n.label=4;case 4:return[2]}})})}var g4=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"createShortcutOnHomeScreen"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(n){return m4(n)}},e}(he),y4=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"internalCreateShortcutOnHomeScreen"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(n){return p4(n)}},e}(he);function v4(t){return z(this,arguments,void 0,function(e){var n=e.productIds;return H(this,function(r){switch(r.label){case 0:return[4,bo("iap.getPlatformProducts",{productIds:n}).catch(function(i){throw i.code&&i.description?M(i.code,i.description):M(Nt,"Failed to get platform products",{cause:i})})];case 1:return[2,r.sent().products]}})})}var _4=function(t){return z(void 0,[t],void 0,function(e){var n=e.productId,r=e.orderId;return H(this,function(i){switch(i.label){case 0:if(!window.confirm("Proceed with a test in-app purchase?"))throw M("CANCELED","Transaction was canceled.");return[4,ct(Ye("iapVirtualConfirm"),{method:"POST",body:JSON.stringify({productId:n,orderId:r})})];case 1:return i.sent(),[2]}})})},w4=function(t){return z(void 0,[t],void 0,function(e){var n,r=e.productId,i=e.orderId;return H(this,function(s){switch(s.label){case 0:return(n=It())!=null&&n.isIapSandbox?[4,_4({productId:r,orderId:i})]:[3,2];case 1:case 3:return s.sent(),[2];case 2:return[4,bo("iap.createPayment",{productId:r,orderId:i}).catch(function(o){throw o.code&&o.description?M(o.code,o.description):M(Nt,"Failed to get platform products",{cause:o})})]}})})},E4=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return pe(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"iap"},enumerable:!1,configurable:!0}),e.prototype.install=function(){var n=this;return{getPlatformProducts:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return z(n,void 0,void 0,function(){return H(this,function(s){return Pr.iap(),[2,v4.apply(void 0,lt([],ve(r),!1))]})})},createPayment:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return z(n,void 0,void 0,function(){return H(this,function(s){return Pr.iap(),[2,w4.apply(void 0,lt([],ve(r),!1))]})})},requestConsentAgreement:function(){return z(n,void 0,void 0,function(){return H(this,function(r){return Pr.iap(),[2,z(void 0,void 0,void 0,function(){return H(this,function(i){switch(i.label){case 0:return[4,bo("iap.requestConsentAgreement").catch(function(s){throw s.code&&s.description?M(s.code,s.description):M(Nt,"Failed to request consent agreement",{cause:s})})];case 1:return i.sent(),[2]}})})]})})}}},e}(he),I4={},pg=Object.defineProperties(I4,{getOS:{value:Xt,enumerable:!0,writable:!0},getVersion:{value:hd,enumerable:!0,writable:!0},getLanguage:{value:M1,enumerable:!0,writable:!0},getAppLanguage:{value:F1,enumerable:!0,writable:!0},getOrigins:{value:V1,enumerable:!0,writable:!0},isInClient:{value:Ce,enumerable:!0,writable:!0},isLoggedIn:{value:Ot,enumerable:!0,writable:!0},logout:{value:ig,enumerable:!0,writable:!0},getAccessToken:{value:pr,enumerable:!0,writable:!0},getIDToken:{value:cd,enumerable:!0,writable:!0},getDecodedIDToken:{value:dd,enumerable:!0,writable:!0},getContext:{value:It,enumerable:!0,writable:!0},openWindow:{value:pd,enumerable:!0,writable:!0},closeWindow:{value:Ys,enumerable:!0,writable:!0},getFriendship:{value:Xs(H1,"profile"),enumerable:!0,writable:!0},getAId:{value:HT,enumerable:!0,writable:!0},getProfilePlus:{value:qT,enumerable:!0,writable:!0},getIsVideoAutoPlay:{value:WT,enumerable:!0,writable:!0},getLineVersion:{value:mr,enumerable:!0,writable:!0},isApiAvailable:{value:El,enumerable:!0,writable:!0},getProfile:{value:Xs(fg,"profile"),enumerable:!0,writable:!0},sendMessages:{value:Xs(z1,"chat_message.write"),enumerable:!0,writable:!0},subWindow:{value:Sn,enumerable:!0,writable:!0},ready:{value:tO,enumerable:!0,writable:!0},id:{get:function(){return rt().liffId||null},enumerable:!0},_dispatchEvent:{value:sD,enumerable:!0,writable:!0},_call:{value:bo,enumerable:!0,writable:!0},_addListener:{value:ag,enumerable:!0,writable:!0},_removeListener:{value:lg,enumerable:!0,writable:!0},_postMessage:{value:l1,enumerable:!0,writable:!0}}),mg=new eO,Y1=new ZN(mg,pg),T4=new OT(mg,Y1).install();function x4(t){T4.call(pg,t)}[new OT(mg,Y1),new _D,new UD,new JD,r4,KO,e1,qD,c4,ID,new UO,new g4,new y4,new E4].forEach(x4);var xa=pg;const S4={apiKey:"AIzaSyCzCXFgd7VrWHyHrM3GILQ2JHzQaa7yoIw",authDomain:"amstudio-booking.firebaseapp.com",projectId:"amstudio-booking",storageBucket:"amstudio-booking.firebasestorage.app",messagingSenderId:"197698776484",appId:"1:197698776484:web:818beeea66d470bfc36531"},b4="2008567948-KGMPJPGe",A4="booking-system-web",C4="1234",qt={code:"822",bankName:"",account:"1234-5678-9012",amountPerPerson:1e3},Qr=[{id:"tainan",name:""},{id:"kaohsiung",name:""}],X1=["",""],J1=["",""],Z1=["",""],ex=["11:00","13:00","15:00","17:00","18:30",""],k4=[{id:"1",name:" ()",price:6e3,category:"",type:"",order:1,duration:120},{id:"2",name:" ()",price:8e3,category:"",type:"",order:2,duration:150},{id:"3",name:" ()",price:2e3,category:"",type:"",session:"",timeRange:"3",duration:90},{id:"4",name:" ()",price:3e3,category:"",type:"",session:"",timeRange:"3",duration:120}],tx=xE(S4),op=wP(tx),Ah=VN(tx),fn=()=>Jr(op,"artifacts",A4,"public","data"),$e={auth:Ah,db:op,signIn:()=>wR(Ah),onUserChange:t=>bR(Ah,t),getServices:t=>Es(hn(fn(),"services"),e=>t(e.docs.map(n=>({id:n.id,...n.data()})))),getDiscounts:t=>Es(hn(fn(),"discounts"),e=>t(e.docs.map(n=>({id:n.id,...n.data()})))),getTemplates:t=>Es(hn(fn(),"templates"),e=>t(e.docs.map(n=>({id:n.id,...n.data()})))),getSettings:t=>Es(hn(fn(),"settings"),e=>{const n={};e.forEach(r=>{n[r.id]=r.data()}),t(n)}),getBookingsByDate:(t,e,n)=>{const r=hh(hn(fn(),"bookings"),fh("locationId","==",t),fh("date","==",e));return Es(r,i=>{const s=i.docs.map(o=>o.data()).filter(o=>o.status!=="cancelled");n(s)})},getAllBookings:t=>{const e=hh(hn(fn(),"bookings"),CP("date","desc"),kP(300));return Es(e,n=>t(n.docs.map(r=>({id:r.id,...r.data()}))))},searchBookings:async t=>{const e=hh(hn(fn(),"bookings"),fh("customerPhone","==",t));return(await NP(e)).docs.map(r=>({id:r.id,...r.data()}))},createBookings:async t=>{const e=MP(op);t.forEach(n=>{const r=Jr(hn(fn(),"bookings"));e.set(r,{...n,createdAt:mt.now()})}),await e.commit()},reportPayment:async(t,e)=>{const n=Jr(hn(fn(),"bookings"),t);await ph(n,{paymentStatus:"reported",paymentInfo:{last5:e,at:new Date().toISOString()}})},updateBookingStatus:async(t,e)=>{await ph(Jr(hn(fn(),"bookings"),t),e)},addItem:async(t,e)=>{await LP(hn(fn(),t),e)},updateItem:async(t,e,n)=>{await ph(Jr(hn(fn(),t),e),n)},deleteItem:async(t,e)=>{await DP(Jr(hn(fn(),t),e))},updateSettings:async(t,e)=>{await OP(Jr(hn(fn(),"settings"),t),e,{merge:!0})}},Le=({name:t,size:e=20,className:n=""})=>{const r={check:f.jsx("polyline",{points:"20 6 9 17 4 12"}),chevronRight:f.jsx("path",{d:"m9 18 6-6-6-6"}),chevronLeft:f.jsx("path",{d:"m15 18-6-6 6-6"}),close:f.jsxs(f.Fragment,{children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),plus:f.jsxs(f.Fragment,{children:[f.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),f.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})]}),trash:f.jsxs(f.Fragment,{children:[f.jsx("polyline",{points:"3 6 5 6 21 6"}),f.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),search:f.jsxs(f.Fragment,{children:[f.jsx("circle",{cx:"11",cy:"11",r:"8"}),f.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),settings:f.jsxs(f.Fragment,{children:[f.jsx("circle",{cx:"12",cy:"12",r:"3"}),f.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),map:f.jsxs(f.Fragment,{children:[f.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),f.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),calendar:f.jsxs(f.Fragment,{children:[f.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),f.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),f.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),f.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),clock:f.jsxs(f.Fragment,{children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("polyline",{points:"12 6 12 12 16 14"})]}),user:f.jsxs(f.Fragment,{children:[f.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),f.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),tag:f.jsxs(f.Fragment,{children:[f.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),f.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),back:f.jsx("path",{d:"M19 12H5m7 7l-7-7 7-7"}),eye:f.jsxs(f.Fragment,{children:[f.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),f.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),smile:f.jsxs(f.Fragment,{children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),f.jsx("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),f.jsx("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]}),copy:f.jsxs(f.Fragment,{children:[f.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),f.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),noDeposit:f.jsxs(f.Fragment,{children:[f.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),f.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"}),f.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"})]}),refresh:f.jsxs(f.Fragment,{children:[f.jsx("path",{d:"M23 4v6h-6M1 20v-6h6"}),f.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),down:f.jsx("path",{d:"m6 9 6 6 6-6"}),up:f.jsx("path",{d:"m18 15-6-6-6 6"})};return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:r[t]||f.jsx("circle",{cx:"12",cy:"12",r:"10"})})},Ja=({children:t,className:e=""})=>f.jsx("div",{className:`bg-white rounded-2xl p-5 shadow-sm border border-[#EAE0D5] ${e}`,children:t}),Be=({onClick:t,children:e,variant:n="primary",className:r="",disabled:i=!1})=>{const s="flex items-center justify-center gap-2 rounded-xl font-bold transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",o={primary:"bg-[#8D6E63] text-white shadow-lg hover:bg-[#795548] py-3",secondary:"bg-[#2c2c2c] text-white shadow-lg py-3",outline:"border-2 border-dashed border-[#8d6e63] text-[#8d6e63] bg-transparent hover:bg-[#fffaf9] py-3",ghost:"bg-transparent text-gray-400 hover:text-[#8d6e63] p-2",danger:"bg-red-50 text-red-400 hover:bg-red-100 p-2"};return f.jsx("button",{onClick:t,disabled:i,className:`${s} ${o[n]} ${r}`,children:e})},sa=({title:t,isOpen:e,onClose:n,children:r})=>e?f.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-end justify-center backdrop-blur-[2px] transition-opacity animate-fadeIn",onClick:n,children:f.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-3xl p-6 pb-10 shadow-2xl max-h-[85vh] overflow-y-auto transform transition-transform",onClick:i=>i.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-xl font-bold text-[#4e342e]",children:t}),f.jsx("button",{onClick:n,className:"p-2 bg-gray-100 rounded-full text-gray-500 hover:bg-gray-200",children:f.jsx(Le,{name:"close",size:16})})]}),r]})}):null,P4=()=>f.jsx("div",{className:"w-6 h-6 border-4 border-[#f3f3f3] border-t-[#C4A48C] rounded-full animate-spin"}),Sc=t=>{if(!navigator.clipboard){const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),alert("!")}catch{alert("")}document.body.removeChild(e);return}navigator.clipboard.writeText(t).then(()=>alert("!"),()=>alert(""))},uu=t=>{if(!t||t.length===0)return 0;const e=t.reduce((r,i)=>r+(i.duration||120),0),n=t.length>1?30:0;return Math.max(e-n,0)},R4=({onLogin:t,onBack:e})=>{const[n,r]=X.useState("");return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#faf9f6] p-6 fade-in",children:f.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-lg w-full max-w-sm text-center border border-[#e7e0da]",children:[f.jsx("h2",{className:"text-xl font-bold mb-6 text-[#4e342e]",children:""}),f.jsx("input",{type:"password",placeholder:"PIN",className:"w-full p-4 bg-[#fdfbf7] rounded-xl mb-6 text-center text-xl tracking-widest border border-[#d7ccc8] focus:border-[#8d6e63] outline-none",value:n,onChange:i=>r(i.target.value)}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(Be,{variant:"ghost",className:"flex-1",onClick:e,children:""}),f.jsx(Be,{className:"flex-1",onClick:()=>{n===C4?t():alert("")},children:""})]})]})})},N4=({onBack:t})=>{var gt,it;const[e,n]=X.useState("bookings"),[r,i]=X.useState("list"),[s,o]=X.useState(!1),[l,u]=X.useState([]),[c,h]=X.useState([]),[m,g]=X.useState([]),[_,b]=X.useState([]),[k,C]=X.useState({}),[E,v]=X.useState(new Date),[A,D]=X.useState(null),[L,V]=X.useState(null),[I,w]=X.useState(!1),[T,x]=X.useState(""),[P,N]=X.useState(!1),[S,bt]=X.useState(""),[cn,Dn]=X.useState(!1),[_e,W]=X.useState({date:new Date().toISOString().split("T")[0],time:"11:00",name:"",phone:"",locationId:Qr[0].id,serviceId:""}),[ne,se]=X.useState(Qr[0].id),[ke,ge]=X.useState(null),[de,en]=X.useState(null),[Mt,dn]=X.useState("");X.useEffect(()=>{const R=[$e.getAllBookings(u),$e.getServices(h),$e.getTemplates(g),$e.getDiscounts(b),$e.getSettings(C)];return()=>R.forEach(G=>G())},[]);const En=(R,G)=>{var st;const ie={confirm:`
{{date}} {{time}}
{{location}}
{{service}}
`,verify:"",cancel:"","no-deposit":`
{{date}} {{time}}
{{location}}
{{service}}
`};return(((st=m.find(we=>we.title.includes(G==="confirm"?"":G==="verify"?"":G==="no-deposit"?"":"")))==null?void 0:st.content)||ie[G]||ie.confirm).replace("{{name}}",R.customerName).replace("{{date}}",R.date).replace("{{time}}",R.time).replace("{{service}}",R.serviceName).replace("{{location}}",R.locationName)},Oi=(R,G)=>{ge(R),en(G),dn(En(R,G))},ps=async()=>{if(!(!ke||!de))try{const R={};de==="verify"&&(R.paymentStatus="verified"),de==="cancel"&&(R.status="cancelled"),de==="confirm"&&(R.status="confirmed",R.paymentStatus="verified"),de==="no-deposit"&&(R.status="confirmed",R.paymentStatus="verified",R.deposit=0,R.notes=(ke.notes||"")+" []"),await $e.updateBookingStatus(ke.id,R),ge(null),en(null)}catch(R){console.error(R),alert("")}},gr=async()=>{if(!_e.name||!_e.phone||!_e.serviceId){alert("");return}const R=c.find(ee=>ee.id===_e.serviceId),G=Qr.find(ee=>ee.id===_e.locationId);if(!R||!G)return;const ie={locationId:G.id,locationName:G.name,serviceId:[R.id],serviceName:R.name,serviceDuration:R.duration||120,date:_e.date,time:_e.time,customerName:_e.name,customerPhone:_e.phone,discountIdentity:"",groupId:"ADMIN_"+Date.now(),guestIndex:1,totalPrice:R.price,deposit:0,status:"confirmed",paymentStatus:"verified",userId:"ADMIN",notes:""};try{await $e.createBookings([ie]),Dn(!1),W({..._e,name:"",phone:""}),alert("")}catch(ee){console.error(ee),alert("")}},yr=async()=>{if(!S.trim())return;const R=S.trim().split(`
`),G=[],ie=[];for(let ee=0;ee<R.length;ee++){const Ke=R[ee].split(",").map(Me=>Me.trim());if(Ke.length<5){ie.push(` ${ee+1} `);continue}const[st,we,Te,le,dt]=Ke;if(!st.match(/^\d{4}-\d{2}-\d{2}$/)){ie.push(` ${ee+1} `);continue}const Ft=c.find(Me=>dt.includes(Me.name)||Me.name.includes(dt)),vr=Ft?Ft.price:0,ms=Ft&&Ft.duration||120,er=Ft?[Ft.id]:[];G.push({locationId:Qr[0].id,locationName:Qr[0].name,serviceId:er,serviceName:dt,serviceDuration:ms,date:st,time:we,customerName:Te,customerPhone:le,discountIdentity:"",groupId:"BATCH_"+Date.now(),guestIndex:1,totalPrice:vr,deposit:0,status:"confirmed",paymentStatus:"verified",userId:"ADMIN",notes:""})}if(!(ie.length>0&&(alert(`
`+ie.join(`
`)),G.length===0))&&confirm(` ${G.length} `))try{await $e.createBookings(G),bt(""),N(!1),alert("")}catch(ee){console.error(ee),alert("")}},B=({b:R})=>{var G;return f.jsxs(Ja,{className:"relative overflow-hidden mb-3",children:[f.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-2 ${R.status==="confirmed"?"bg-green-500":R.status==="cancelled"?"bg-red-400":"bg-yellow-400"}`}),f.jsxs("div",{className:"pl-3",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"font-bold text-lg text-[#5d4037]",children:[R.date," ",R.time]}),f.jsxs("div",{className:"text-gray-600",children:[R.customerName," ",f.jsxs("span",{className:"text-xs text-gray-400",children:["(",R.customerPhone,")"]})]}),f.jsx("div",{className:"text-xs text-[#8d6e63] mt-1 bg-[#faf9f6] inline-block px-2 py-0.5 rounded border border-[#e7e0da]",children:R.locationName})]}),f.jsxs("div",{className:"flex flex-col items-end gap-1",children:[f.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${R.status==="confirmed"?"bg-green-100 text-green-700":R.status==="cancelled"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:R.status==="confirmed"?"":R.status==="cancelled"?"":""}),f.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${R.paymentStatus==="verified"?"bg-green-100 text-green-700":R.paymentStatus==="reported"?"bg-blue-100 text-blue-700":"bg-red-50 text-red-500"}`,children:R.paymentStatus==="verified"?"":R.paymentStatus==="reported"?` (${(G=R.paymentInfo)==null?void 0:G.last5})`:""})]})]}),f.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:[R.serviceName," | $",R.totalPrice]}),f.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:[": ",Math.floor(R.serviceDuration/60),"h ",R.serviceDuration%60,"m"]}),R.notes&&f.jsxs("div",{className:"text-xs text-gray-400 bg-gray-50 p-2 rounded mb-2",children:[": ",R.notes]}),f.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-100",children:[R.paymentStatus==="unpaid"&&R.status!=="cancelled"&&f.jsxs("button",{onClick:()=>Oi(R,"no-deposit"),className:"text-xs bg-gray-100 text-gray-600 px-3 py-2 rounded hover:bg-gray-200 font-bold flex items-center gap-1",children:[f.jsx(Le,{name:"noDeposit",size:14})," "]}),R.status==="pending"&&R.status!=="cancelled"&&f.jsx("button",{onClick:()=>Oi(R,"confirm"),className:"text-xs bg-blue-100 text-blue-700 px-3 py-2 rounded hover:bg-blue-200 font-bold",children:""}),R.status!=="cancelled"&&f.jsx("button",{onClick:()=>Oi(R,"cancel"),className:"text-xs bg-red-100 text-red-700 px-3 py-2 rounded hover:bg-red-200 font-bold",children:""})]})]})]})},Y=()=>{const R=s?l.filter(le=>le.status==="cancelled"):l.filter(le=>le.status!=="cancelled"),G=R.filter(le=>le.paymentStatus==="unpaid"),ie=R.filter(le=>le.paymentStatus==="reported"),ee=R.filter(le=>le.status==="pending"&&le.paymentStatus==="verified"),Ke=R.filter(le=>le.status==="confirmed"&&new Date(le.date)>=new Date).sort((le,dt)=>le.date.localeCompare(dt.date)),st=R.filter(le=>le.status==="confirmed"&&new Date(le.date)<new Date),we=R,Te=({title:le,list:dt})=>dt.length>0?f.jsxs("div",{className:"mb-6",children:[f.jsxs("h3",{className:"font-bold text-[#8d6e63] mb-3 px-1",children:[le," (",dt.length,")"]}),dt.map(Ft=>f.jsx(B,{b:Ft},Ft.id))]}):null;return s?f.jsxs("div",{className:"pb-20",children:[f.jsx("div",{className:"mb-4 p-2 bg-red-50 text-red-600 rounded text-center text-sm font-bold",children:" "}),f.jsx(Te,{title:"",list:we}),we.length===0&&f.jsx("div",{className:"text-center text-gray-400 mt-10",children:""})]}):f.jsxs("div",{className:"pb-20",children:[f.jsxs("div",{className:"mb-4 flex gap-2",children:[f.jsxs(Be,{variant:"outline",onClick:()=>Dn(!0),className:"flex-1 border-dashed text-sm py-2",children:[f.jsx(Le,{name:"plus",size:16})," "]}),f.jsx(Be,{variant:"outline",onClick:()=>N(!0),className:"w-1/3 border-dashed text-sm py-2",children:""})]}),f.jsx(Te,{title:" ()",list:ie}),f.jsx(Te,{title:"",list:G}),f.jsx(Te,{title:" / ",list:ee}),f.jsx(Te,{title:"",list:Ke}),f.jsx(Te,{title:"",list:st})]})},re=()=>{const R=E.getFullYear(),G=E.getMonth(),ie=new Date(R,G+1,0).getDate(),ee=new Date(R,G,1).getDay(),Ke={};l.forEach(we=>{we.status!=="cancelled"&&(Ke[we.date]||(Ke[we.date]={hasPending:!1,count:0}),we.status==="pending"&&(Ke[we.date].hasPending=!0),Ke[we.date].count++)});const st=l.filter(we=>we.date===A&&we.status!=="cancelled").sort((we,Te)=>we.time.localeCompare(Te.time));return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-white p-4 rounded-3xl border shadow-sm",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("button",{onClick:()=>v(new Date(R,G-1)),className:"px-3 py-1 bg-gray-100 rounded",children:"<"}),f.jsxs("span",{className:"font-bold text-lg",children:[R," ",G+1,""]}),f.jsx("button",{onClick:()=>v(new Date(R,G+1)),className:"px-3 py-1 bg-gray-100 rounded",children:">"})]}),f.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-xs mb-2 text-gray-400",children:["","","","","","",""].map(we=>f.jsx("div",{children:we},we))}),f.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:ee}).map((we,Te)=>f.jsx("div",{},"e"+Te)),Array.from({length:ie}).map((we,Te)=>{const le=Te+1,dt=`${R}-${String(G+1).padStart(2,"0")}-${String(le).padStart(2,"0")}`,Ft=Ke[dt],vr=A===dt;return f.jsxs("div",{onClick:()=>D(dt),className:`aspect-square flex flex-col items-center justify-center rounded-xl font-medium cursor-pointer transition-all border 
                    ${vr?"bg-[#8D6E63] text-white border-transparent":"bg-white border-gray-100 text-gray-700"}`,children:[f.jsx("span",{children:le}),Ft&&f.jsx("div",{className:`w-1.5 h-1.5 rounded-full mt-1 ${Ft.hasPending?"bg-yellow-400":"bg-green-500"}`})]},le)})]})]}),A&&st.map(we=>f.jsx(B,{b:we},we.id)),A&&st.length===0&&f.jsx("div",{className:"text-center text-gray-400 py-8",children:""})]})},Z=()=>{const R=[...c].sort((G,ie)=>(G.order||0)-(ie.order||0));return f.jsxs("div",{className:"space-y-3",children:[f.jsx(Be,{onClick:()=>{V({duration:120}),x("service"),w(!0)},className:"w-full",children:""}),R.map(G=>f.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-bold text-[#5d4037]",children:G.name}),f.jsxs("div",{className:"text-xs text-gray-400",children:[G.category," - ",G.type," | $",G.price," | ",G.duration||120,""]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>{$e.updateItem("services",G.id,{order:(G.order||0)-1})},className:"p-1 bg-gray-100 rounded",children:""}),f.jsx("button",{onClick:()=>{$e.updateItem("services",G.id,{order:(G.order||0)+1})},className:"p-1 bg-gray-100 rounded",children:""}),f.jsx("button",{onClick:()=>{V(G),x("service"),w(!0)},className:"p-1 bg-blue-100 text-blue-600 rounded",children:""}),f.jsx("button",{onClick:()=>{confirm("?")&&$e.deleteItem("services",G.id)},className:"p-1 bg-red-100 text-red-600 rounded",children:""})]})]},G.id))]})},Ve=async()=>{const R=T==="service"?"services":T==="discount"?"discounts":"templates";L.id?await $e.updateItem(R,L.id,L):await $e.addItem(R,L),w(!1)};return f.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20 fade-in",children:[f.jsxs("div",{className:"bg-white sticky top-0 z-20 shadow-sm",children:[f.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[f.jsx("h2",{className:"font-bold text-[#5d4037]",children:""}),f.jsxs("div",{className:"flex gap-2",children:[e==="bookings"&&f.jsx("button",{onClick:()=>o(!s),className:`text-xs px-3 py-1 rounded-full border ${s?"bg-red-100 text-red-600 border-red-200":"bg-gray-50 text-gray-400 border-gray-200"}`,children:f.jsx(Le,{name:"trash",size:14})}),f.jsx("button",{onClick:t,className:"text-xs bg-gray-100 px-3 py-1 rounded-full",children:""})]})]}),f.jsx("div",{className:"flex overflow-x-auto no-scrollbar",children:["bookings","services","settings","others"].map(R=>f.jsx("button",{onClick:()=>{n(R),R!=="bookings"&&o(!1)},className:`flex-1 py-3 text-sm font-bold border-b-2 whitespace-nowrap px-4 ${e===R?"border-[#8d6e63] text-[#8d6e63]":"border-transparent text-gray-400"}`,children:R==="bookings"?"":R==="services"?"":R==="settings"?"":""},R))}),e==="bookings"&&f.jsxs("div",{className:"flex border-b",children:[f.jsx("button",{onClick:()=>i("list"),className:`flex-1 py-2 text-xs font-bold ${r==="list"?"bg-gray-100 text-[#5d4037]":"text-gray-400"}`,children:""}),f.jsx("button",{onClick:()=>i("calendar"),className:`flex-1 py-2 text-xs font-bold ${r==="calendar"?"bg-gray-100 text-[#5d4037]":"text-gray-400"}`,children:""})]})]}),f.jsxs("div",{className:"p-4",children:[e==="bookings"&&(r==="list"?Y():re()),e==="services"&&Z(),e==="settings"&&f.jsx("div",{className:"text-center text-gray-400 py-10",children:f.jsxs("div",{className:"space-y-6 text-left",children:[f.jsx("div",{className:"flex bg-white p-1 rounded-xl border shadow-sm",children:Qr.map(R=>f.jsx("button",{onClick:()=>se(R.id),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${ne===R.id?"bg-[#5d4037] text-white shadow-md":"text-gray-400"}`,children:R.name},R.id))}),f.jsxs("div",{className:"bg-white p-4 rounded-2xl border",children:[f.jsx("h3",{className:"font-bold mb-2",children:""}),f.jsx("textarea",{className:"w-full p-3 bg-gray-50 border rounded-xl h-24 text-sm",defaultValue:((it=(gt=k[ne])==null?void 0:gt.timeSlots)==null?void 0:it.join(", "))||ex.join(", "),onBlur:R=>{const G=R.target.value.split(",").map(ie=>ie.trim()).filter(ie=>ie);$e.updateSettings(ne,{timeSlots:G})}})]}),f.jsx("div",{className:"text-xs text-gray-400 text-center",children:"()"})]})}),e==="others"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("h3",{className:"font-bold text-[#5d4037]",children:""}),f.jsx(Be,{onClick:()=>{V({}),x("discount"),w(!0)},className:"w-full text-xs py-2",children:""}),_.map(R=>f.jsxs("div",{className:"flex justify-between bg-white p-3 rounded border",children:[f.jsxs("span",{children:[R.name," (-$",R.amount,")"]}),f.jsx("button",{onClick:()=>$e.deleteItem("discounts",R.id),className:"text-red-400",children:""})]},R.id))]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("h3",{className:"font-bold text-[#5d4037]",children:""}),f.jsxs("div",{className:"bg-blue-50 p-3 rounded text-xs text-blue-700 mb-2",children:["","{{name}}"," , ","{{date}}"," , ","{{time}}"," , ","{{location}}"," , ","{{service}}"," "]}),f.jsx(Be,{onClick:()=>{V({}),x("template"),w(!0)},className:"w-full text-xs py-2",children:""}),m.map(R=>f.jsxs("div",{className:"bg-white p-3 rounded border",children:[f.jsxs("div",{className:"font-bold text-sm flex justify-between",children:[R.title,f.jsx("button",{onClick:()=>$e.deleteItem("templates",R.id),className:"text-red-400",children:""})]}),f.jsx("div",{className:"text-xs text-gray-400 truncate",children:R.content})]},R.id))]})]})]}),f.jsx(sa,{title:L!=null&&L.id?"":"",isOpen:I,onClose:()=>w(!1),children:f.jsxs("div",{className:"space-y-4",children:[T==="service"&&f.jsxs(f.Fragment,{children:[f.jsx("input",{className:"w-full p-2 border rounded",placeholder:"",value:(L==null?void 0:L.name)||"",onChange:R=>V({...L,name:R.target.value})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{className:"w-1/2 p-2 border rounded",type:"number",placeholder:"",value:(L==null?void 0:L.price)||"",onChange:R=>V({...L,price:Number(R.target.value)})}),f.jsx("input",{className:"w-1/2 p-2 border rounded",type:"number",placeholder:"()",value:(L==null?void 0:L.duration)||120,onChange:R=>V({...L,duration:Number(R.target.value)})})]}),f.jsxs("select",{className:"w-full p-2 border rounded",value:(L==null?void 0:L.category)||"",onChange:R=>V({...L,category:R.target.value}),children:[f.jsx("option",{value:"",children:""}),X1.map(R=>f.jsx("option",{value:R,children:R},R))]}),f.jsxs("select",{className:"w-full p-2 border rounded",value:(L==null?void 0:L.type)||"",onChange:R=>V({...L,type:R.target.value}),children:[f.jsx("option",{value:"",children:""}),J1.map(R=>f.jsx("option",{value:R,children:R},R))]}),(L==null?void 0:L.type)===""&&f.jsxs(f.Fragment,{children:[f.jsxs("select",{className:"w-full p-2 border rounded",value:(L==null?void 0:L.session)||"",onChange:R=>V({...L,session:R.target.value}),children:[f.jsx("option",{value:"",children:""}),Z1.map(R=>f.jsx("option",{value:R,children:R},R))]}),f.jsx("input",{className:"w-full p-2 border rounded",placeholder:" (3)",value:(L==null?void 0:L.timeRange)||"",onChange:R=>V({...L,timeRange:R.target.value})})]})]}),T==="discount"&&f.jsxs(f.Fragment,{children:[f.jsx("input",{className:"w-full p-2 border rounded",placeholder:" (e.g. )",value:(L==null?void 0:L.name)||"",onChange:R=>V({...L,name:R.target.value})}),f.jsx("input",{className:"w-full p-2 border rounded",type:"number",placeholder:"",value:(L==null?void 0:L.amount)||"",onChange:R=>V({...L,amount:Number(R.target.value)})})]}),T==="template"&&f.jsxs(f.Fragment,{children:[f.jsx("input",{className:"w-full p-2 border rounded",placeholder:"",value:(L==null?void 0:L.title)||"",onChange:R=>V({...L,title:R.target.value})}),f.jsx("textarea",{className:"w-full p-2 border rounded h-32",placeholder:" ( {{name}}, {{date}}...)",value:(L==null?void 0:L.content)||"",onChange:R=>V({...L,content:R.target.value})})]}),f.jsx(Be,{onClick:Ve,className:"w-full",children:""})]})}),f.jsx(sa,{title:de==="confirm"?"":de==="verify"?"":de==="no-deposit"?"":"",isOpen:!!ke,onClose:()=>{ge(null),en(null)},children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-sm text-gray-500",children:de==="confirm"?"":de==="no-deposit"?" $0":""}),f.jsx("textarea",{className:"w-full h-40 p-3 bg-gray-50 border rounded-xl text-sm",value:Mt,onChange:R=>dn(R.target.value)}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(Be,{variant:"outline",className:"flex-1",onClick:()=>Sc(Mt),children:[f.jsx(Le,{name:"copy"})," "]}),f.jsx(Be,{onClick:ps,className:"flex-1",children:""})]})]})}),f.jsx(sa,{title:"",isOpen:P,onClose:()=>N(!1),children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-yellow-50 p-3 rounded text-xs text-yellow-800",children:[": ",f.jsx("strong",{children:"YYYY-MM-DD, HH:MM, , , "}),f.jsx("br",{}),": 2024-05-20, 13:00, , 0912345678, "]}),f.jsx("textarea",{className:"w-full h-40 p-3 bg-gray-50 border rounded-xl text-sm whitespace-pre",placeholder:" CSV ...",value:S,onChange:R=>bt(R.target.value)}),f.jsx(Be,{onClick:yr,className:"w-full",children:""})]})}),f.jsx(sa,{title:"",isOpen:cn,onClose:()=>Dn(!1),children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 block mb-1",children:""}),f.jsx("div",{className:"flex gap-2",children:Qr.map(R=>f.jsx("button",{onClick:()=>W({..._e,locationId:R.id}),className:`flex-1 py-2 text-sm rounded border ${_e.locationId===R.id?"bg-[#8d6e63] text-white border-[#8d6e63]":"bg-white border-gray-200"}`,children:R.name},R.id))})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 block mb-1",children:""}),f.jsx("input",{type:"date",className:"w-full p-2 border rounded",value:_e.date,onChange:R=>W({..._e,date:R.target.value})})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 block mb-1",children:""}),f.jsx("input",{type:"time",className:"w-full p-2 border rounded",value:_e.time,onChange:R=>W({..._e,time:R.target.value})})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 block mb-1",children:""}),f.jsx("input",{className:"w-full p-2 border rounded",value:_e.name,onChange:R=>W({..._e,name:R.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 block mb-1",children:""}),f.jsx("input",{className:"w-full p-2 border rounded",value:_e.phone,onChange:R=>W({..._e,phone:R.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 block mb-1",children:""}),f.jsxs("select",{className:"w-full p-2 border rounded bg-white",value:_e.serviceId,onChange:R=>W({..._e,serviceId:R.target.value}),children:[f.jsx("option",{value:"",children:"..."}),c.sort((R,G)=>(R.order||0)-(G.order||0)).map(R=>f.jsxs("option",{value:R.id,children:[R.name," ($",R.price,")"]},R.id))]})]}),f.jsx(Be,{onClick:gr,className:"w-full mt-2",children:""})]})})]})},O4=({services:t,onSelect:e,onCancel:n})=>{const[r,i]=X.useState("main"),[s,o]=X.useState(null),[l,u]=X.useState(null),[c,h]=X.useState(null),[m,g]=X.useState(!1),_=X.useMemo(()=>[...t].sort((C,E)=>(C.order||999)-(E.order||999)),[t]),b=()=>f.jsxs("button",{onClick:()=>{r==="confirm"?i("sub"):r==="time"?i("session"):r==="session"?i("sub"):r==="sub"?i("main"):r==="main"&&n()},className:"mb-4 text-base text-[#8d6e63] flex items-center gap-2 font-bold px-4 py-2 rounded-lg hover:bg-white bg-[#f4f1ec] border border-[#e7e0da] shadow-sm",children:[f.jsx(Le,{name:"chevronLeft",size:20})," ",r==="main"?"":""]});if(r==="main")return f.jsxs("div",{className:"space-y-4 fade-in",children:[f.jsx("div",{className:"flex justify-between items-center mb-2",children:f.jsx("p",{className:"text-sm text-[#8d6e63] font-bold tracking-wide",children:""})}),f.jsx("div",{className:"grid gap-4",children:X1.map(C=>f.jsxs("button",{onClick:()=>{o(C),i("sub")},className:"flex flex-col items-center justify-center p-6 rounded-3xl transition-all duration-300 shadow-sm border border-[#e7e0da] bg-white text-[#5d4037] hover:border-[#d7ccc8] hover:shadow-md hover:-translate-y-1",children:[f.jsx("div",{className:"text-[#8d6e63] mb-3",children:C.includes("")?f.jsx(Le,{name:"eye",size:40}):f.jsx(Le,{name:"smile",size:40})}),f.jsx("div",{className:"font-bold text-lg",children:C})]},C))})]});if(r==="sub")return f.jsxs("div",{className:"space-y-3 fade-in",children:[f.jsx(b,{}),f.jsx("h3",{className:"font-bold text-xl text-[#4e342e] mb-2 px-1",children:s}),J1.map(C=>f.jsxs("button",{onClick:()=>{u(C),i(C===""?"session":"confirm")},className:"w-full p-4 rounded-2xl mb-3 flex justify-between items-center transition-all duration-200 text-lg font-medium shadow-sm border border-[#e7e0da] bg-white text-[#5d4037] hover:-translate-y-0.5",children:[C," ",f.jsx(Le,{name:"chevronRight"})]},C))]});if(r==="confirm"){const C=_.find(v=>v.category===s&&v.type===l),E=C?C.price:0;return f.jsxs("div",{className:"fade-in",children:[f.jsx(b,{}),f.jsxs("h3",{className:"font-bold mb-4 text-lg text-[#4e342e] px-1",children:[s," - ",l]}),s===""&&l===""&&f.jsx("div",{className:"mb-6 p-4 bg-white border-2 border-[#d7ccc8] rounded-2xl shadow-sm cursor-pointer hover:bg-[#fff8f6] transition-colors",onClick:()=>g(!m),children:f.jsxs("label",{className:"flex items-center gap-4 cursor-pointer pointer-events-none",children:[f.jsx("div",{className:`w-6 h-6 rounded-full border flex items-center justify-center transition-all ${m?"bg-[#8d6e63] border-[#8d6e63]":"bg-white border-gray-400"}`,children:m&&f.jsx(Le,{name:"check",className:"text-white",size:16})}),f.jsxs("div",{children:[f.jsx("div",{className:"font-bold text-[#5d4037] text-lg",children:" /"}),f.jsx("div",{className:"text-sm text-gray-500 mt-1",children:" (+$1300)"})]})]})}),f.jsxs("div",{className:"mb-6 text-center p-6 bg-[#fff8f6] rounded-2xl border border-[#e7e0da]",children:[f.jsx("div",{className:"text-sm text-gray-500 mb-1",children:""}),f.jsxs("div",{className:"text-3xl font-bold text-[#8d6e63]",children:["$",m?E+1300:E]})]}),f.jsx(Be,{onClick:()=>{if(C){let v={...C};s===""&&m&&(v.name+=" ()",v.price+=1300,v.isDarkLip=!0),e(v)}},className:"w-full",children:""})]})}if(r==="session")return f.jsxs("div",{className:"space-y-3 fade-in",children:[f.jsx(b,{}),f.jsxs("h3",{className:"font-bold text-xl text-[#4e342e] px-1",children:[s," - ",c]}),f.jsx("p",{className:"text-sm text-[#8d6e63] px-1 mb-2",children:""}),Z1.map(C=>f.jsxs("button",{onClick:()=>{h(C),i("time")},className:"w-full p-4 rounded-2xl mb-3 flex justify-between items-center bg-white border border-[#e7e0da] shadow-sm text-[#5d4037] font-medium",children:[C," ",f.jsx(Le,{name:"chevronRight"})]},C))]});const k=_.filter(C=>C.category===s&&C.type===""&&C.session===c).map(C=>({label:C.timeRange||"",price:C.price})).filter((C,E,v)=>v.findIndex(A=>A.label===C.label)===E);return f.jsxs("div",{className:"space-y-3 fade-in",children:[f.jsx(b,{}),f.jsxs("h3",{className:"font-bold text-xl text-[#4e342e] px-1",children:[s," - ",c]}),f.jsx("p",{className:"text-sm text-[#8d6e63] px-1 mb-2",children:""}),k.length>0?k.map(C=>{const E=_.find(v=>v.category===s&&v.type===""&&v.session===c&&v.timeRange===C.label);return f.jsxs("button",{onClick:()=>E&&e(E),className:"w-full p-4 rounded-2xl mb-3 flex justify-between items-center bg-white border border-[#e7e0da] shadow-sm group hover:bg-[#fffbf9]",children:[f.jsx("span",{className:"font-medium text-lg text-[#5d4037]",children:C.label}),f.jsxs("span",{className:"font-bold text-[#8d6e63] bg-[#fff8f6] px-3 py-1 rounded-lg border border-[#e7e0da] group-hover:bg-[#8d6e63] group-hover:text-white transition-all",children:["$",C.price]})]},C.label)}):f.jsx("div",{className:"text-gray-400 text-center py-8 bg-gray-50 rounded-xl border-2 border-dashed",children:""})]})},D4=({onBack:t})=>{const[e,n]=X.useState(""),[r,i]=X.useState([]),[s,o]=X.useState(!1),[l,u]=X.useState(null),[c,h]=X.useState(""),m=async()=>{if(e){o(!0);try{const _=await $e.searchBookings(e),b=new Date,k=_.filter(C=>C.status!=="cancelled"&&new Date(C.date)>=new Date(b.setHours(0,0,0,0)));k.sort((C,E)=>new Date(C.date).getTime()-new Date(E.date).getTime()),k.length===0&&_.length>0?alert(" ()"):_.length===0&&alert(""),i(k)}catch(_){console.error(_),alert("")}o(!1)}},g=async()=>{if(!(!l||!c)){if(await $e.reportPayment(l,c),xa.isInClient()){const _=r.find(k=>k.id===l),b=`
${_.customerName}
${_.customerPhone}
${_.date}
${c}`;xa.sendMessages([{type:"text",text:b}]).catch(console.error)}alert(""),u(null),m()}};return f.jsxs("div",{className:"min-h-screen bg-[#faf9f6] p-4 fade-in",children:[f.jsxs("div",{className:"bg-[#FFFBF9] p-4 rounded-2xl border border-[#EBE0D9] mb-4 shadow-sm relative",children:[f.jsxs("h3",{className:"font-bold text-[#8d6e63] mb-2 text-sm flex items-center gap-2",children:[f.jsx(Le,{name:"tag",size:16})," "]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"text-sm text-gray-600",children:[qt.code," ",qt.bankName]}),f.jsx("div",{className:"font-bold text-xl text-[#5d4037] tracking-wider",children:qt.account})]}),f.jsx("button",{onClick:()=>Sc(qt.account),className:"bg-white border border-[#d7ccc8] text-[#8d6e63] px-3 py-1 rounded-lg text-xs font-bold shadow-sm active:scale-95",children:""})]})]}),f.jsxs(Ja,{className:"mb-6",children:[f.jsx("h2",{className:"font-bold text-xl mb-4 text-[#4e342e]",children:" / "}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{className:"flex-1 p-3 border border-[#d7ccc8] rounded-xl outline-none",placeholder:"",value:e,onChange:_=>n(_.target.value)}),f.jsx(Be,{onClick:m,className:"w-24",children:s?f.jsx(P4,{}):""})]})]}),f.jsx("div",{className:"space-y-4",children:r.map(_=>f.jsxs(Ja,{children:[f.jsxs("div",{className:"flex justify-between mb-3",children:[f.jsxs("span",{className:"font-bold text-lg text-[#8d6e63]",children:[_.date," ",_.time]}),f.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-bold ${_.status==="confirmed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:_.status==="confirmed"?" ":" "})]}),f.jsxs("div",{className:"text-base text-gray-700 mb-3",children:[_.serviceName," ",_.guestIndex&&`(${_.guestIndex})`]}),f.jsxs("div",{className:"text-sm font-bold text-[#5d4037] mb-3 bg-[#fdfbf7] p-2 rounded-lg inline-block",children:["$",_.deposit]}),f.jsxs("div",{className:"border-t border-[#f3f4f6] pt-3 flex justify-between items-center mt-2",children:[f.jsxs("span",{className:"text-sm text-gray-500 font-medium",children:["",_.paymentStatus==="verified"?f.jsx("span",{className:"text-green-600 font-bold",children:""}):_.paymentStatus==="reported"?f.jsx("span",{className:"text-blue-600 font-bold",children:""}):f.jsx("span",{className:"text-red-500",children:""})]}),_.paymentStatus==="unpaid"&&f.jsx(Be,{variant:"primary",className:"py-1 px-4 text-sm h-8",onClick:()=>u(_.id),children:""})]}),l===_.id&&f.jsxs("div",{className:"mt-4 bg-[#fdfbf7] p-4 rounded-xl border border-[#d7ccc8]",children:[f.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[": ",qt.code," ",qt.account]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{className:"flex-1 p-2 border border-[#d7ccc8] rounded-lg text-sm bg-white",placeholder:"",value:c,onChange:b=>h(b.target.value)}),f.jsx(Be,{className:"py-1 px-3 text-sm",onClick:g,children:""}),f.jsx(Be,{variant:"ghost",className:"",onClick:()=>u(null),children:""})]})]})]},_.id))}),f.jsx("div",{className:"mt-10",children:f.jsx(Be,{variant:"ghost",className:"w-full",onClick:t,children:""})})]})};function L4(){var ps,gr,yr;const[t,e]=X.useState(null),[n,r]=X.useState("home"),[i,s]=X.useState(1),[o,l]=X.useState(null),[u,c]=X.useState(k4),[h,m]=X.useState([]),[g,_]=X.useState({}),[b,k]=X.useState([]),[C,E]=X.useState([{id:1,name:"",phone:"",services:[],discount:null}]),[v,A]=X.useState(!1),[D,L]=X.useState(new Date),[V,I]=X.useState({}),[w,T]=X.useState(0),[x,P]=X.useState(""),[N,S]=X.useState(!1),[bt,cn]=X.useState(!1),[Dn,_e]=X.useState(0),[W,ne]=X.useState("");X.useEffect(()=>{xa.init({liffId:b4}).catch(console.error)},[]),X.useEffect(()=>{$e.signIn().catch(console.error),$e.onUserChange(e);const B=[$e.getServices(Y=>{Y.length&&c(Y)}),$e.getDiscounts(m),$e.getSettings(_)];return()=>B.forEach(Y=>Y())},[]),X.useEffect(()=>{if(new Date<=new Date("2024-12-31")&&h.length>0){const re=h.find(Z=>Z.name.includes("")||Z.amount===100);re&&E(Z=>Z.map(Ve=>Ve.discount?Ve:{...Ve,discount:re}))}},[h,i]),X.useEffect(()=>{if(o&&D){const B=D.toISOString().split("T")[0],Y=$e.getBookingsByDate(o.id,B,re=>{k(re)});return()=>Y()}},[o,D]),X.useEffect(()=>{I({}),P("")},[D,o]);const se=()=>{r("home"),s(1),E([{id:1,name:"",phone:"",services:[],discount:null}]),A(!1),L(new Date),I({}),S(!1)},ke=X.useMemo(()=>{let B=0;return C.forEach(Y=>{let re=Y.services.reduce((ie,ee)=>ie+ee.price,0),Z=Y.discount?Y.discount.amount:0;const Ve=Y.services.some(ie=>ie.category===""&&ie.type===""),gt=Y.services.some(ie=>ie.category===""&&ie.type===""),it=Y.services.some(ie=>ie.type===""),R=Y.services.some(ie=>ie.type==="");let G=0;Ve&&gt?G=400:(it&&R||v&&it)&&(G=200),re-=Z+G,B+=Math.max(0,re)}),B},[C,v]),ge=X.useMemo(()=>C.reduce((B,Y)=>{const re=Y.services.some(Z=>Z.type==="");return B+(re?qt.amountPerPerson:0)},0),[C]),de=(B,Y,re)=>{const Z=[...C];Z[B]={...Z[B],[Y]:re},E(Z)},en=B=>{let Y=[...C[Dn].services];if(Y.some(Z=>Z.id===B.id))return;const re=Y.findIndex(Z=>Z.category===B.category);re!==-1&&Y.splice(re,1),Y.push(B),Y.sort((Z,Ve)=>(Z.order||0)-(Ve.order||0)),de(Dn,"services",Y)},Mt=B=>{if(!B||B.includes(""))return-1;const[Y,re]=B.split(":").map(Number);return Y*60+re},dn=(B,Y)=>{var gt,it;const re=Mt(B);if(re===-1)return!1;const Z=uu(((gt=C[Y])==null?void 0:gt.services)||[]),Ve=re+Z;for(const R of b){const G=Mt(R.time);if(G===-1)continue;const ie=G+(R.serviceDuration||120);if(Math.max(re,G)<Math.min(Ve,ie))return!0}for(const[R,G]of Object.entries(V)){const ie=parseInt(R);if(ie!==Y){const ee=Mt(G);if(ee===-1)continue;const Ke=uu(((it=C[ie])==null?void 0:it.services)||[]),st=ee+Ke;if(Math.max(re,ee)<Math.min(Ve,st))return!0}}return!1},En=async()=>{const B=D.toISOString().split("T")[0],Y=Date.now().toString(),re=C.map((Z,Ve)=>{var ms,er;const gt=V[Ve],it=gt===""?` ${x}`:gt;let R=((ms=Z.discount)==null?void 0:ms.amount)||0;const G=Z.services.some(Me=>Me.category===""&&Me.type===""),ie=Z.services.some(Me=>Me.category===""&&Me.type===""),ee=Z.services.some(Me=>Me.type===""),Ke=Z.services.some(Me=>Me.type==="");let st=0,we=((er=Z.discount)==null?void 0:er.name)||"";G&&ie?(st=400,we+=" ()"):ee&&Ke?(st=200,we+=" ()"):v&&ee&&(st=200,we+=" ()");const Te=R+st,le=Z.services.reduce((Me,Il)=>Me+Il.price,0)-Te,dt=uu(Z.services),vr=Z.services.some(Me=>Me.type==="")?qt.amountPerPerson:0;return{locationId:o==null?void 0:o.id,locationName:o==null?void 0:o.name,serviceId:Z.services.map(Me=>Me.id),serviceName:Z.services.map(Me=>Me.name).join(" + "),serviceDuration:dt,date:B,time:it,customerName:Z.name,customerPhone:Z.phone,discountIdentity:we.trim(),groupId:Y,guestIndex:Ve+1,totalPrice:le<0?0:le,deposit:vr,status:"pending",paymentStatus:vr>0?"unpaid":"verified",userId:t==null?void 0:t.uid}});re.forEach(Z=>{Z.deposit===0&&(Z.paymentStatus="verified")});try{if(await $e.createBookings(re),xa.isInClient()){const Z=`
${C[0].name}
${C[0].phone}
${B}
${o==null?void 0:o.name}
${C.map(Ve=>Ve.services.map(gt=>gt.name).join("+")).join(", ")}
$${ke}
$${ge}`;await xa.sendMessages([{type:"text",text:Z}])}s(4)}catch(Z){console.error(Z),alert("")}},Oi=()=>{if(!W)return alert("");const B={name:W,service:"",currentPriceInfo:{price:2e3}};alert(`
: ${B.name}
: ${B.service}
: $${B.currentPriceInfo.price}`)};return n==="admin-login"?f.jsx(R4,{onLogin:()=>r("admin"),onBack:()=>r("home")}):n==="admin"?f.jsx(N4,{onBack:()=>r("home")}):n==="status"?f.jsx(D4,{onBack:()=>r("home")}):n==="home"?f.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center p-6 bg-[#faf9f6] relative",children:[f.jsx("div",{className:"absolute top-6 left-6 opacity-30 hover:opacity-100 transition-opacity",children:f.jsx("button",{onClick:()=>r("admin-login"),className:"p-2",children:f.jsx(Le,{name:"settings"})})}),f.jsxs("div",{className:"w-full max-w-sm space-y-8 text-center fade-in",children:[f.jsxs("div",{className:"mb-10",children:[f.jsx("h1",{className:"text-3xl font-bold text-[#5d4037] tracking-widest mb-1",children:"AM Studio"}),f.jsx("p",{className:"text-xs text-[#8d6e63] tracking-[0.2em]",children:"PROFESSIONAL BEAUTY"})]}),f.jsx("div",{className:"space-y-4",children:Qr.map(B=>f.jsxs("button",{onClick:()=>{l(B),r("booking"),s(1)},className:"w-full p-6 bg-white rounded-3xl border border-[#e7e0da] shadow-sm flex flex-col items-center justify-center gap-3 transition-all duration-200 group active:scale-95 hover:shadow-md hover:border-[#d7ccc8]",children:[f.jsx("div",{className:"bg-[#fdfbf7] p-4 rounded-full text-[#8d6e63] group-hover:bg-[#8d6e63] group-hover:text-white transition-colors",children:f.jsx(Le,{name:"map",size:28})}),f.jsx("div",{className:"font-bold text-lg text-[#5d4037]",children:B.name}),f.jsx("div",{className:"text-xs text-gray-400 tracking-wider",children:""})]},B.id))}),f.jsx("div",{className:"pt-4",children:f.jsxs(Be,{variant:"outline",className:"w-full rounded-3xl",onClick:()=>r("status"),children:[f.jsx(Le,{name:"search",size:16}),"  / "]})}),f.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-dashed border-[#d7ccc8] mt-4 shadow-sm",children:[f.jsx("label",{className:"text-xs font-bold text-[#8d6e63] mb-2 block text-left",children:""}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{className:"flex-1 p-2 bg-[#faf9f6] rounded-lg border border-[#e7e0da] text-sm outline-none focus:border-[#8d6e63]",placeholder:"",value:W,onChange:B=>ne(B.target.value)}),f.jsx(Be,{onClick:Oi,className:"py-2 px-4 h-full text-xs",children:""})]})]})]})]}):f.jsxs("div",{className:"min-h-screen pb-28 bg-[#faf9f6]",children:[f.jsxs("div",{className:"sticky top-0 bg-white/90 backdrop-blur-md p-4 z-20 flex items-center justify-between border-b border-gray-100 shadow-sm",children:[f.jsx("button",{onClick:()=>{i===1?se():s(B=>B-1)},className:"p-2 text-[#8d6e63] hover:bg-gray-50 rounded-full",children:f.jsx(Le,{name:"chevronLeft"})}),f.jsxs("span",{className:"font-bold text-[#5d4037] tracking-wide",children:[i===1&&"",i===2&&"",i===3&&"",i===4&&""]}),f.jsx("div",{className:"w-8"})]}),f.jsxs("div",{className:"max-w-md mx-auto p-4 space-y-6",children:[i===1&&f.jsxs("div",{className:"fade-in space-y-6",children:[f.jsxs("div",{className:"flex bg-white p-1.5 rounded-xl border border-gray-200 shadow-sm",children:[f.jsx("button",{onClick:()=>{A(!1),E([C[0]])},className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${v?"text-gray-400 hover:bg-gray-50":"bg-[#5d4037] text-white shadow-md"}`,children:""}),f.jsx("button",{onClick:()=>{A(!0),C.length<2&&E([...C,{id:Date.now(),name:"",phone:"",services:[],discount:null}])},className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${v?"bg-[#5d4037] text-white shadow-md":"text-gray-400 hover:bg-gray-50"}`,children:""})]}),C.map((B,Y)=>{var ie;const re=B.services.some(ee=>ee.category===""&&ee.type===""),Z=B.services.some(ee=>ee.category===""&&ee.type===""),Ve=B.services.some(ee=>ee.type===""),gt=B.services.some(ee=>ee.type==="");let it="";re&&Z?it="  (+) $400":Ve&&gt?it="  (+) $200":v&&Ve&&(it="  $200");const R=uu(B.services),G=R>0?`${Math.floor(R/60)} ${R%60>0?`${R%60}`:""}`:"";return f.jsxs("div",{className:"relative pl-5 border-l-4 border-[#8d6e63] bg-white p-5 rounded-r-2xl shadow-sm",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsxs("span",{className:"bg-[#4e342e] text-white text-xs px-3 py-1 rounded-full font-bold tracking-wide",children:[" ",Y+1," "]}),v&&Y>0&&f.jsx("button",{onClick:()=>{const ee=[...C];ee.splice(Y,1),E(ee)},className:"text-red-300 hover:text-red-500",children:f.jsx(Le,{name:"trash"})})]}),B.services.length>0&&f.jsxs("div",{className:"space-y-3 mb-4",children:[B.services.map(ee=>f.jsxs("div",{className:"bg-[#fffbf9] p-4 rounded-xl border border-[#e7e0da] flex justify-between items-center relative overflow-hidden",children:[f.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-[#8d6e63]"}),f.jsxs("div",{children:[f.jsx("div",{className:"font-bold text-[#4e342e]",children:ee.name}),f.jsxs("div",{className:"text-sm text-[#8d6e63] font-bold mt-1",children:["$",ee.price]})]}),f.jsx("button",{onClick:()=>de(Y,"services",B.services.filter(Ke=>Ke.id!==ee.id)),className:"text-gray-300 hover:text-red-400 p-2",children:f.jsx(Le,{name:"trash",size:18})})]},ee.id)),G&&f.jsxs("div",{className:"text-xs text-gray-500 text-right mt-1",children:[": ",G]})]}),f.jsxs(Be,{variant:"outline",className:"w-full mb-4 border-dashed",onClick:()=>{_e(Y),cn(!0)},children:[f.jsx(Le,{name:"plus",size:18})," ",B.services.length>0?"":""]}),!it&&!B.services.some(ee=>ee.type==="")&&B.services.length>0&&f.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[f.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-[#8d6e63] mb-2",children:[f.jsx(Le,{name:"tag",size:14})," "]}),f.jsxs("select",{className:"w-full p-2 bg-[#faf9f6] border border-[#e7e0da] rounded-lg text-sm text-[#5d4037] outline-none",value:((ie=B.discount)==null?void 0:ie.id)||"",onChange:ee=>de(Y,"discount",h.find(Ke=>Ke.id===ee.target.value)||null),children:[f.jsx("option",{value:"",children:" ()"}),h.map(ee=>f.jsxs("option",{value:ee.id,children:[ee.name," (-$",ee.amount,")"]},ee.id))]})]}),it&&f.jsx("div",{className:"mt-2 text-xs text-green-600 font-bold text-center bg-green-50 p-2 rounded",children:it})]},B.id)}),v&&f.jsxs(Be,{variant:"primary",className:"w-full",onClick:()=>E([...C,{id:Date.now(),name:"",phone:"",services:[],discount:null}]),children:[f.jsx(Le,{name:"plus"})," "]})]}),i===2&&f.jsxs("div",{className:"fade-in space-y-6",children:[f.jsxs(Ja,{children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("button",{onClick:()=>L(new Date(D.getFullYear(),D.getMonth()-1)),className:"p-2 hover:bg-gray-100 rounded-full",children:f.jsx(Le,{name:"chevronLeft"})}),f.jsxs("span",{className:"font-bold text-lg text-[#5d4037]",children:[D.getFullYear()," ",D.getMonth()+1,""]}),f.jsx("button",{onClick:()=>L(new Date(D.getFullYear(),D.getMonth()+1)),className:"p-2 hover:bg-gray-100 rounded-full",children:f.jsx(Le,{name:"chevronRight"})})]}),f.jsx("div",{className:"grid grid-cols-7 gap-2 text-center text-xs text-gray-400 mb-2 font-medium",children:["","","","","","",""].map(B=>f.jsx("span",{children:B},B))}),f.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:new Date(D.getFullYear(),D.getMonth(),1).getDay()}).map((B,Y)=>f.jsx("div",{},"e"+Y)),Array.from({length:new Date(D.getFullYear(),D.getMonth()+1,0).getDate()}).map((B,Y)=>{var G,ie;const re=Y+1,Z=new Date(D.getFullYear(),D.getMonth(),re),Ve=Z.toISOString().split("T")[0],gt=((ie=(G=g[o.id])==null?void 0:G.allowedDates)==null?void 0:ie.includes(Ve))??!0,it=re===D.getDate(),R=Z<new Date(new Date().setHours(0,0,0,0));return f.jsx("button",{disabled:!gt||R,onClick:()=>{L(Z),I({})},className:`h-9 w-9 rounded-xl text-sm flex items-center justify-center font-bold transition-all duration-200 
                                        ${it?"bg-[#8d6e63] text-white shadow-md scale-110":!gt||R?"text-gray-200 cursor-not-allowed":"hover:bg-[#f5f5f5] text-gray-700"}`,children:re},re)})]})]}),f.jsxs("div",{children:[f.jsxs("h3",{className:"font-bold text-[#5d4037] mb-3 flex items-center gap-2 text-lg",children:[f.jsx(Le,{name:"clock"})," "]}),C.length>1&&f.jsx("p",{className:"text-xs text-[#8d6e63] mb-3 bg-orange-50 p-2 rounded-lg",children:"  (: 11:00, 13:00)"}),C.length>1&&f.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto no-scrollbar",children:C.map((B,Y)=>f.jsxs("button",{onClick:()=>T(Y),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition-all 
                                        ${w===Y?"bg-[#5d4037] text-white shadow-md":"bg-white border border-gray-200 text-gray-500"}`,children:[" ",Y+1,"  ",V[Y]?"":""]},Y))}),f.jsx("div",{className:"grid grid-cols-2 gap-3",children:(((gr=(ps=g[o.id])==null?void 0:ps.specialRules)==null?void 0:gr[D.toISOString().split("T")[0]])||((yr=g[o.id])==null?void 0:yr.timeSlots)||ex).map(B=>{const Y=C.length>1?w:0,re=dn(B,Y),Z=V[Y]===B;return f.jsxs("button",{disabled:re&&!Z,onClick:()=>{I({...V,[Y]:B}),B!==""&&P("")},className:`py-4 rounded-xl text-center text-sm font-bold border transition-all duration-200
                                        ${Z?"bg-[#8d6e63] text-white border-[#8d6e63] shadow-md transform scale-[1.02]":re?"bg-gray-100 text-gray-300 border-transparent cursor-not-allowed":"bg-white border-transparent shadow-sm text-gray-600 hover:border-[#d7ccc8]"}`,children:[B," ",re&&!Z&&f.jsx("span",{className:"text-[10px] block font-normal opacity-80",children:" / "})]},B)})}),V[C.length>1?w:0]===""&&f.jsxs("div",{className:"mt-4 bg-white border border-[#d7ccc8] p-4 rounded-xl fade-in",children:[f.jsx("label",{className:"text-xs font-bold text-[#8d6e63] mb-2 block",children:""}),f.jsx("input",{type:"time",className:"w-full text-xl font-bold bg-gray-50 p-2 rounded-lg text-center outline-none focus:ring-1 focus:ring-[#8d6e63]",value:x,onChange:B=>P(B.target.value)})]})]})]}),i===3&&f.jsxs("div",{className:"fade-in space-y-4",children:[f.jsx("h3",{className:"font-bold text-[#5d4037] mb-2",children:""}),C.map((B,Y)=>f.jsxs(Ja,{className:"space-y-4 relative overflow-visible",children:[f.jsxs("div",{className:"absolute -top-3 left-4 bg-[#8d6e63] text-white text-xs px-2 py-1 rounded font-bold",children:[" ",Y+1," "]}),f.jsxs("div",{className:"relative mt-2",children:[f.jsx("label",{className:"text-xs font-bold text-gray-400 absolute left-3 top-2",children:""}),f.jsx("input",{className:"w-full pt-7 pb-2 px-3 bg-[#FAFAFA] rounded-xl border-none font-bold text-[#5d4037] focus:ring-1 focus:ring-[#C4A48C] outline-none",placeholder:"",value:B.name,onChange:re=>de(Y,"name",re.target.value)})]}),f.jsxs("div",{className:"relative",children:[f.jsx("label",{className:"text-xs font-bold text-gray-400 absolute left-3 top-2",children:""}),f.jsx("input",{type:"tel",className:"w-full pt-7 pb-2 px-3 bg-[#FAFAFA] rounded-xl border-none font-bold text-[#5d4037] focus:ring-1 focus:ring-[#C4A48C] outline-none",placeholder:"09xx-xxx-xxx",value:B.phone,onChange:re=>de(Y,"phone",re.target.value)})]}),f.jsxs("div",{className:"px-1 text-[10px] text-gray-400",children:["* ",f.jsx("br",{}),"* "]})]},B.id)),f.jsxs("div",{className:"bg-[#FFFBF9] p-6 rounded-2xl border border-[#EBE0D9] space-y-3 shadow-sm",children:[f.jsx("h3",{className:"font-bold text-[#5D4037] mb-2 text-lg",children:""}),f.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[f.jsx("span",{children:""}),f.jsxs("span",{className:"font-bold text-[#5d4037]",children:[qt.code," (",qt.bankName,")"]})]}),f.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[f.jsx("span",{children:""}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-bold text-[#5d4037] tracking-widest",children:qt.account}),f.jsx("button",{onClick:()=>Sc(qt.account),className:"text-[#8d6e63] bg-white border border-[#e7e0da] px-2 py-0.5 rounded text-xs",children:""})]})]}),f.jsx("div",{className:"border-t border-dashed border-[#D7CCC8] my-2"}),f.jsxs("div",{className:"flex justify-between items-end",children:[f.jsx("span",{className:"text-sm font-bold text-[#8d6e63]",children:""}),f.jsxs("span",{className:"text-red-500 font-bold text-2xl",children:["$",ge]})]}),f.jsx("p",{className:"text-[10px] text-gray-400 text-center mt-2",children:" 24 "})]}),f.jsxs("label",{className:"flex items-center gap-3 justify-center py-4 cursor-pointer bg-white rounded-xl border border-gray-100 shadow-sm",children:[f.jsx("input",{type:"checkbox",checked:N,onChange:B=>S(B.target.checked),className:"w-5 h-5 accent-[#8D6E63]"}),f.jsx("span",{className:"text-sm font-bold text-[#5d4037]",children:""})]})]}),i===4&&f.jsxs("div",{className:"text-center pt-6 fade-in px-4",children:[f.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 text-green-600 shadow-sm animate-bounce",children:f.jsx(Le,{name:"check",size:40})}),f.jsx("h2",{className:"text-2xl font-bold mb-2 text-[#5d4037]",children:""}),f.jsxs("p",{className:"text-gray-500 mb-6 text-sm",children:["",f.jsx("span",{className:"text-red-500 font-bold",children:""}),"",f.jsx("br",{}),""]}),f.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-gray-200 shadow-sm mb-6 text-left relative",children:[f.jsx("div",{className:"absolute top-2 right-2 text-xs bg-gray-100 text-gray-500 px-2 py-1 rounded",children:""}),f.jsx("h3",{className:"font-bold text-[#8d6e63] mb-3 border-b pb-2",children:""}),f.jsxs("div",{className:"space-y-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-gray-500",children:""}),f.jsxs("span",{className:"font-bold",children:[qt.code," ",qt.bankName]})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-gray-500",children:""}),f.jsxs("div",{className:"flex gap-2 items-center",children:[f.jsx("span",{className:"font-bold tracking-wider",children:qt.account}),f.jsx("button",{onClick:()=>Sc(qt.account),className:"text-blue-500 text-xs underline",children:""})]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-gray-500",children:""}),f.jsxs("span",{className:"font-bold text-red-500",children:["$",ge]})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx(Be,{onClick:()=>r("status"),variant:"primary",className:"w-full",children:""}),f.jsx(Be,{onClick:se,variant:"outline",className:"w-full",children:""})]})]})]}),i<4&&f.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-100 p-4 pb-8 shadow-[0_-5px_20px_rgba(0,0,0,0.05)] z-40 flex items-center gap-3 max-w-md mx-auto",children:[i>1&&f.jsxs("button",{onClick:()=>s(B=>B-1),className:"p-3 rounded-xl border-2 border-[#8d6e63] text-[#8d6e63] font-bold hover:bg-[#fffaf9] active:scale-95 transition-all w-24 flex items-center justify-center gap-1",children:[f.jsx(Le,{name:"chevronLeft",size:18})," "]}),f.jsxs("div",{className:"flex-1 flex gap-3",children:[i===1&&f.jsx("div",{className:"hidden"}),f.jsx(Be,{variant:"secondary",className:"flex-1 h-full shadow-xl",onClick:()=>{if(i===1&&C.some(B=>B.services.length===0))return alert("");if(i===2&&C.some((Y,re)=>!V[re]))return alert("");if(i===3&&C.some(B=>!B.name||!B.phone))return alert("");if(i===3&&!N)return alert("");i===3?En():s(B=>B+1)},children:f.jsx("div",{className:"flex flex-col items-center leading-none py-1",children:f.jsx("span",{className:"text-lg",children:i===3?"":""})})})]})]}),f.jsx(sa,{title:"",isOpen:bt,onClose:()=>cn(!1),children:f.jsx(O4,{services:u,onCancel:()=>cn(!1),onSelect:B=>{en(B),cn(!1)}})})]})}const nx=document.getElementById("root");if(!nx)throw new Error("Could not find root element to mount to");const j4=Ch.createRoot(nx);j4.render(f.jsx(Hx.StrictMode,{children:f.jsx(L4,{})}));
